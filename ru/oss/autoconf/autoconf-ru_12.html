<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on February, 19  2004 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>Autoconf: Вопросы</TITLE>

<META NAME="description" CONTENT="Autoconf: Вопросы">
<META NAME="keywords" CONTENT="Autoconf: Вопросы">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC91"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_11.html#SEC90"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC92"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_11.html#SEC90"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_13.html#SEC96"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 12. Вопросы об Autoconf </H1>
<!--docid::SEC91::-->
<A NAME="Questions"></A>
<P>

Раз за разом задаются одни и те же вопросы об Autoconf.  Вот некоторые
из них.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="autoconf-ru_12.html#SEC92">12.1 Распространение скриптов <CODE>configure</CODE></A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="autoconf-ru_12.html#SEC93">12.2 Почему требуется GNU <CODE>m4</CODE>?</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Почему не используется стандартный <CODE>m4</CODE>?</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="autoconf-ru_12.html#SEC94">12.3 Как я могу начать работу?</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Autoconf и <CODE>m4</CODE> требуют наличия друг друга?</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="autoconf-ru_12.html#SEC95">12.4 Почему не используется Imake?</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Почему GNU использует <CODE>configure</CODE> вместо Imake?</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Распространение"></A>
<HR SIZE="6">
<A NAME="SEC92"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC91"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC93"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC91"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC91"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_13.html#SEC96"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.1 Распространение скриптов <CODE>configure</CODE> </H2>
<!--docid::SEC92::-->
<A NAME="Distributing"></A>
<P>

<TABLE><tr><td>&nbsp;</td><td class=display><pre style="font-family: serif">Какие ограничения существуют на распространение скриптов <CODE>configure</CODE>,
созданных Autoconf?  Как могут затронуть они мою программу, которая 
использует эти скрипты?
</pre></td></tr></table></P><P>

На использование или распространение скриптов настройки, созданных
Autoconf, не накладывается никаких ограничений. В Autoconf версии 1, они
подпадали под действие GNU General Public License.  Мы все еще поощряем
авторов к распространению их работ под действием лицензий, сходных с
GPL, но это не обязательно при использовании Autoconf.
</P><P>

По поводу других файлов, которые могут быть использованы с
<CODE>configure</CODE>: <TT>`config.h.in'</TT> находятся под теми авторскими
правами, которые используются для вашего <TT>`configure.in'</TT>, поскольку
эти файлы являются производными этого файла и свободно доступного файла
<TT>`acconfig.h'</TT>.  <TT>`config.sub'</TT> и <TT>`config.guess'</TT> не подпадают
под GPL в том случае, когда они используются со скриптами
<CODE>configure</CODE>, созданными с помощью Autoconf: в этом случае вы можете
распространять их под той же лицензией, что и остальной пакет.
<TT>`install-sh'</TT> получен от X Consortium и не защищен авторскими
правами.
</P><P>

<A NAME="Почему GNU m4"></A>
<HR SIZE="6">
<A NAME="SEC93"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC92"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC94"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC91"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC91"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_13.html#SEC96"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.2 Почему требуется GNU <CODE>m4</CODE>? </H2>
<!--docid::SEC93::-->
<A NAME="Why GNU m4"></A>
<P>

<TABLE><tr><td>&nbsp;</td><td class=display><pre style="font-family: serif">Почему Autoconf требует наличия GNU <CODE>m4</CODE>?
</pre></td></tr></table></P><P>

Многие из реализаций <CODE>m4</CODE> имеют зашитые в программу ограничения на
размер и количество макросов, которые Autoconf не может преодолеть.  В
них также отсутствуют некоторые встроенные макросы, без которых было бы
трудно создать такое сложное приложение, как Autoconf, включая:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>builtin
indir
patsubst
__file__
__line__
</pre></td></tr></table></P><P>

Поскольку Autoconf нужен только людям, сопровождающим программное
обеспечение, и поскольку GNU <CODE>m4</CODE> прост в настройке и установке, то
кажется вполне естественным, что также требуется установить GNU
<CODE>m4</CODE>. Многие люди, сопровождающие программное обеспечение GNU и
другое свободное ПО, уже установили у себя большинство утилит GNU,
потому что предпочитают именно их.
</P><P>

<A NAME="Начало работы"></A>
<HR SIZE="6">
<A NAME="SEC94"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC93"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC95"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC91"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC91"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_13.html#SEC96"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.3 Как я могу начать работу? </H2>
<!--docid::SEC94::-->
<A NAME="Bootstrapping"></A>
<P>

<TABLE><tr><td>&nbsp;</td><td class=display><pre style="font-family: serif">Если Autoconf требует GNU <CODE>m4</CODE>, а GNU <CODE>m4</CODE> имеет скрипт 
Autoconf <CODE>configure</CODE>, то как я могу начать работу? Это похоже на 
проблему яйца и курицы!
</pre></td></tr></table></P><P>

Вы неправильно поняли.  Хотя GNU <CODE>m4</CODE>и поставляется со скриптом
<CODE>configure</CODE>, созданным Autoconf, сам Autoconf не требуется для
запуска скрипта и установки GNU <CODE>m4</CODE>. Autoconf требуется в том
случае, если вы хотите изменить скрипт <CODE>configure</CODE> для <CODE>m4</CODE>, а
это требуется немногим (в основном тем, кто сопровождает данный пакет).
</P><P>

<A NAME="Почему не используется Imake"></A>
<HR SIZE="6">
<A NAME="SEC95"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC94"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_13.html#SEC96"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC91"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC91"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_13.html#SEC96"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.4 Почему не используется Imake? </H2>
<!--docid::SEC95::-->
<A NAME="Why Not Imake"></A>
<P>

<TABLE><tr><td>&nbsp;</td><td class=display><pre style="font-family: serif">Почему не используется Imake вместо скриптов <CODE>configure</CODE>?
</pre></td></tr></table></P><P>

Разные люди писали ответы на этот вопрос, так что я приведу здесь
переделанный вариант их объяснений.
</P><P>

Следующий ответ основан на материале, написанном Richard Pixley:
</P><P>

Скрипты, созданные Autoconf, часто работают на машинах, для которых они
не были предназначены.  То есть они хорошо работают, когда нужно создать
конфигурацию для совершенно новой системы.  Imake такого не умеет.
</P><P>

Imake использует общую базу данных, специфических для конкретных
систем.  Для X11 этого достаточно, потому что этот пакет делается одной
организацией, которая имеет централизованный контроль над этой базой
данных.
</P><P>

Утилиты GNU выпускаются не так.  Каждую утилиту GNU сопровождает
отдельный человек, и эти люди разбросаны по всему миру.  Использование
общей базы данных будет просто кошмаром при сопровождении
пакета. Autoconf может показаться неким подобием базы данных, но на
самом деле это не так.  Вместо перечисления зависимостей от машины, он
перечисляет требования программ.
</P><P>

Если вы рассматриваете набор GNU как набор отдельных утилит, то
возникают сходные проблемы. Но утилиты разработки GNU могут быть
настроены как кросс-утилиты в почти любом сочетании машина+цель. Все эти
конфигурации могут быть установлены одновременно. Они даже могут делить
между собой не зависящие от машины файлы. Imake не позволяет сделать
этого.
</P><P>

Шаблоны Imake являются формой стандартизации. Стандарты кодирования GNU
позволяют сделать это без ненужного наложения тех же самых ограничений.
</P><P>

Вот дополнительные объяснения, написанные Per Bothner:
</P><P>

Одним из преимуществ Imake является то, что он легко создает большие
файлы Makefile, используя директивы препроцессора <CODE>cpp</CODE>
<SAMP>`#include'</SAMP> и механизм макросов. Однако на <CODE>cpp</CODE> невозможно
программировать: у него ограниченные возможности условных операторов и
нет операторов циклов.  Помимо того, <CODE>cpp</CODE> не имеет доступа к
переменным среды.
</P><P>

Все эти проблемы решаются использованием командного процессора <CODE>sh</CODE>
вместо <CODE>cpp</CODE>. Командный процессор предоставляет полные возможности
программирования, имеет подстановку макросов, может выполнять или
создавать другие скрипты командного процессора и может пользоваться
переменными среды.
</P><P>

Paul Eggert развил эту тему дальше:
</P><P>

При использовании Autoconf установщикам пакета не нужно предполагать,
что Imake уже установлен и работает правильно. Это не кажется таким уж
большим достоинством для людей, привыкших к Imake, но на многих машинах
Imake не установлен, или установка по умолчанию работает не совсем
правильно, и таким образом, требование наличия Imake для установки
пакета будет препятствовать его распространению на таких
машинах. Например, файлы шаблонов и настроек Imake могут быть
установлены неправильно на машине, или процедура построения,
используемая Imake, может неправильно предполагать, что все исходные
тексты находятся в одном большом дереве каталогов, или настройка Imake
может предполагать, что имеется один компилятор, в то время как вам
необходимо использовать другой компилятор, или могут быть несоответствия
между версиями Imake, используемой пакетом и версией Imake,
поддерживаемой данной машиной. Эти проблемы встречаются намного реже при
использовании Autoconf, поскольку каждый пакет поставляется со своим,
независимым препроцессором конфигурации.
</P><P>

Также Imake часто страдает от неожиданного взаимодействия между
<CODE>make</CODE> и препроцессором C. Фундаментальной проблемой является то,
что препроцессор C был создан для обработки программ на языке C, а не
файлов <TT>`Makefile'</TT>.  Это является менее значимой проблемой при
использовании Autoconf, который использует препроцессор общего
назначения <CODE>m4</CODE>, а автор пакета (а не установщик пакета)
выполняет обработку стандартным способом.
</P><P>

В заключение, Mark Eichin замечает:
</P><P>

Imake, в конце концов, не такой уж и расширяемый.  Для того, чтобы
добавить к Imake новую возможность, вам необходимо создать собственный
шаблон для проекта и сдублировать большинство возможностей существующего
шаблона. Это означает, что для сложного проекта использование
поставляемых производителем шаблонов Imake приведет к сбою ---
поскольку они не предоставляют возможностей, в которых нуждается ваш
проект (если только он не является программой для X11).
</P><P>

Однако с другой стороны:
</P><P>

Одно из преимуществ Imake по сравнению с <CODE>configure</CODE>: файлы
<TT>`Imakefile'</TT> оказываются значительно меньше (более того, они менее
многословны), чем файлы <TT>`Makefile.in'</TT>. Однако существуют решения
этой проблемы--- по крайней мере для исходных текстов Kerberos V5,
мы изменили файлы для вызова общих частей: фрагментов <TT>`Makefile'</TT>
для всего дерева каталогов, находящихся в файлах <TT>`post.in'</TT> и
<TT>`pre.in'</TT>.  Это означает, что часть общей функциональности не
дублируется, хотя они и  будут находиться в скриптах <CODE>configure</CODE>.
</P><P>

<A NAME="Обновление"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_12.html#SEC91"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_13.html#SEC96"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="autoconf-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
on <I>February, 19  2004</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
