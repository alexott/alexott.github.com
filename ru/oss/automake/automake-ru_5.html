<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on February, 19  2004 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>automake: configure</TITLE>

<META NAME="description" CONTENT="automake: configure">
<META NAME="keywords" CONTENT="automake: configure">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC13"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_4.html#SEC12"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC14"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_4.html#SEC12"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_6.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 5. Сканирование файла <TT>`configure.in'</TT> </H1>
<!--docid::SEC13::-->
<P>

<A NAME="IDX129"></A>
<A NAME="IDX130"></A>
</P><P>

Для определения разной информации о данном пакете Automake сканирует
файл <TT>`configure.in'</TT>.  Также ему требуется
определение некоторых макросов и переменных <CODE>autoconf</CODE> в файле
<TT>`configure.in'</TT>. Automake также использует информацию из файла
<TT>`configure.in'</TT> для определения параметров вывода.
</P><P>

Для того, чтобы облегчить сопровождение, Automake
предоставляет некоторые макросы Autoconf. Эти макросы могут быть
автоматически помещены в ваш файл <TT>`aclocal.m4'</TT> при использовании
программы <CODE>aclocal</CODE>.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="automake-ru_5.html#SEC14">5.1 Требования к конфигурации</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="automake-ru_5.html#SEC15">5.2 Другие вещи, которые распознает Automake</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="automake-ru_5.html#SEC16">5.3 Автоматическая генерация <TT>`aclocal.m4'</TT></A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Автоматическая генерация aclocal.m4</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="automake-ru_5.html#SEC17">5.4 Макросы Autoconf, поставляемые с Automake</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="automake-ru_5.html#SEC18">5.5 Написание ваших собственных макросов aclocal</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Требования"></A>
<HR SIZE="6">
<A NAME="SEC14"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC13"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC15"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC13"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC13"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_6.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 5.1 Требования к конфигурации </H2>
<!--docid::SEC14::-->
<P>

<A NAME="IDX131"></A>
<A NAME="IDX132"></A>
</P><P>

Чтобы удовлетворить основным требованиям Automake, можно использовать
макрос <CODE>AM_INIT_AUTOMAKE</CODE> (see section <A HREF="automake-ru_5.html#SEC17">5.4 Макросы Autoconf, поставляемые с Automake</A>).  Но если хотите, то
можете совершить требуемые шаги вручную:
<A NAME="IDX133"></A>
</P><P>

<UL>
<LI>
Определить переменные <CODE>PACKAGE</CODE> и <CODE>VERSION</CODE> с помощью
<CODE>AC_SUBST</CODE>.
<A NAME="IDX134"></A>
<A NAME="IDX135"></A>
Переменная <CODE>PACKAGE</CODE> должна содержать имя пакета, в том виде, в
котором оно используется при создании дистрибутива.  Например, Automake определяет
переменную <CODE>PACKAGE</CODE> со значением <SAMP>`automake'</SAMP>. Переменная
<CODE>VERSION</CODE> должна содержать номер разрабатываемой версии. Мы
рекомендуем хранить номер версии в единственном месте, а именно, в файле 
<TT>`configure.in'</TT>: это упрощает выпуск новых версий.
<P>

Automake не производит никакой интерпретации переменных <CODE>PACKAGE</CODE>
или <CODE>VERSION</CODE>, за исключением работы в режиме <SAMP>`Gnits'</SAMP>
(see section <A HREF="automake-ru_19.html#SEC61">19. Эффект использования ключей <CODE>--gnu</CODE> и <CODE>--gnits</CODE></A>).
</P><P>

<LI>
Если программа или скрипт устанавливаются, то используйте макрос
<CODE>AC_ARG_PROGRAM</CODE>. See section `Преобразование имен при установке' in <CITE>Руководство Autoconf</CITE>.
<A NAME="IDX136"></A>
<P>

<LI>
Используйте макрос <CODE>AC_PROG_MAKE_SET</CODE> если пакет не является
плоским.  See section `Создание файлов вывода' in <CITE>Руководство Autoconf</CITE>.
<A NAME="IDX137"></A>
<P>

<LI>
Используйте макрос <CODE>AM_SANITY_CHECK</CODE> для того, чтобы убедиться, что
среда, в которой будет производится сборка пакета, является нормальной.
<P>

<LI>
Вызовите макрос <CODE>AC_PROG_INSTALL</CODE> (see section `Проверка отдельных программ' in <CITE>Руководство Autoconf</CITE>).
<A NAME="IDX138"></A>
<P>

<LI>
Используйте макрос <CODE>AM_MISSING_PROG</CODE> для того, чтобы убедиться, что
программы <CODE>aclocal</CODE>, <CODE>autoconf</CODE>, <CODE>automake</CODE>,
<CODE>autoheader</CODE> и <CODE>makeinfo</CODE> находятся в среде в которой
производится сборка пакета. Вот как это сделано:
<TABLE><tr><td>&nbsp;</td><td class=example><pre>missing_dir=`cd $ac_aux_dir &#38;&#38; pwd`
AM_MISSING_PROG(ACLOCAL, aclocal, $missing_dir)
AM_MISSING_PROG(AUTOCONF, autoconf-ru, $missing_dir)
AM_MISSING_PROG(AUTOMAKE, automake, $missing_dir)
AM_MISSING_PROG(AUTOHEADER, autoheader, $missing_dir)
AM_MISSING_PROG(MAKEINFO, makeinfo, $missing_dir)
</pre></td></tr></table></UL>
<P>

Вот список других макросов, которые требуются Automake, но которые не
запускаются макросом <CODE>AM_INIT_AUTOMAKE</CODE>:
</P><P>

<A NAME="IDX139"></A>
</P><P>

<DL COMPACT>
<DT><CODE>AC_OUTPUT</CODE>
<DD>Automake использует этот макрос для определения того, какие файлы
необходимо создавать (see section `Создание выходных файлов' in <CITE>Руководство Autoconf</CITE>).  Файлы с именем <TT>`Makefile'</TT> из
этого списка считаются файлами для программы <CODE>make</CODE>.  Остальные
файлы интерпретируются по разному.  В настоящее время
отличие состоит лишь в том, что файлы <TT>`Makefile'</TT> удаляются <CODE>make
distclean</CODE>, тогда как другие файлы удаляются командой <CODE>make clean</CODE>.
<A NAME="IDX140"></A>
</DL>
<P>

<A NAME="Необязательно"></A>
<HR SIZE="6">
<A NAME="SEC15"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC14"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC16"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC13"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC13"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_6.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 5.2 Другие вещи, которые распознает Automake </H2>
<!--docid::SEC15::-->
<P>

<A NAME="IDX141"></A>
<A NAME="IDX142"></A>
</P><P>

Также Automake распознает использование некоторых макросов и в
соответствии с ними генерирует <TT>`Makefile.in'</TT>.  Вот список
распознаваемых макросов и результатов их работы:
</P><P>

<DL COMPACT>
<DT><CODE>AC_CONFIG_HEADER</CODE>
<DD>Automake требует использования макроса <CODE>AM_CONFIG_HEADER</CODE>, который
похож на <CODE>AC_CONFIG_HEADER</CODE> (see section `Заголовочные файлы настройки' in <CITE>Руководство Autoconf</CITE>), но
кроме этого выполняет полезную работу, специфичную для Automake.
<A NAME="IDX143"></A>
<P>

<DT><CODE>AC_CONFIG_AUX_DIR</CODE>
<DD>Automake будет искать различные вспомогательные скрипты, такие как
<TT>`mkinstalldirs'</TT>, в каталоге, указанном в качестве параметра
макроса.  Если скрипты там не обнаружены, то они ищутся в их
<EM>стандартном</EM> месте (в каталоге верхнего уровня пакета, либо в
каталоге исходных текстов, соответствующем текущему файлу
<TT>`Makefile.am'</TT>).  See section `Hахождение ввода `configure'' in <CITE>Руководство Autoconf</CITE>.
<A NAME="IDX144"></A>
<P>

<DT><CODE>AC_PATH_XTRA</CODE>
<DD>Automake при выполнении этого макроса для каждого файла
<TT>`Makefile.in'</TT>, который компилирует программу или библиотеку на C,
поместит туда определения переменных, указанных в <CODE>AC_PATH_XTRA</CODE>.
See section `Системные сервисы' in <CITE>Руководство Autoconf</CITE>.
<A NAME="IDX145"></A>
<P>

<DT><CODE>AC_CANONICAL_HOST</CODE>
<DD><DT><CODE>AC_CHECK_TOOL</CODE>
<DD>Automake обеспечит существование файлов <TT>`config.guess'</TT> и
<TT>`config.sub'</TT>. Также в файле <TT>`Makefile'</TT> появятся переменные 
<SAMP>`host_alias'</SAMP> и <SAMP>`host_triplet'</SAMP>. Смотрите section `Получение канонического типа системы' in <CITE>Руководство Autoconf</CITE>, и
section `Проверка базовых программ' in <CITE>Руководство Autoconf</CITE>.
<A NAME="IDX146"></A>
<A NAME="IDX147"></A>
<A NAME="IDX148"></A>
<A NAME="IDX149"></A>
<P>

<DT><CODE>AC_CANONICAL_SYSTEM</CODE>
<DD>Этот макрос подобен макросу <CODE>AC_CANONICAL_HOST</CODE>, но кроме этого он
определяет в файле <TT>`Makefile'</TT> переменные <SAMP>`build_alias'</SAMP> и
<SAMP>`target_alias'</SAMP>.  See section `Получение канонического типа системы' in <CITE>Руководство Autoconf</CITE>.
<A NAME="IDX150"></A>
<A NAME="IDX151"></A>
<A NAME="IDX152"></A>
<P>

<DT><CODE>AC_FUNC_ALLOCA</CODE>
<DD><DT><CODE>AC_FUNC_GETLOADAVG</CODE>
<DD><DT><CODE>AC_FUNC_MEMCMP</CODE>
<DD><DT><CODE>AC_STRUCT_ST_BLOCKS</CODE>
<DD><DT><CODE>AC_FUNC_FNMATCH</CODE>
<DD><DT><CODE>AM_FUNC_STRTOD</CODE>
<DD><DT><CODE>AC_REPLACE_FUNCS</CODE>
<DD><DT><CODE>AC_REPLACE_GNU_GETOPT</CODE>
<DD><DT><CODE>AM_WITH_REGEX</CODE>
<DD>Automake обеспечит генерацию соответствующих зависимостей для объектов,
относящихся к этим макросам.  Также Automake проверит, что
соответствующие файлы исходных текстов являются частью дистрибутива.
Заметьте, что Automake поставляется без исходных текстов на C, которые
требуются для использования этих макросов, так что <CODE>automake -a</CODE> не
сможет установить их.  За дополнительной информацией
см. See section <A HREF="automake-ru_7.html#SEC22">7.2 Построение библиотеки</A>. Также смотри section `Проверка отдельных функций' in <CITE>Руководство Autoconf</CITE>.
<A NAME="IDX153"></A>
<A NAME="IDX154"></A>
<A NAME="IDX155"></A>
<A NAME="IDX156"></A>
<A NAME="IDX157"></A>
<A NAME="IDX158"></A>
<A NAME="IDX159"></A>
<A NAME="IDX160"></A>
<A NAME="IDX161"></A>
<A NAME="IDX162"></A>
<P>

<DT><CODE>LIBOBJS</CODE>
<DD>Automake также обнаружит операторы, которые помещают файлы с расширением
<TT>`.o'</TT> в <CODE>LIBOBJS</CODE>, и будет обрабатывать эти дополнительные
файлы так, как если бы они описывались макросом <CODE>AC_REPLACE_FUNCS</CODE>.
See section `Проверка базовых функций' in <CITE>Руководство Autoconf</CITE>.
<A NAME="IDX163"></A>
<P>

<DT><CODE>AC_PROG_RANLIB</CODE>
<DD>Этот макрос требуется, если в пакете собирается какая-нибудь библиотека. 
See section `Проверка отдельных программ' in <CITE>Руководство Autoconf</CITE>.
<A NAME="IDX164"></A>
<P>

<DT><CODE>AC_PROG_CXX</CODE>
<DD>Требуется если в пакет входят исходные тексты на языке C++.  
See section `Проверка отдельных программ' in <CITE>Руководство Autoconf</CITE>.
<A NAME="IDX165"></A>
<P>

<DT><CODE>AC_PROG_F77</CODE>
<DD>Требуется, если в пакет будут включаться исходные тексты на Fortran 77.
Этот макрос распространяется с Autoconf версии 2.13 и более поздних. 
See section `Проверка отдельных программ' in <CITE>Руководство Autoconf</CITE>.
<A NAME="IDX166"></A>
<P>

<DT><CODE>AC_F77_LIBRARY_LDFLAGS</CODE>
<DD>Этот макрос требуется для программ и разделяемых библиотек, которые
написаны на разных языках и включают Fortran 77 (see section <A HREF="automake-ru_7.html#SEC31">7.8.3 Использование Fortran 77 с C и C++</A>).  See section <A HREF="automake-ru_5.html#SEC17">Макросы Autoconf поставляемые с Automake</A>.
<A NAME="IDX167"></A>
<P>

<DT><CODE>AM_PROG_LIBTOOL</CODE>
<DD>Automake включит поддержку <CODE>libtool</CODE> (see section `Введение' in <CITE>Руководство Libtool</CITE>).
<A NAME="IDX168"></A>
<P>

<DT><CODE>AC_PROG_YACC</CODE>
<DD>Если в пакете есть исходный текст на Yacc, то вы должны либо
использовать этот макрос, либо определить переменную <SAMP>`YACC'</SAMP> в
файле <TT>`configure.in'</TT>. Рекомендуется использовать первый вариант
(See section `Проверка отдельных программ' in <CITE>Руководство Autoconf</CITE>.) 
<A NAME="IDX169"></A>
<A NAME="IDX170"></A>
<P>

<DT><CODE>AC_DECL_YYTEXT</CODE>
<DD>Этот макрос требуется, если в пакете есть исходный текст на Lex.
See section `Проверка отдельных программ' in <CITE>Руководство Autoconf</CITE>.
<A NAME="IDX171"></A>
<P>

<DT><CODE>AC_PROG_LEX</CODE>
<DD>Если есть исходный текст на Lex, то должен использоваться этот макрос.
See section `Проверка отдельных программ' in <CITE>Руководство Autoconf</CITE>.
<A NAME="IDX172"></A>
<P>

<DT><CODE>ALL_LINGUAS</CODE>
<DD>Если Automake обнаружит, что эта переменная установлена в файле
<TT>`configure.in'</TT>, то он проверит каталог <TT>`po'</TT>, для того, чтобы
обеспечить, что все указанные файлы с расширением <SAMP>`.po'</SAMP> существуют,
и что указаны все существующие файлы <SAMP>`.po'</SAMP>.
<A NAME="IDX173"></A>
<P>

<DT><CODE>AM_C_PROTOTYPES</CODE>
<DD>Это макрос требуется при использовании автоматической де-ANSI-фикации; 
смотри <A HREF="automake-ru_7.html#SEC35">7.10 Автоматическая де-ANSI-фикация</A>.
<A NAME="IDX174"></A>
<P>

<DT><CODE>AM_GNU_GETTEXT</CODE>
<DD>Этот макрос требуется для пакетов, которые используют пакет GNU gettext
(see section <A HREF="automake-ru_9.html#SEC44">9.2 Gettext</A>). Он распространяется вместе с gettext. Если Automake
находит этот макрос, то он проверяет, отвечает ли данный пакет некоторым
требованиям gettext.
<A NAME="IDX175"></A>
<P>

<DT><CODE>AM_MAINTAINER_MODE</CODE>
<DD><A NAME="IDX176"></A>
Этот макрос добавляет ключ <SAMP>`--enable-maintainer-mode'</SAMP> к скрипту
<CODE>configure</CODE>. Если используется данный макрос, то <CODE>automake</CODE>
отключит правило <SAMP>`maintainer-only'</SAMP> в сгенерированных файлах 
<TT>`Makefile.in'</TT>. Этот макрос не разрешен в режиме <SAMP>`Gnits'</SAMP> (see section <A HREF="automake-ru_19.html#SEC61">19. Эффект использования ключей <CODE>--gnu</CODE> и <CODE>--gnits</CODE></A>).
Этот макрос определяет условную переменную <SAMP>`MAINTAINER_MODE'</SAMP>, которую
можно использовать в ваших собственных файлах <TT>`Makefile.am'</TT>.
<A NAME="IDX177"></A>
<P>

<DT><CODE>AC_SUBST</CODE>
<DD><DT><CODE>AC_CHECK_TOOL</CODE>
<DD><DT><CODE>AC_CHECK_PROG</CODE>
<DD><DT><CODE>AC_CHECK_PROGS</CODE>
<DD><DT><CODE>AC_PATH_PROG</CODE>
<DD><DT><CODE>AC_PATH_PROGS</CODE>
<DD>Для каждого из этих макросов, их первый аргумент автоматически
определяется в качестве переменной в каждом сгенерированном файле
<TT>`Makefile.in'</TT>. See section `Установка переменных вывода' in <CITE>Руководство Autoconf</CITE>, и section `Проверка основных переменных' in <CITE>Руководство Autoconf</CITE>. 
<A NAME="IDX178"></A>
<A NAME="IDX179"></A>
<A NAME="IDX180"></A>
<A NAME="IDX181"></A>
<A NAME="IDX182"></A>
<A NAME="IDX183"></A>
<P>

</DL>
<P>

<A NAME="Запуск aclocal"></A>
<HR SIZE="6">
<A NAME="SEC16"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC15"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC17"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC13"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC13"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_6.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 5.3 Автоматическая генерация <TT>`aclocal.m4'</TT> </H2>
<!--docid::SEC16::-->
<P>

<A NAME="IDX184"></A>
<A NAME="IDX185"></A>
</P><P>

Automake содержит некоторое количество макросов Autoconf, которые
могут быть использованы в вашем пакете; в некоторых ситуациях они
требуются для работы Automake. Эти макросы должны быть определены в
вашем файле <TT>`aclocal.m4'</TT>; иначе они не будут обнаружены программой
<CODE>autoconf</CODE>.
</P><P>

Программа <CODE>aclocal</CODE> автоматически создает файл <TT>`aclocal.m4'</TT> на
основе содержимого <TT>`configure.in'</TT>. Это обеспечивает удобный способ
для получения макросов Automake, без выполнения дополнительного
поиска.  Механизм <CODE>aclocal</CODE> является также расширяемым для
использования другими пакетами.
</P><P>

При запуске программа <CODE>aclocal</CODE> производит поиск макроопределений
во всех файлах <TT>`.m4'</TT>, которые она может найти. Затем она сканирует
<TT>`configure.in'</TT>. Любое упоминание одного из найденных на первом
этапе макросов приводит к тому, что этот макрос и все макросы,
требуемые для его работы, будут помещены в файл <TT>`aclocal.m4'</TT>.
</P><P>

Если файл <TT>`acinclude.m4'</TT> существует, то его содержимое также будет
автоматически включено в <TT>`aclocal.m4'</TT>. Это полезно для включения
локальных макросов в <TT>`configure'</TT>.
</P><P>

Программа <CODE>aclocal</CODE> работает со следующими ключами командной строки:
</P><P>

<DL COMPACT>
<DT><CODE>--acdir=<VAR>dir</VAR></CODE>
<DD><A NAME="IDX186"></A>
Заставляет программу искать файлы с макросами в каталоге <VAR>dir</VAR>, вместо 
каталога, куда производилась установка программы.  Этот ключ в основном 
используется для отладки.
<P>

<DT><CODE>--help</CODE>
<DD><A NAME="IDX187"></A>
Напечатать справку по ключам командной строки и закончить работу.
<P>

<DT><CODE>-I <VAR>dir</VAR></CODE>
<DD><A NAME="IDX188"></A>
Добавляет каталог <VAR>dir</VAR> в список каталогов, в которых производится поиск 
файлов <SAMP>`.m4'</SAMP>.
<P>

<DT><CODE>--output=<VAR>file</VAR></CODE>
<DD><A NAME="IDX189"></A>
Вывод производится в файл <VAR>file</VAR>, а не в файл <TT>`aclocal.m4'</TT>.
<P>

<DT><CODE>--print-ac-dir</CODE>
<DD><A NAME="IDX190"></A>
Печатает имя каталога, в котором <CODE>aclocal</CODE> будет производить поиск
файлов <TT>`.m4'</TT>. При задании этого ключа подавляется обычная обработка.
Этот ключ используется пакетом для определения места, куда будет
производиться установка файлов с макросами.
<P>

<DT><CODE>--verbose</CODE>
<DD><A NAME="IDX191"></A>
Печатает имена обрабатываемых файлов.
<P>

<DT><CODE>--version</CODE>
<DD><A NAME="IDX192"></A>
Выдает номер версии и заканчивает работу.
</DL>
<P>

<A NAME="Макросы"></A>
<HR SIZE="6">
<A NAME="SEC17"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC16"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC18"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC13"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC13"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_6.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 5.4 Макросы Autoconf, поставляемые с Automake </H2>
<!--docid::SEC17::-->
<P>

<DL COMPACT>
<DT><CODE>AM_CONFIG_HEADER</CODE>
<DD>При использовании этого макроса Automake сгенерирует правила для 
автоматической регенерации заголовочного
файла конфигурации. Если вы используете этот макрос, то вы должны создать
в каталоге исходных текстов файл <TT>`stamp-h.in'</TT>. Он может быть пустым.
<A NAME="IDX193"></A>
<P>

<DT><CODE>AM_ENABLE_MULTILIB</CODE>
<DD>Этот макрос используется, когда будет строиться "мульти-библиотека".
"Мульти-библиотека" компилируется несколько раз, по разу на каждую
комбинацию флагов компиляции.  Это полезно только в тех случаях, когда
библиотека предназначена для кросс-компиляции.  Первым необязательным
аргументом макроса является имя создаваемого файла <TT>`Makefile'</TT>;
значением по умолчанию является <SAMP>`Makefile'</SAMP>.  Второй аргумент
используется для нахождения каталога верхнего уровня исходных текстов;
по умолчанию используется пустая строка (обычно этот аргумент не следует 
использовать, если вы не знакомы с внутренним устройством).
<P>

<DT><CODE>AM_FUNC_STRTOD</CODE>
<DD>Если функция <CODE>strtod</CODE> недоступна, или работает неправильно (как в 
SunOS 5.4), то строка <TT>`strtod.o'</TT> добавляется к выходной переменной
<CODE>LIBOBJS</CODE>.
<A NAME="IDX194"></A>
<P>

<DT><CODE>AM_FUNC_ERROR_AT_LINE</CODE>
<DD>Если функция <CODE>error_at_line</CODE> не найдена, то строка <TT>`error.o'</TT>
добавляется к <CODE>LIBOBJS</CODE>.
<A NAME="IDX195"></A>
<P>

<DT><CODE>AM_FUNC_MKTIME</CODE>
<DD>Проверяет наличие работоспособной функции <CODE>mktime</CODE>.  Если таковая
не найдена, то к переменной <SAMP>`LIBOBJS'</SAMP> добавляется <TT>`mktime.o'</TT>.
<A NAME="IDX196"></A>
<P>

<DT><CODE>AM_FUNC_OBSTACK</CODE>
<DD>Проверка наличия кода GNU obstacks; если код не найден, то добавить строку
<TT>`obstack.o'</TT> к переменной <SAMP>`LIBOBJS'</SAMP>.
<A NAME="IDX197"></A>
<P>

<DT><CODE>AM_C_PROTOTYPES</CODE>
<DD>Проверяет, распознает ли компилятор прототипы функций. Если это происходит, то
определяет переменную <SAMP>`PROTOTYPES'</SAMP> и устанавливает выходные переменные 
<SAMP>`U'</SAMP> и <SAMP>`ANSI2KNR'</SAMP> в пустую строку.  В противном случае,
устанавливает <SAMP>`U'</SAMP> равным <SAMP>`_'</SAMP>, а <SAMP>`ANSI2KNR'</SAMP> в <SAMP>`./ansi2knr'</SAMP>.
Automake использует эти значения для реализации автоматической
де-ANSI-фикации.
<A NAME="IDX198"></A>
<P>

<DT><CODE>AM_HEADER_TIOCGWINSZ_NEEDS_SYS_IOCTL</CODE>
<DD>Если использование <CODE>TIOCGWINSZ</CODE> требует наличия файла
<TT>`&#60;sys/ioctl.h&#62;'</TT>, то этот макрос определяет переменную
<CODE>GWINSZ_IN_SYS_IOCTL</CODE>.  В противном случае поиск <CODE>TIOCGWINSZ</CODE>
будет осуществляться в <TT>`&#60;termios.h&#62;'</TT>.
<A NAME="IDX199"></A>
<P>

<DT><CODE>AM_INIT_AUTOMAKE</CODE>
<DD>Запускает множество макросов, в которых нуждается <TT>`configure.in'</TT>. Этот макрос 
требует два аргумента -- имя пакета и номер версии.  По умолчанию этот
макрос определяет через <CODE>AC_DEFINE</CODE> макросы <SAMP>`PACKAGE'</SAMP> и 
<SAMP>`VERSION'</SAMP>. Такого поведения можно избежать, передавая непустой 
третий аргумент.
<P>

<DT><CODE>AM_PATH_LISPDIR</CODE>
<DD>Ищет программу <CODE>emacs</CODE>, и если она найдена, то устанавливает
выходную переменную <CODE>lispdir</CODE> равной полному пути к каталогу
<TT>`site-lisp'</TT> программы Emacs.
<A NAME="IDX200"></A>
<P>

<DT><CODE>AM_PROG_CC_STDC</CODE>
<DD>Если по умолчанию компилятор C не работает в режиме ANSI C, то пробует
добавить опцию к переменно <CODE>CC</CODE>, которая заставит его делать это.
Этот макрос пробует различные ключи командной строки 
компилятора, которые включают режим ANSI C 
на некоторых системах. Считается, что компилятор находится в режиме 
ANSI C, если он корректно обрабатывает прототипы функций.
<P>

Если вы используете этот макрос, то вы должны проверить, что после его
вызова компилятор C будет работать в режиме ANSI C; если это не так, то
переменная среды <CODE>am_cv_prog_cc_stdc</CODE> устанавливается в значение
<SAMP>`no'</SAMP>. Если вы написали свою программу в стандарте ANSI C, то вы
можете создать ее не-ANSI-фицированную копию, используя опцию
<CODE>ansi2knr</CODE> (see section <A HREF="automake-ru_7.html#SEC35">7.10 Автоматическая де-ANSI-фикация</A>).
</P><P>

<DT><CODE>AM_PROG_LEX</CODE>
<DD><A NAME="IDX201"></A>
<A NAME="IDX202"></A>
<A NAME="IDX203"></A>
Этот макрос похож на макросы <CODE>AC_PROG_LEX</CODE> и <CODE>AC_DECL_YYTEXT</CODE>
(see section `Проверка отдельных программ' in <CITE>Руководство Autoconf</CITE>), но использует скрипт <CODE>missing</CODE> на системах,
в которых нет <CODE>lex</CODE>.  Одной из таких систем является <SAMP>`HP-UX
10'</SAMP>.
<P>

<DT><CODE>AM_SANITY_CHECK</CODE>
<DD>Этот макрос выполняет проверку того, что файл, созданный в каталоге для
компиляции, новее, чем файл в каталоге с исходными текстами.  На
системах с неправильно установленными часами произойдет сбой.  Этот
макрос автоматически запускается из <CODE>AM_INIT_AUTOMAKE</CODE>.
<P>

<DT><CODE>AM_SYS_POSIX_TERMIOS</CODE>
<DD><A NAME="IDX204"></A>
<A NAME="IDX205"></A>
Проверяет, доступны ли заголовочные файлы POSIX <SAMP>`termios'</SAMP> в данной
системе.  Если это так, то переменная среды
<CODE>am_cv_sys_posix_termios</CODE> устанавливается в значение <SAMP>`yes'</SAMP>.
Если нет, то значением переменной будет являться <SAMP>`no'</SAMP>.
<P>

<DT><CODE>AM_TYPE_PTRDIFF_T</CODE>
<DD><A NAME="IDX206"></A>
<A NAME="IDX207"></A>
Определяет переменную <SAMP>`HAVE_PTRDIFF_T'</SAMP> в том случае, если тип <SAMP>`ptrdiff_t'</SAMP> 
определен в <TT>`&#60;stddef.h&#62;'</TT>.
<P>

<DT><CODE>AM_WITH_DMALLOC</CODE>
<DD><A NAME="IDX208"></A>
<A NAME="IDX209"></A>
<A NAME="IDX210"></A>
Добавляет поддержку пакета
<A HREF="ftp://ftp.letters.com/src/dmalloc/dmalloc.tar.gz">dmalloc</A>
Если пользователь выполняет конфигурацию с ключом <SAMP>`--with-dmalloc'</SAMP>, то 
будет определена переменная <CODE>WITH_DMALLOC</CODE> и добавлен ключ <SAMP>`-ldmalloc'</SAMP> в 
переменную <CODE>LIBS</CODE>.
<P>

<DT><CODE>AM_WITH_REGEX</CODE>
<DD><A NAME="IDX211"></A>
<A NAME="IDX212"></A>
<A NAME="IDX213"></A>
<A NAME="IDX214"></A>
Добавляет <SAMP>`--with-regex'</SAMP> к ключам командной строки <CODE>configure</CODE>.
Если этот ключ указан (по умолчанию), то используется библиотека регулярных
выражений <SAMP>`regex'</SAMP>, файл <TT>`regex.o'</TT> помещается в <SAMP>`LIBOBJS'</SAMP> 
и определяется переменная <SAMP>`WITH_REGEX'</SAMP>. Если задан ключ <SAMP>`--without-regex'</SAMP>, 
то используется библиотека регулярных выражений <SAMP>`rx'</SAMP>, а <TT>`rx.o'</TT> 
добавляется в переменную <SAMP>`LIBOBJS'</SAMP>.
<P>

</DL>
<P>

<A NAME="Расширение aclocal"></A>
<HR SIZE="6">
<A NAME="SEC18"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC17"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_6.html#SEC19"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC13"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC13"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_6.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 5.5 Написание ваших собственных макросов aclocal </H2>
<!--docid::SEC18::-->
<P>

<A NAME="IDX215"></A>
<A NAME="IDX216"></A>
</P><P>

Программа <CODE>aclocal</CODE> сама по себе ничего не знает о каких-либо
макросах, поэтому ее очень легко расширять, создавая свои собственные
макросы.
</P><P>

Эта возможность в основном используется библиотеками, которые хотят предоставить
собственные макросы Autoconf для использования другими
программами. Например, библиотека <CODE>gettext</CODE> предоставляет макрос
<CODE>AM_GNU_GETTEXT</CODE>, который должен быть использован любым пакетом,
использующим <CODE>gettext</CODE>.  При установке библиотеки устанавливается
также этот макрос, чтобы программа <CODE>aclocal</CODE> смогла его найти.
</P><P>

Файл макросов должен быть серией вызовов <CODE>AC_DEFUN</CODE>. Программа
<CODE>aclocal</CODE> также понимает директиву <CODE>AC_REQUIRE</CODE>, так что
вполне безопасно помещать каждый макрос в отдельный
файл. See section `Hеобходимые макросы' in <CITE>Руководство Autoconf</CITE>,
и section `Макроопределения' in <CITE>Руководство Autoconf</CITE>.
</P><P>

Имя файла макросов должно оканчиваться на <TT>`.m4'</TT>. Такие файлы должны
устанавливаться в каталог <TT>`$(datadir)/aclocal'</TT>.
</P><P>

<A NAME="Верхний уровень"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_5.html#SEC13"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_6.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="automake-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
on <I>February, 19  2004</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">_uacct = "UA-78697-3"; urchinTracker(); </script></body>
</HTML>
