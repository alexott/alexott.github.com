<html><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r"><title>Использование Emacs для работы с электронной почтой и новостями Usenet</title><meta name="generator" content="DocBook XSL Stylesheets V1.67.2"><meta name="keywords" content="Gnus Emacs XEmacs"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" lang="ru"><div class="titlepage"><div><div><h1 class="title"><a name="user.network.mail-news.emacs"></a>Использование Emacs для работы с электронной почтой и новостями Usenet</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Alex</span> <span class="surname">Ott</span></h3><div class="affiliation"><div class="address"><p><br>
          <code class="email">&lt;<a href="mailto:alexott@gmail.com">alexott@gmail.com</a>&gt;</code><br>
        </p></div></div></div></div></div><hr></div><div class="toc"><p><b>Содержание</b></p><dl><dt><span class="section"><a href="#user.network.mail-news.emacs.intro">Введение</a></span></dt><dt><span class="section"><a href="#user.network.mail-news.emacs.">Пакет <span class="application">Gnus</span></a></span></dt><dd><dl><dt><span class="section"><a href="#id2451146">Буфера <span class="application">Gnus</span></a></span></dt><dt><span class="section"><a href="#id2451256">Запуск <span class="application">Gnus</span></a></span></dt><dt><span class="section"><a href="#id2451431">Работа с <span class="application">Gnus</span></a></span></dt><dt><span class="section"><a href="#id2449001">Настройка <span class="application">Gnus</span> для работы с электронной почтой</a></span></dt><dt><span class="section"><a href="#id2452084">Другие возможности <span class="application">Gnus</span></a></span></dt></dl></dd><dt><span class="section"><a href="#user.network.mail-news.emacs.rmail">Пакет <span class="application">Rmail</span></a></span></dt><dt><span class="section"><a href="#user.network.mail-news.emacs.mh-e">Пакет <span class="emphasis"><em>MH-E</em></span></a></span></dt><dt><span class="section"><a href="#user.network.mail-news.emacs.add-packages">Дополнительные пакеты</a></span></dt><dd><dl><dt><span class="section"><a href="#id2452427">Отправка почты без использования дополнительных пакетов</a></span></dt><dt><span class="section"><a href="#user.network.mail-news.emacs.sc">Пакет <span class="application">Supercite</span></a></span></dt><dt><span class="section"><a href="#user.network.mail-news.emacs.mailcrypt">Пакет <span class="application">Mailcrypt</span></a></span></dt><dt><span class="section"><a href="#user.network.mail-news.emacs.bbdb">Пакет <span class="emphasis"><em>BBDB</em></span></a></span></dt></dl></dd></dl></div><div class="section" lang="ru"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="user.network.mail-news.emacs.intro"></a>Введение</h2></div></div></div><p>В этом документе рассказывается о том, как можно использовать
    <span class="application">Emacs</span> для работы с электронной почтой и новостями Usenet. В статье
    упоминается <span class="application">GNU Emacs</span>, но практически всё сказанное справедливо и для
    <span class="application">XEmacs</span>.</p><p>Достаточно подробный список пакетов для работы с почтой вы можете
    <a href="http://www.emacswiki.org/cgi-bin/wiki.pl?GettingMail" target="_top">найти</a>
    на сервере <a href="http://www.emacswiki.org/" target="_top">EmacsWiki</a></p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="user.network.mail-news.emacs."></a>Пакет <span class="application">Gnus</span></h2></div></div></div><p><span class="application">Gnus</span> &#8212;  это пакет <span class="application">Emacs</span>, разработанный в первую очередь для чтения и отправки новостей Usenet. Его также можно использовать для чтения и написания ответов на сообщения из многих других источников &#8212;  почты, удалённых каталогов, дайджестов и других
    источников данных. Большой набор заметок о <span class="application">Gnus</span> вы сможете найти в
    <a href="http://www.emacswiki.org/cgi-bin/wiki.pl?CategoryGnus" target="_top">соответствующем разделе</a> EmacsWiki.</p><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2451146"></a>Буфера <span class="application">Gnus</span></h3></div></div></div><p>Для показа информации и получения команд
      <span class="application">Gnus</span> использует несколько разных буферов. Большую часть времени пользователи проводят в трех буферах &#8212; 
      <span class="emphasis"><em>буфере групп</em></span>, <span class="emphasis"><em>буфере резюме</em></span>
      и <span class="emphasis"><em>буфере статьи</em></span>.</p><p><span class="emphasis"><em>Буфер групп</em></span> содержит перечень групп. Это
      первый буфер, который Gnus показывает после запуска. Обычно в нем
      показаны только те группы, на которые вы подписаны, и в которых есть
      непрочитанные статьи. Используйте этот буфер для выбора конкретной
      группы.</p><p><span class="emphasis"><em>Буфер резюме</em></span> построчно перечисляет статьи
      одной группы. По умолчанию для каждой статьи показываются автор,
      заголовок и число строк, но это можно настроить по своему вкусу, как и
      большую часть того, что отображает <span class="application">Gnus</span>. Буфер
      резюме создается, когда вы выбираете группу в буфере групп, и
      уничтожается, когда вы покидаете эту группу. Используйте этот буфер
      для выбора статьи.</p><p><span class="emphasis"><em>Буфер статьи</em></span> отображает саму статью. При
      обычном использовании <span class="application">Gnus</span> вы не выбираете этот буфер &#8212;  все полезные команды, предназначенные для работы над
      статьей, прекрасно работают и из буфера резюме. Но вы можете выбрать
      буфер статьи и выполнять все команды <span class="application">Gnus</span> из него,
      если вы этого хотите. </p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2451256"></a>Запуск <span class="application">Gnus</span></h3></div></div></div><p>Для запуска <span class="application">Gnus</span> просто наберите
      <span><strong class="command"><span class="keysym">M</span>-<span class="keysym">x</span>
      gnus</strong></span>. При запуске <span class="application">Gnus</span> считывает ваш
      файл инициализации новостей <code class="filename">.newsrc</code> и пытается
      установить связь с локальным сервером новостей, который служит
      хранилищем статей. Сервер новостей не обязан быть тем же
      компьютером, на который вы вошли.</p><p>Если вы запустили <span class="application">Gnus</span> и соединились с
      сервером, но не видите в буфере групп ни одной группы, наберите
      <span class="keysym">L</span> или <span class="keysym">A</span> <span class="keysym">k</span>, чтобы
      получить список всех доступных групп. Затем нажимайте
      <span class="keysym">u</span> на нужной вам группе, чтобы переключать подписку
      на данную группу.</p><p>Когда вы запускаете <span class="application">Gnus</span> первый раз, он
      подписывает вас на несколько избранных групп. Все остальные группы
      сначала невидимы для вас; вы можете получить их список с помощью
      последовательности клавиш <span class="keysym">A</span> <span class="keysym">k</span>. Все
      новые группы, появляющиеся в дальнейшем на сервере, становятся для вас
      &#171;<span class="quote">зомбированными</span>&#187;; чтобы получить их перечень наберите 
      <span class="keysym">A</span> <span class="keysym">z</span>. Вы можете подписаться на группы, 
      показанные в этих списках, используя команду <span class="keysym">u</span>.</p><p>Когда вы покидаете <span class="application">Gnus</span> при помощи команды
      <span class="keysym">q</span>, то он автоматически записывает в ваших файлах
      инициализации <code class="filename">.newsrc</code> и
      <code class="filename">.newsrc.eld</code> статус подписки всех групп. Обычно
      вам не стоит редактировать эти файлы вручную, но вы можете это
      сделать, если точно уверены в том, что надо в них писать.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2451431"></a>Работа с <span class="application">Gnus</span></h3></div></div></div><p>Для чтения статей из конкретной группы, надо просто установить
      курсор на нужную группу и нажать на клавишу пробела. При этом будет
      открыт буфер резюме, в котором будет отображен список непрочитанных
      статей и отображена первая непрочитанная вами статья. Если
      непрочитанных статей слишком много, то <span class="application">Gnus</span> выдаст запрос о том,
      сколько статей необходимо отобразить. Переменная
      <code class="function">gnus-large-newsgroup</code> определяет пороговое
      значение, при превышении которого группа будет считаться большой и
      будет выдаваться предупреждение.</p><p>Если вам необходимо увидеть и прочитанные статьи, то для их
      выбора вам нужно использовать комбинацию <span class="keysym">C</span>-<span class="keysym">u</span> <span class="keysym">space</span>. Кроме того, 
      после префиксной комбинации вы можете указать число, которое определит 
      количество выбираемых статей. Положительное число
      <span class="emphasis"><em>N</em></span> выбирает <span class="emphasis"><em>N</em></span> самых последних статей, а отрицательное число &#8212;  <span class="emphasis"><em>N</em></span> самых
      старых статей. Например, <span class="keysym">C</span>-<span class="keysym">u</span> <span class="keysym">-</span> <span class="keysym">5</span>
      <span class="keysym">0</span> <span class="keysym">space</span> выберет 50 самых старых
      статей.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2449001"></a>Настройка <span class="application">Gnus</span> для работы с электронной почтой</h3></div></div></div><p><span class="application">Gnus</span> обрабатывает почту точно также, как и новости
      Usenet. Для того чтобы читать электронную почту в <span class="application">Gnus</span>, надо просто 
      задать метод для обработки почты и источники её	получения. Это 
      определяется с помощью следующего кода в вашем файле
      <code class="filename">~/.emacs</code> или <code class="filename">~/.gnus</code> (этот
      файл используется только для инициализации <span class="application">Gnus</span>):
      </p><pre class="programlisting">        (setq gnus-secondary-select-methods '((nnml "")))
        (setq mail-sources
        '((file :path "/var/spool/mail/user-name")
        (pop :server "pop3.mail.server"
        :user "user-name"
        :port "pop3"
        :password "secret")))
</pre><p>
      Первая строка задает список вторичных методов получения новостей для
      <span class="application">Gnus</span>. В нашем примере этот список состоит только из одного элемента &#8212; 
      <code class="function">nnml</code>, который задает метод для чтения почты. Вторая и
      последующая строки перечисляют источники получения почты. Переменная
      <code class="function">mail-sources</code> содержит список, каждый элемент которого
      является списком, в котором первый элемент указывает на тип источника почты,
      а затем идет список ключевых слов и значений для них. Список ключевых слов
      зависит от типа источника почты и полное их описание вы можете найти в
      справке по <span class="application">Gnus</span>. В нашем примере задаётся два источника почты. Первый &#8212;  это локальный файл с почтой, который задается путем
      <code class="filename">/var/spool/mail/user-name</code>, а второй источник &#8212;  это
      POP3-сервер, для которого указывается большее количество ключевых слов,
      описывающих параметры подключения к данному серверу. Будьте внимательны,
      помещая пароль для доступа к почте в ваш файл настройки
      <span class="application">Emacs</span>: если вы хотите хранить в нём ваш пароль, то
      запретите чтение этого файла для всех остальных пользователей вашей системы.
      </p><p><span class="application">Gnus</span> обладает очень богатыми возможностями
      по разбиению почты на группы. Его возможности позволяют разбить почту
      по множеству признаков. Разбиение почты на группы зависит от
      содержимого переменной <code class="function">nnmail-split-methods</code>, которая содержит список списков, состоящих из пар строк &#8212;  имени
      группы и регулярного выражения, при соответствии которому сообщение
      помещается в соответствующую группу.  Следующий код продемонстрирует
      простой пример обработки входящей почты:
      </p><pre class="programlisting">        (setq nnmail-split-methods '(
        ("ALT-sisyphus" "^\\(To\\|From\\|Cc\\):.*sisyphus@altlinux\\.ru.*")
        ("ALT-devel" "^\\(To\\|From\\|Cc\\):.*devel@altlinux\\.ru.*")
        ("inbox" "")))
</pre><p>
      В этом примере создается три группы. В первые две группы помещаются
      сообщения только из списков рассылки <span class="emphasis"><em>ALTLinux Sisyphus</em></span>
      и <span class="emphasis"><em>ALTLinux Devel</em></span>. В группу <span class="emphasis"><em>inbox</em></span>
      помещаются все остальные сообщения, для которых не было совпадения по
      регулярным выражениям.
      </p><p>Чтобы создать новое почтовое сообщение просто нажмите на клавишу
      <span class="keysym">m</span> в буфере групп или буфере резюме. При этом будет
      отображено новое окно, в котором вы можете ввести адрес получателя и
      тему сообщения, а также сам текст сообщения. Текст сообщения должен
      идти после строки

      </p><pre class="programlisting">--text follows this line--</pre><p>

      Все, что находится до этой строки, рассматривается как заголовки. Это
      позволяет вам вручную задавать дополнительные заголовки, такие как 
      <span class="emphasis"><em>Bcc</em></span>. Часть заголовков может подставляться
      автоматически. К примеру, чтобы все отправляемые сообщения складывались в
      отдельную группу, вам необходимо вписать в ваш файл инициализации следующий
      код:

      </p><pre class="programlisting">(setq gnus-outgoing-message-group "nnml:sent")</pre><p>

      После установки этой переменной, все отправляемые сообщения будут помещаться
      в группу <span class="emphasis"><em>sent</em></span>, доступ к которой осуществляется с
      помощью метода <span class="emphasis"><em>nnml</em></span>.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2452084"></a>Другие возможности <span class="application">Gnus</span></h3></div></div></div><p>В предыдущем тексте была описана лишь малая часть
      возможностей <span class="application">Gnus</span>. Кроме обычных групп для почты и новостей,
      <span class="application">Gnus</span> позволяет создавать виртуальные группы, которые состоят
      из частей других групп. Также можно отображать в виде групп
      новостей результаты поиска в Интернете, серверы каталогов и
      прочее.</p><p>Кроме того, <span class="application">Gnus</span> обладает мощными средствами по
      фильтрации и удалению ненужных вам сообщений. Работа этого
      средства основана на подсчёте весов сообщения (Scoring). Веса
      могут добавляться или удаляться в зависимости от текста и
      заголовка сообщения, его авторов и многих других параметров. Это
      позволяет эффективно работать с новостями, читая только то, что
      необходимо.</p><p><span class="application">Gnus</span> также умеет взаимодействовать с разными
      системами определения нежелательных почтовых рассылок, позволяя
      вам не отвлекаться на ненужную вам почту.</p></div></div><div class="section" lang="ru"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="user.network.mail-news.emacs.rmail"></a>Пакет <span class="application">Rmail</span></h2></div></div></div><p>Этот пакет поставляется вместе с <span class="application">GNU Emacs</span> и предназначен для
    чтения и хранения получаемой вами почты. Для запуска этого пакета
    достаточно просто набрать <span><strong class="command"><span class="keysym">M</span>-<span class="keysym">x</span> rmail</strong></span>. При этом будет прочитан
    файл с почтой <span class="application">Rmail</span> (обычно это
    <code class="filename">~/RMAIL</code>), забрана почта из ваших почтовых ящиков, и
    отображено первое непрочитанное вами сообщение.</p><p><span class="application">Emacs</span> использует сужение для того, чтобы отображать только одно
    сообщение в каждый отдельно взятый момент времени. Внутри файла
    <span class="application">Rmail</span> сообщения располагаются в порядке их
    поступления в ваши почтовые ящики. Вы также можете указать другие методы
    сортировки сообщений.</p><p>Кроме основного файла с сообщениями <span class="application">Rmail</span> вы
    можете создавать и использовать другие файлы с сообщениями. Почта
    в эти файлы может поступать из других почтовых ящиков или из своего 
    основного файла <span class="application">Rmail</span>.</p><p><span class="application">Rmail</span> предоставляет пользователю возможность
    назначения меток на конкретные почтовые сообщения, или группы
    сообщений. Обычно метки используются для классификации сообщений. Затем
    эти метки можно использовать для сортировки писем, или для перемещения
    их в другие файлы <span class="application">Rmail</span>.</p><p>Более подробную информацию о пакете <span class="application">Rmail</span>
    можно получить в документации, которая поставляется вместе с
    <span class="application">GNU Emacs</span>. Вы также можете прочитать об этом пакете в русском переводе
    руководства по <span class="application">GNU Emacs</span>.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="user.network.mail-news.emacs.mh-e"></a>Пакет <span class="emphasis"><em>MH-E</em></span></h2></div></div></div><p>Этот пакет предоставляет доступ к почтовой программе
    <span class="emphasis"><em>MH</em></span> прямо из <span class="application">Emacs</span>. Этот пакет поставляется вместе с
    <span class="application">GNU Emacs</span>, так что нет никакой необходимости устанавливать его
    самостоятельно. </p><p>Пакет поддерживает чтение и отправку электронной почты, в том
    числе и сообщений, соответствующих стандарту <span class="acronym">MIME</span>. Умеет 
    работать с каталогами, в которых вы можете хранить письма, например, 
    относящиеся к одной теме. Также поддерживается работа с письмами-дайджестами, 
    и письмами, закодированными программами <code class="filename">shar</code> и
    <code class="filename">uuencode</code>.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="user.network.mail-news.emacs.add-packages"></a>Дополнительные пакеты</h2></div></div></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2452427"></a>Отправка почты без использования дополнительных пакетов</h3></div></div></div><p><span class="application">GNU Emacs</span> умеет отправлять электронную почту без использования
      каких-либо дополнительных пакетов. Для создания сообщения используется
      команда <span><strong class="command">compose-mail</strong></span>, которая создает буфер
      <code class="filename">*mail*</code>.</p><p>Метод отправки и создания сообщения зависит от того, какое
      значение имеет переменная <span><strong class="command">mail-user-agent</strong></span>. В
      настоящее время можно отправлять почту с помощью программы Sendmail,
      пакетов Emacs <span class="emphasis"><em>MH-E</em></span>, <span class="application">Gnus</span> и
      <span class="emphasis"><em>Message</em></span>.</p><p>Для получения более подробной информации смотрите раздел
      <span class="emphasis"><em>Sending Mail</em></span> в руководстве по <span class="application">GNU Emacs</span>.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="user.network.mail-news.emacs.sc"></a>Пакет <span class="application">Supercite</span></h3></div></div></div><p>Этот пакет позволяет гибко настроить параметры цитирования чужих писем при ответе на них почтой или в группы Usenet. Пакет поддерживает все основные пакеты Emacs для работы с почтой и новостями.</p><p>Когда вы отвечаете на письмо или статью, то производится вызов
      функции <span class="application">Supercite</span> <code class="function">sc-cite-original</code>, которая
      осуществляет анализ заголовков исходного текста, запоминая их
      параметры. Затем <span class="application">Supercite</span> проходится по каждой из строк ответа и
      изменяет их в соответствии с заданными функциями
      преобразования. Оригинальное сообщение может быть отформатировано в
      соответствии с вашими предпочтениями во время работы функций
      <span class="application">Supercite</span>.</p><p>Для того чтобы любой почтовый пакет Emacs стал использовать 
      <span class="application">Supercite</span> для цитирования писем, вам необходимо вставить в файл
      инициализации <code class="filename">~/.emacs</code> следующую строку:
      </p><pre class="programlisting">        (add-hook 'mail-citation-hook 'sc-cite-original)
</pre><p>

      Но если вы используете пакет <span class="application">Gnus</span>, то вам надо добавить ещё и 
      следующую строку
      </p><pre class="programlisting">        (setq news-reply-header-hook nil)
</pre><p>
      которая предотвратит вставку одинаковых заголовков обоими пакетами. Более
      полную информацию вы сможете найти в справочных страницах Info, которые
      поставляются вместе с пакетом.
      </p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="user.network.mail-news.emacs.mailcrypt"></a>Пакет <span class="application">Mailcrypt</span></h3></div></div></div><p>Этот пакет является интерфейсом к популярной системе шифрования PGP. Он позволяет работать как с оригинальным PGP, так и с его свободным клоном &#8212;  GnuPG. Использование этих программ возможно из нескольких пакетов для работы с почтой &#8212;  <span class="application">Gnus</span>,
      <span class="emphasis"><em>VM</em></span>, <span class="application">Rmail</span>, <span class="emphasis"><em>MH-E</em></span>,
      <span class="emphasis"><em>Mew</em></span>. Среди реализованных операций &#8212; 
      шифрование и расшифровка сообщений, подпись сообщений, проверка
      электронных подписей. Данный пакет входит в состав дистрибутивов
      ALTLinux. Кроме того, его можно скачать с сайта <a href="http://mailcrypt.sourceforge.net" target="_top">http://mailcrypt.sourceforge.net</a>.</p><p>Вот как можно заставить <span class="application">Mailcrypt</span> работать
      вместе с пакетом <span class="application">Gnus</span>:
      </p><pre class="programlisting">        (load-library "mailcrypt")
        (mc-setversion "gpg")
        (autoload 'mc-install-write-mode "mailcrypt" nil t)
        (autoload 'mc-install-read-mode "mailcrypt" nil t)
        (add-hook 'mail-mode-hook 'mc-install-write-mode)
</pre><p>
      Первые пять строк одинаковы для всех пакетов работы с почтой. Первая строка
      загружает пакет <span class="application">Mailcrypt</span>. Вторая строка задает тип программы, которая будет использоваться для обработки почты (в нашем примере это gpg &#8212;  GNU-версия программы PGP). Третья и четвертая строки
      описывают, что при вызове функций <code class="function">mc-install-write-mode</code>
      и <code class="function">mc-install-read-mode</code> необходимо подгрузить их из
      библиотеки <code class="filename">mailcrypt</code>. Пятая строка устанавливает
      ловушку на запуск режима работы с почтой (<span><strong class="command">mail-mode</strong></span>).
      </p><pre class="programlisting">        (add-hook 'gnus-summary-mode-hook 'mc-install-read-mode)
        (add-hook 'message-mode-hook 'mc-install-write-mode)
        (add-hook 'news-reply-mode-hook 'mc-install-write-mode)
</pre><p>
      Эти команды являются специфическими для пакета <span class="application">Gnus</span> и
      устанавливают &#171;<span class="quote">ловушки</span>&#187; на создание списка сообщений, 
      создание сообщения и режим ответа на сообщение в Usenet.
      </p><p>В составе пакета для <span class="application">GNU Emacs</span> в дистрибутивах ALTLinux
      поставляется скрипт инициализации, в котором можно раскомментировать
      строку, соответствующую используемому вами пакету для работы с
      почтой. Полное описание пакета и примеры настройки можно найти в
      руководстве, которое поставляется вместе с пакетом.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="user.network.mail-news.emacs.bbdb"></a>Пакет <span class="emphasis"><em>BBDB</em></span></h3></div></div></div><p>Этот пакет позволяет организовать на основе Emacs базу данных
      для хранения адресов, телефонов и прочей информации. Пакет
      обеспечивает интеграцию со многими популярными пакетами чтения
      новостей usenet и почты. Существуют утилиты, которые позволяют
      экспортировать эту базу данных в формате, понятном для программ
      синхронизации с популярным PDA Palm Pilot. Данный пакет входит в
      состав дистрибутивов ALTLinux. Кроме того, пакет можно скачать с
      его собственного сайта <a href="http://bbdb.sourceforge.net" target="_top">http://bbdb.sourceforge.net</a>.</p><p>В руководстве, которое поставляется вместе с
      <span class="emphasis"><em>BBDB</em></span>, приведены примеры настройки данного пакета
      для разных пакетов работы с почтой. Следующий пример демонстрирует
      настройку пакета для работы с почтой с помощью пакета
      <span class="application">Gnus</span>:
      </p><pre class="programlisting">        (require 'bbdb)
        (bbdb-initialize 'gnus 'message)
        (add-hook 'gnus-startup-hook 'bbdb-insinuate-gnus)
        (add-hook 'message-setup-hook 'bbdb-define-all-aliases)
        (defun my-message-mode-hook () (local-set-key [(tab)] 'bbdb-complete-name))
        (setq bbdb-use-pop-up nil)
        (defun my-bbdb-tab-complete ()
        (interactive)
        (if (mail-abbrev-in-expansion-header-p)
        (bbdb-complete-name)
        (message-tab)))
        (define-key message-mode-map [tab] 'my-bbdb-tab-complete)
</pre><p>

      Этот пример можно сразу помещать в ваш файл настройки <span class="application">Emacs</span>. 
      Предварительно стоит убедиться, что у вас установлены пакеты <span class="application">Gnus</span> и 
      <span class="emphasis"><em>BBDB</em></span>.</p><p>Первая строка данного примера производит загрузку самого
      пакета. Вторая строка производит начальную настройку
      <span class="emphasis"><em>BBDB</em></span>, указывая, что пакет будет использоваться
      вместе с пакетом <span class="application">Gnus</span> (<span class="emphasis"><em>message</em></span> &#8212;  это
      специальный режим из поставки <span class="application">Gnus</span>, который используется при
      создании электронных сообщений. Третья и четвертая строки
      устанавливают ловушки для правильной инициализации пакета при запуске
      соответствующих режимов. Пятая строка устанавливает локальную привязку
      клавиши <span><strong class="keycap">Tab</strong></span> для дополнения имен из базы
      <span class="emphasis"><em>BBDB</em></span>. Шестая строка запрещает открытие отдельного
      окна для отображения информации о выбранном пользователе (слишком
      частое открытие окна может просто раздражать, поэтому и используется
      такая настройка).</p><p>Строки с седьмой по одиннадцатую определяют функцию, которая
      производит дополнение имени только в том случае, если точка находится
      в почтовом заголовке. Двенадцатая строка связывает данную функцию с
      клавишей <span><strong class="keycap">Tab</strong></span> при использовании режима редактирования
      электронного сообщения.</p></div></div></div>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
	_uacct = "UA-78697-3";
	urchinTracker();
</script>
</body></html>
