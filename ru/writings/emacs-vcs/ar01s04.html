<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Пакет PCL-CVS</title><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"><meta name="keywords" content="Emacs, GNU Emacs, XEmacs, version control, configuration management, "><link rel="start" href="index.html" title="Использование Emacs совместно с системами контроля версий"><link rel="up" href="index.html" title="Использование Emacs совместно с системами контроля версий"><link rel="prev" href="ar01s03.html" title="Пакет DVC"><link rel="next" href="ar01s05.html" title="Пакет xtla"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Пакет <span class="application">PCL-CVS</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s03.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s05.html">След.</a></td></tr></table><hr></div><div class="section" lang="ru"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="emacs.vcs.pcl-cvs"></a>Пакет <span class="application">PCL-CVS</span></h2></div></div></div><p>Пакет <span class="application">PCL-CVS</span> предоставляет пользователю эффективные средства с
  системой контроля версий <span class="application">CVS</span>, которая широко распространена в мире
  свободного программного обеспечения.  Кроме стандартных возможностей,
  которые реализованы пакетом <span class="application">VC</span>, данный пакет предоставляет следующие
  возможности:
  </p><div class="itemizedlist"><ul type="disc"><li><p>просмотр состояния файлов для выбранного проекта;</p></li><li><p>работа с изменениями для данного проекта;</p></li><li><p>работа со всеми, или выбранными объектами вашего проекта.</p></li></ul></div><p>
  </p><p>Данный пакет является частью поставки <span class="application">GNU Emacs</span> 21, и кроме
  того он доступен в виде пакета для <span class="application">XEmacs</span>.  Для других версий <span class="application">Emacs</span> вы
  можете найти исходные тексты по адресу <a class="ulink" href="ftp://flint.cs.yale.edu/pub/monnier/pcl-cvs" target="_top">ftp://flint.cs.yale.edu/pub/monnier/pcl-cvs</a>.</p><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2574602"></a>Основные понятия и принципы работы</h3></div></div></div><p>Вся работа с пакетом осуществляется в специальном буфере,
    создаваемом командами <span class="application">PCL-CVS</span>.  Этот буфер
    называется <code class="literal">*cvs*</code>, и в нем отображается состояние
    файлов, находящихся в выбранном каталоге, который содержит ваш проект.
    Пакет работает только с проектами, уже извлеченными из репозитория, так
    что вам нужно это сделать перед выполнением команд
    <span class="application">PCL-CVS</span>.</p><p>В процессе работы вы можете перемещаться по созданному буферу и выполнять разные команды с выбранными файлами, или файлами на которых находится курсор.</p><p>При работе с файлами в проекте, каждому из файлов присваивается определенный статус, и список доступных команд может зависеть от статуса файла.</p><p>Данные в буфере отображаются в несколько колонок:
    </p><div class="itemizedlist"><ul type="disc"><li><p>номер последней версии в репозитории, и кроме этого дополнительный статус файла (необязательно);</p></li><li><p>звездочка, показывающая пометку для отмеченного файла;</p></li><li><p>статус файла, расшифровка которого будет приведена ниже;</p></li><li><p>версия файла, находящегося в выбранном каталоге (необязательно);</p></li><li><p>имя файла.</p></li></ul></div><p>
    </p><p>Поле статуса может содержать следующие значения:
    </p><div class="glosslist"><dl><dt>Added</dt><dd><p>файл был добавлен, но изменения еще не были подтверждены в репозиторий;</p></dd><dt>Removed</dt><dd><p>файл был удален, но изменения еще не были подтверждены в репозиторий;</p></dd><dt>Modified</dt><dd><p>данный файл был изменен.  Для этого статуса может
        быть показан дополнительный статус <span class="emphasis"><em>merged</em></span>,
        который обозначает что были внесены изменения в репозиторий, и они
        были совмещены с вашими изменениями безо всяких
        конфликтов;</p></dd><dt>Conflict</dt><dd><p>был обнаружен конфликт между вашими изменениями в
        проекте, и изменениями в репозитории. Обе версии изменений
        записываются в файл, но при этом сохраняется оригинальный файл,
        который именуется как <code class="filename">.#FILE.VERSION</code>.
        Конфликты также могут возникать по другим причинам, которые вы
        можете узнать посмотрев на дополнительный статус данного файла.
        Дополнительный статус может иметь следующие значения:
        <span class="emphasis"><em>removed</em></span> —  вы удалили файл, но кто-то
        внес в репозиторий новую версию;
        <span class="emphasis"><em>added</em></span> —  вы добавили файл, но кто-то
        тоже добавил файл в репозиторий;
        <span class="emphasis"><em>modified</em></span> —  вы изменили файл, но
        кто-то другой удалил этот файл из репозитория.</p></dd><dt>Unknown</dt><dd><p>файл не зарегистрирован, и не входит в список игнорируемых файлов;</p></dd><dt>Up-to-date</dt><dd><p>файл соответствует версии в репозитории.  Поле
        дополнительного статуса может сообщить дополнительную информацию о
        файле: <span class="emphasis"><em>added</em></span> —  вы только что
        добавили файл в репозиторий;
        <span class="emphasis"><em>updated</em></span> —  файл был обновлен в
        соответствии с данными репозитория;
        <span class="emphasis"><em>patched</em></span> —  аналогично статусу
        <span class="emphasis"><em>updated</em></span>, но обновление происходило более
        эффективным методом, это происходит в тех случаях, если вы изменяли
        файл; <span class="emphasis"><em>commited</em></span> —  вы подтвердили
        изменения в репозиторий;</p></dd><dt>Need-Update</dt><dd><p>репозиторий содержит более свежую версию, или файл был добавлен в репозиторий и у вас его еще нет;</p></dd><dt>Need-Merge</dt><dd><p>вы внесли изменения в файл, и кто-то также внес изменения в файл в репозитории, так что необходимо совместить эти изменения;</p></dd><dt>Missing</dt><dd><p>файл был внезапно удален из вашего каталога, но для
        него не была выполнена команда <span class="command"><strong>cvs remove</strong></span>.</p></dd></dl></div><p>

    </p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2574938"></a>Основные команды и привязки клавиш</h3></div></div></div><p>Команды, предоставляемые пакетом
    <span class="application">PCL-CVS</span> имеют префикс <span class="command"><strong>cvs-</strong></span>
    и имена, аналогичные подкомандам команды <span class="application">CVS</span>.
    Для выполнения части команд необходимо наличие буфера
    <code class="literal">*cvs*</code>, который создается следующими командами
    (команды выполняются с помощью сочетания <span class="keysym">M</span>+<span class="keysym">x</span> или через меню <code class="literal">Tools</code>):
    </p><div class="glosslist"><dl><dt><code class="function">cvs-update</code></dt><dd><p>выполняет <span class="command"><strong>cvs update</strong></span> для
        указанного вами каталога;</p></dd><dt><code class="function">cvs-examine</code></dt><dd><p>выполняет команду <span class="command"><strong>cvs -n update</strong></span>,
        которая только проверяет что необходимо сделать, не внося никаких
        изменений;</p></dd><dt><code class="function">cvs-status</code></dt><dd><p>выполняет команду <span class="command"><strong>cvs status</strong></span> для
        указанного вами каталога;</p></dd><dt><code class="function">cvs-checkout</code></dt><dd><p>выполняет команду <span class="command"><strong>cvs checkout</strong></span>
        для указанного вами модуля; </p></dd><dt><code class="function">cvs-quickdir</code></dt><dd><p>создает буфер <code class="literal">*cvs*</code> считывая
        данные из файлов <code class="filename">CVS/Entries</code>.  Эта команда
        аналогична <code class="function">cvs-examine</code>, но не осуществляет
        доступа к репозиторию, что иногда очень полезно.</p></dd></dl></div><p>
    </p><p>Эти команды могут выполняться также и из буфера
    <code class="literal">*cvs*</code> —  вы можете использовать
    <span class="keysym">M</span>+<span class="keysym">u</span> для
    выполнения <code class="function">cvs-update</code>,
    <span class="keysym">M</span>+<span class="keysym">e</span> для
    <code class="function">cvs-examine</code> и <span class="keysym">M</span>+<span class="keysym">s</span> для <code class="function">cvs-status</code>. Кроме этого, вы можете использовать соответствующие команды только для выбранных файлов —  <span class="keysym">O</span>
    (<code class="function">cvs-mode-update</code>) для обновления файлов,
    <span class="keysym">e</span> (<code class="function">cvs-mode-examine</code>) для
    обновления информации о файлах и <span class="keysym">s</span>
    (<code class="function">cvs-mode-status</code>) для получения информации о
    выбранных файлах.</p><p>По умолчанию, эти команды выполняются рекурсивно, но вы
    можете изменить это поведение, используя флаг <code class="option">-l</code>
    для команд <span class="application">CVS</span>.</p><div class="section" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="id2575259"></a>Команды перемещения в буфере и пометки файлов</h4></div></div></div><p>Для перемещения по буферу <code class="literal">*cvs*</code> используются
      команды <code class="function">cvs-mode-next-line</code> (клавиша
      <span class="keysym">n</span>) —  для перемещения на следующую строку и
      <code class="function">cvs-mode-previous-line</code> (клавиша
      <span class="keysym">p</span>), которая приводит к переходу на предыдущую
      строку.</p><p>Для работы с пометками используются множество разных команд. Для
      пометки одного файла используется команда
      <code class="function">cvs-mode-mark</code> (клавиша <span class="keysym">m</span>), а для снятия пометки —  команда
      <code class="function">cvs-mode-unmark</code> (клавиша <span class="keysym">u</span>).
      Для пометки всех файлов используется клавиша <span class="keysym">M</span>
      (команда <code class="function">cvs-mode-mark-all-files</code>), а
      противоположной ей командой является
      <code class="function">cvs-mode-unmark-all-files</code>, которая привязана к
      сочетанию клавиш <span class="keysym">M</span>+<span class="keysym">&lt;DEL&gt;</span>. Вы также можете пометить файлы, имена которых подпадают под заданное регулярное выражение —  команда
      <code class="function">cvs-mode-mark-matching-files</code> (клавиша
      <span class="keysym">%</span>), или которые имеют определенный статус —  команда
      <code class="function">cvs-mode-mark-on-state</code> (клавиша
      <span class="keysym">S</span>).</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="id2575397"></a>Добавление, удаление, редактирование и обновление файлов</h4></div></div></div><p>Добавление файлов производится очень простым способом —  просто отметьте все нужные файлы (обычно они
      имеют статус <span class="emphasis"><em>Unknown</em></span>), и нажмите на клавишу
      <span class="keysym">a</span> (команда <code class="function">cvs-mode-add</code>).
      Статус файлов будет изменен на <span class="emphasis"><em>Added</em></span>, и затем вы
      должны подтвердить изменения в репозиторий (см. раздел <a class="xref" href="ar01s04.html#emacs.vcs.pcl-cvs.changes" title="Работа с изменениями">Работа с изменениями</a>).  Вы
      также можете использовать эту команду и для файлов со статусом
      <span class="emphasis"><em>Removed</em></span>, что приведет к их восстановлению.</p><p>Удаление файлов производится аналогичным образом —  вы помечаете файлы, и выполняете команду
      <code class="function">cvs-mode-remove-file</code> (клавиша
      <span class="keysym">r</span>).  При выполнении этой команды у вас будет
      запрошено подтверждение, и затем файлы будут удалены из
      каталога.  В том случае, если файлы находятся под контролем CVS,
      то для них также будет выполнена команда <span class="command"><strong>cvs remove</strong></span>.  Как и в предыдущем случае, вам также нужно
      будет подтвердить изменения в репозиторий.</p><p>Обновление файлов производится с помощью команды
      <code class="function">cvs-mode-update</code>, которая привязана к
      клавише <span class="keysym">O</span>.  Это заставляет выполнить команду
      <span class="command"><strong>cvs update</strong></span> для файлов имеющих статус
      <span class="emphasis"><em>Need-update</em></span>.</p><p>Иногда, вам требуется хранить в каталогах проекта, файлы, не
      зарегистрированные в репозитории.  Такие файлы обычно отображаются со
      статусом <span class="emphasis"><em>Unknown</em></span>, но вы можете сообщить
      <span class="application">CVS</span>, что эти файлы необходимо игнорировать
      при выполнении команд, просто перечислив их в файле
      <code class="filename">.cvsignore</code>.  Для помещения выбранного файла в
      этот файл, используется команда <code class="function">cvs-mode-ignore</code>,
      которая привязана к клавише <span class="keysym">i</span>.  Используя ее, вы
      можете быстро поместить мешающие файлы в список игнорируемых
      объектов.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="emacs.vcs.pcl-cvs.changes"></a>Работа с изменениями</h4></div></div></div><p>Для подтверждения изменений в репозиторий вам нужно лишь выбрать
      файлы, изменения для которых вы хотите подтвердить, а зачем нажать
      <span class="keysym">c</span> (<code class="function">cvs-mode-commit</code>) или
      <span class="keysym">C</span> (<code class="function">cvs-mode-commit-setup</code>).  Это
      приведет к возникновению нового буфера с именем
      <code class="literal">*cvs-commit*</code>, в котором вы можете ввести описание
      вносимых изменений.  После ввода сообщения, вам необходимо лишь нажать
      <span class="keysym">C</span>+<span class="keysym">c</span> <span class="keysym">C</span>+<span class="keysym">c</span> и изменения будут внесены в
      репозиторий.  Вы можете прервать этот процесс в любое время,
      просто не выполняя команду <span class="keysym">C</span>+<span class="keysym">c</span> <span class="keysym">C</span>+<span class="keysym">c</span>.  Разница между командами
      <span class="keysym">c</span> и <span class="keysym">C</span> заключается в том, как
      они относятся к содержимому буфера
      <code class="literal">*cvs-commit*</code>.  Первая команда сохраняет
      предыдущее содержимое буфера, в то время как вторая команда
      создает буфер заново.</p><p>Если вы изменили файл, но не хотите вносить данные
      изменения в репозиторий, то вы можете использовать команду
      <code class="function">cvs-mode-undo-local-changes</code>, которая
      привязана к клавише <span class="keysym">U</span>.  Эта команда удаляет
      файл с вашими изменениями, и получает последнюю версию из
      репозитория.</p><p>Вы можете просмотреть изменения внесенные в файл с помощью
      нескольких команд.  Наиболее часто используемой командой
      является <code class="function">cvs-mode-diff</code>, которая вызывается
      с помощью клавиши <span class="keysym">=</span> или сочетания
      <span class="keysym">d</span> <span class="keysym">=</span>.  Эта команда показывает
      между измененным файлом и его базовой версией.  Кроме этого,
      также определен набор команд, которые выполняют следующие
      действия:
      </p><div class="glosslist"><dl><dt><code class="function">cvs-mode-diff-head</code> (<span class="keysym">d</span>
          <span class="keysym">h</span>)</dt><dd><p>показывает изменения между выбранными файлами и головной (HEAD) версией соответствующего файла данной ветви разработки;</p></dd><dt><code class="function">cvs-mode-diff-repository</code>
        (<span class="keysym">d</span> <span class="keysym">r</span>)</dt><dd><p>показывает изменения между базовой и головной версиями выбранных файлов в текущей ветке разработки;</p></dd><dt><code class="function">cvs-mode-diff-backup</code> (<span class="keysym">d</span>
        <span class="keysym">b</span>)</dt><dd><p>показывает изменения между резервной версией файла и файлом. Эта команда особенно полезна в случаях возникновения конфликтов при слиянии изменений между файлами;</p></dd><dt><code class="function">cvs-mode-diff-vendor</code> (<span class="keysym">d</span>
        <span class="keysym">v</span>)</dt><dd><p>показывает изменения между выбранными файлами и головной версией в ветви производителя (vendor branch);</p></dd><dt><code class="function">cvs-mode-diff-yesterday</code> (<span class="keysym">d</span>
        <span class="keysym">y</span>)</dt><dd><p>показывает изменения между выбранными файлами и вчерашней головной версией файлов.</p></dd></dl></div><p>
      </p><p>Также, для работы с изменениями вы можете использовать утилиты
      <span class="application">Ediff</span> и <span class="application">Emerge</span>.  Команда <code class="function">cvs-mode-idiff</code>
      (привязана к сочетанию клавиш <span class="keysym">d</span> <span class="keysym">e</span>)
      запускает <span class="application">Ediff</span> или <span class="application">Emerge</span> (зависит от выбранных настроек), что
      позволяет вам интерактивно работать с изменениями.  При использовании
      команды <code class="function">cvs-mode-imerge</code> (сочетание клавиш
      <span class="keysym">d</span> <span class="keysym">E</span>) вы можете выполнить
      трехстороннее интерактивное слияние изменений, но если уже существует
      конфликт в выбранных файлах, то их содержимое не будет использоваться
      при работе, и после завершения работы, все изменения сделанные <span class="application">CVS</span>,
      будут затерты.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="id2575995"></a>Получение информации о файлах и прочие команды</h4></div></div></div><p>Для получения информации о файлах может использоваться две
      команды.  Команда <code class="function">cvs-mode-log</code> (клавиша
      <span class="keysym">l</span>) выполняет команду <span class="command"><strong>cvs log</strong></span>
      для выбранных файлов и результат отображается в буфере
      <code class="literal">*cvs-info*</code>. А команда
      <code class="function">cvs-mode-status</code> (клавиша
      <span class="keysym">s</span>) выполняет <span class="command"><strong>cvs status</strong></span> для
      выбранных файлов и результат отображается в буфере
      <code class="literal">*cvs-info*</code>.</p><p>Команда <code class="function">cvs-mode-tag</code> (клавиша
      <span class="keysym">t</span>) позволяет вам установить тег на выбранные
      файлы. По умолчанию, данная команда применяется только к
      каталогам, но это поведение зависит от настроек клиента.</p><p>Иногда вам может понадобиться, чтобы в буфере
      <code class="literal">*cvs*</code> не отображались некоторые записи. Вы можете сделать это двумя способами —  использовать
      команду <code class="function">cvs-mode-remove-handled</code> (клавиша
      <span class="keysym">x</span>), которая удаляет из буфера уже обработанные
      записи, например, файлы со статусом
      <span class="emphasis"><em>Up-to-date</em></span>, или использовать команду
      <code class="function">cvs-mode-acknowledge</code> (она привязана к
      сочетанию <span class="keysym">C</span>+<span class="keysym">k</span>), которая просто удаляет нужные
      строки.  Обработанные записи могут удаляться автоматически, в
      том случае, если переменная
      <code class="function">cvs-auto-remove-handled</code> имеет значение не
      равное <code class="literal">nil</code>.</p><p>Чтобы обновить содержимое буфера <code class="literal">*cvs*</code>,
      вы можете использовать команду
      <code class="function">cvs-mode-revert-buffer</code>, которая привязана к
      клавише <span class="keysym">g</span>.  А для выхода из буфера
      <code class="literal">*cvs*</code> используется команда
      <code class="function">cvs-mode-quit</code>, которая привязана к клавише
      <span class="keysym">q</span>.</p><p>Режим <span class="application">PCL-CVS</span> также определяет несколько дополнительных режимов —  для редактирования сообщений для журнала изменений, а
      также режим для просмотра журнала изменений.</p></div></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2576231"></a>Настройка</h3></div></div></div><p>Выполнение команд <span class="application">PCL-CVS</span> зависит от значения некоторых
    переменных, настройку которых легче всего осуществить с помощью команды
    <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span> customize-group pcl-cvs</code>.
    В эти настройки входит как настройка самих переменных, так и
    свойств начертаний, который используются для отображения
    информации в буферах данного режима.</p></div></div><script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
      _uacct = "UA-78697-3";
      urchinTracker();
    </script><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s03.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s05.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Пакет <span class="application">DVC</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> Пакет <span class="application">xtla</span></td></tr></table></div></body></html>
