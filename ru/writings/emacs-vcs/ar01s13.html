<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Поддержка Monotone</title><link rel="stylesheet" href="web.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"><meta name="keywords" content="Emacs, GNU Emacs, XEmacs, version control, configuration management, "><link rel="start" href="index.html" title="Использование Emacs совместно с системами контроля версий"><link rel="up" href="index.html" title="Использование Emacs совместно с системами контроля версий"><link rel="prev" href="ar01s12.html" title="Интеграция с Microsoft Visual SourceSafe"><link rel="next" href="ar01s14.html" title="Работа с Git"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Поддержка  <span class="application">Monotone</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s12.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s14.html">След.</a></td></tr></table><hr></div><div class="section" lang="ru"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="emacs.vcs.monotone"></a>Поддержка  <span class="application">Monotone</span></h2></div></div></div><p><span class="application">Monotone</span> —  распределённая система контроля версий по концепции схожая с
  <span class="application">GNU Arch</span> и <span class="application">Darcs</span>.  Работа с <span class="application">Monotone</span> из <span class="application">Emacs</span> обеспечивается пакетом
  <span class="application">monotone.el</span>, который идёт в составе дистрибутива <span class="application">Monotone</span>.  Также достаточно полная
  поддержка <span class="application">Monotone</span> обеспечивается специальным модулем из пакета <span class="application">DVC</span>, который описан
  в разделе <a class="xref" href="ar01s03.html" title="Пакет DVC">Пакет <span class="application">DVC</span></a></p><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2590302"></a>Установка пакета <span class="application">monotone.el</span></h3></div></div></div><p>Пакет <span class="application">monotone.el</span> идёт в поставке <span class="application">Monotone</span>.  Вы можете найти его в
    подкаталоге <code class="filename">contrib</code> дистрибутива <span class="application">Monotone</span>.  Пакет тестировался
    только с <span class="application">GNU Emacs</span> версии 22.1, но наверное будет работать и с другими версиями
    <span class="application">Emacs</span> Для работы с данным пакетом поместите его туда, где его найдёт <span class="application">Emacs</span> и
    поместите в файл инициализации следующие команды:
    
      </p><pre class="screen">(require 'monotone)
(monotone-set-vc-prefix-key "\C-xv")
(setq monotone-passwd-remember t)
</pre><p>

      первая строка загружает сам пакет, вторая строка устанавливает префикс
      для команд выполняемых с клавиатуры, а третья строка заставляет пакет
      запоминать введённые пользователем пароли.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2590389"></a>Использование пакета</h3></div></div></div><p>Доступ к командам пакета может осуществляться разными способами —  через меню, с использованием клавиатурных
    сочетаний и используя именованные команды (все команды имеют
    префикс <span class="command"><strong>monotone</strong></span>).  Префикс для клавиатурных
    сочетаний по умолчанию не определён, поэтому его нужно установить
    при инициализации пакета с помощью функции
    <code class="function">monotone-set-vc-prefix-key</code>, в моем примере
    файла инициализации она привязывается к префиксу
    <span class="keysym">C</span>+<span class="keysym">x</span> <span class="keysym">v</span>, и далее по
    тексту будет использоваться именно этот префикс.  Команды
    <span class="application">Monotone</span> выполняются в буфере с именем
    <code class="literal">*monotone*</code>.</p><p>Регистрация файла в системе контроля версий производится с помощью
    команды <span class="command"><strong>monotone-vc-register</strong></span> (сочетание клавиш
    <span class="keysym">C</span>+<span class="keysym">x</span> <span class="keysym">v</span> <span class="keysym">i</span>).  Изменения
    затем надо будет подтвердить с помощью команды
    <span class="command"><strong>monotone-vc-commit</strong></span> для вызова которой можно
    использовать как сочетание <span class="keysym">C</span>+<span class="keysym">x</span> <span class="keysym">v</span> <span class="keysym">q</span>, так и
    <span class="keysym">C</span>+<span class="keysym">x</span> <span class="keysym">v</span> <span class="keysym">C</span>+<span class="keysym">q</span>.</p><p>Работа с удалёнными серверами осуществляется с помощью трёх
    команд: команда <span class="command"><strong>monotone-pull</strong></span> (сочетание
    <span class="keysym">C</span>+<span class="keysym">x</span> <span class="keysym">v</span> <span class="keysym">p</span>) — 
    вытягивает изменения с сервера; команда <span class="command"><strong>monotone-push</strong></span>
    (сочетание <span class="keysym">C</span>+<span class="keysym">x</span> <span class="keysym">v</span> <span class="keysym">P</span>) — 
    помещает изменения на сервер; а команда
    <span class="command"><strong>monotone-sync</strong></span> —  синхронизирует текущую базу
    данных с сервером.</p><p>Пользователь может получить список сделанных изменений с
    помощью команды <span class="command"><strong>monotone-vc-diff</strong></span>, которая
    привязана к <span class="keysym">C</span>+<span class="keysym">x</span> <span class="keysym">v</span> <span class="keysym">=</span>.  Если
    этой команде передать аргумент, то просмотр изменений будет сделан
    для всего проекта.</p><p>Получить информацию о зарегистрированных объектах можно с
    помощью нескольких команд.  В первую очередь это команда
    <span class="command"><strong>monotone-vc-status</strong></span> (сочетание клавиш
    <span class="keysym">C</span>+<span class="keysym">x</span> <span class="keysym">v</span> <span class="keysym">s</span>),
    которая выдаёт информацию о текущей ветке проекта.  С помощью
    команды <span class="command"><strong>monotone-vc-print-log</strong></span> (сочетание
    <span class="keysym">C</span>+<span class="keysym">x</span> <span class="keysym">v</span> <span class="keysym">l</span>) можно
    получить лог для текущего буфера (а при задании аргумента для этой
    команды, можно получить лог для всего проекта).  А получить
    идентификатор текущего объекта можно с помощью команды
    <span class="command"><strong>monotone-grab-id</strong></span> (сочетание клавиш
    <span class="keysym">C</span>+<span class="keysym">x</span> <span class="keysym">v</span> <span class="keysym">6</span>) — 
    данная команда сохраняет идентификатор объекта в буфере удаления
    (kill buffer), откуда вы её может вставить с помощью стандартных
    команд.</p><p>В пакете определена одна команда общего назначения — 
    <code class="function">monotone</code> (она привязана к сочетанию клавиш
    <span class="keysym">C</span>+<span class="keysym">x</span> <span class="keysym">v</span> <span class="keysym">x</span>)
    <sup>[<a name="id2590787" href="#ftn.id2590787" class="footnote">5</a>]</sup>, которая позволяет выполнить любую команду
    <span class="application">Monotone</span> введённую в мини-буфере.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2590804"></a>Настройка пакета</h3></div></div></div><p>Настройка пакета осуществляется путём установки некоторого
    количества переменных.  Одну из переменных вы уже видели, это переменная
    <code class="varname">monotone-passwd-remember</code>, которая заставляет пакет
    запоминать введённые пользователем пароли.  В том случае, если эта
    переменная установлена, пароли будут сохраняться в переменной
    <code class="varname">monotone-passwd-alist</code>.  Кроме этого, используя
    переменную <code class="varname">monotone-program</code>вы можете указать имя
    исполняемого файла <span class="application">Monotone</span>. </p><p>Адреса удалённого сервера и коллекций на нем задаются
    переменными <code class="varname">monotone-server</code> и
    <code class="varname">monotone-collection</code>.  Список уже использованных
    серверов и коллекций хранится в соответствующих переменных:
    <code class="varname">monotone-server-hist</code> и
    <code class="varname">monotone-collection-hist</code>.</p><p>Кроме перечисленных выше переменных, существуют и другие
    переменные, изменять которые пользователь скорее всего не будет,
    но знать которые желательно.  Истинное значение переменной
    <code class="varname">monotone-cmd-show</code> приводит к показу результатов
    выполнения команд <span class="application">Monotone</span>.  С помощью переменной
    <code class="varname">monotone-program-args-always</code> можно задать
    аргументы командной строки, которые всегда будут передаваться при
    запуске <span class="application">Monotone</span>.  Если значение переменной
    <code class="varname">monotone-msg</code> не равно <code class="literal">nil</code>,
    то в буфер <code class="literal">*Messages*</code> будут выводиться
    сообщения пакета <span class="application">monotone.el</span>, что может быть полезным при
    отладке.</p><p>Тонкую настройку работы пакета можно осуществить, используя два хука —  <code class="varname">monotone-output-mode-hook</code> и
    <code class="varname">monotone-commit-mode-hook</code>. Первый хук будет вызываться при выводе данных, а второй —  при входе в режим
    редактирования сообщений при подтверждении данных в
    репозиторий.</p></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.id2590787" href="#id2590787" class="para">5</a>] </sup>Помните, что префикс вы можете задать сами!</p></div></div></div><script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
      _uacct = "UA-78697-3";
      urchinTracker();
    </script><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s12.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s14.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Интеграция с Microsoft <span class="application">Visual SourceSafe</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> Работа с  <span class="application">Git</span></td></tr></table></div></body></html>
