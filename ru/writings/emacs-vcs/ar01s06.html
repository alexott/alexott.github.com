<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Пакет PSVN</title><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"><meta name="keywords" content="Emacs, GNU Emacs, XEmacs, version control, configuration management, "><link rel="start" href="index.html" title="Использование Emacs совместно с системами контроля версий"><link rel="up" href="index.html" title="Использование Emacs совместно с системами контроля версий"><link rel="prev" href="ar01s05.html" title="Пакет xtla"><link rel="next" href="ar01s07.html" title="Работа с Darcs"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Пакет <span class="application">PSVN</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s05.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s07.html">След.</a></td></tr></table><hr></div><div class="section" lang="ru"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="emacs.vcs.psvn"></a>Пакет <span class="application">PSVN</span></h2></div></div></div><p>Пакет <span class="application">PSVN</span> является для <span class="application">Subversion</span> тем же, что и <span class="application">PCL-CVS</span> для
  <span class="application">CVS</span>.  Пакет дает пользователю доступ ко всем основным возможностям,
  предоставляемым системой <span class="application">Subversion</span>.</p><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2580263"></a>Установка пакета</h3></div></div></div><p>Установка пакета проста —  загрузите с <a class="ulink" href="http://www.xsteve.at/prg/emacs/psvn.el" target="_top">сайта</a> последнюю
    версию пакета, поместите его в доступный для <span class="application">Emacs</span> каталог, и
    поместите в файл инициализации следующую команду:
    
    </p><pre class="screen">(require 'psvn)
</pre><p>
    </p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2580300"></a>Работа с пакетом</h3></div></div></div><p>Работа с пакетом по принципам, совершенно аналогична работе с
    пакетом <span class="application">PCL-CVS</span> —  вся работа производится в буфере, создаваемом командами пакета. В настоящее время этот буфер создается лишь одной командой —  <code class="function">svn-status</code>, реализация других
    команд, производится в настоящее время.  Буфер, создаваемый в процессе
    работы данной команды, называется <code class="literal">*svn-status*</code>.
    Пример буфера, создаваемого командой <code class="function">svn-status</code>, вы
    можете увидеть на рисунке <a class="xref" href="ar01s06.html#emacs.vcs.psvn.window" title="Рисунок 3. Окно буфера *svn-status*">Окно буфера *svn-status*</a>.  Команды, выполняемые пользователем
    применяются либо к текущему файлу, либо к помеченным файлам.</p><p>
      </p><div class="figure-float" style="float: left;"><div class="figure"><a name="emacs.vcs.psvn.window"></a><p class="title"><b>Рисунок 3. Окно буфера *svn-status*</b></p><div class="figure-contents"><div class="screenshot"><div class="mediaobject"><img src="svn-status.png" alt="Окно буфера *svn-status*"></div></div></div></div><br class="figure-break"></div><p>
    </p><p>Как вы можете видеть на рисунке, информация выдается в виде таблицы. В первой колонке отображается статус объекта, во второй колонке —  рабочей версия данного объекта, в третьей —  номер версии в которой вносились последние изменения, а в четвертой —  имя пользователя, который вносил эти изменения, и в последней —  имя
    объекта.  Расшифровку статусов вы можете найти в описании команды
    <span class="command"><strong>svn status -v</strong></span>.</p><p>Пользователь может выполнять команды, используя предопределенные
    привязки клавиш, либо может использовать меню <code class="literal">SVN</code>,
    появляющееся при работе с буфером
    <code class="literal">*svn-status*</code>.</p><div class="section" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="id2580460"></a>Навигация и работа с пометками</h4></div></div></div><p>Команды навигации по буферу <code class="literal">*svn-status*</code> аналогичны командам других пакетов для работы с системами контроля версий —  вы можете использовать либо клавишу управления курсором,
      либо команду <code class="function">svn-status-previous-line</code> (привязана
      к клавише <span class="keysym">C</span>+<span class="keysym">p</span>)
      для перемещения на предыдущую строку, и команду
      <code class="function">svn-status-next-line</code> (привязана к клавише
      <span class="keysym">C</span>+<span class="keysym">n</span>) для перехода на следующую строку.  Эти
      привязки несколько отличаются от других режимов, которые для аналогичных
      команд используют клавиши <span class="keysym">n</span> и <span class="keysym">p</span>.</p><p>Для установки пометок на файлы <span class="application">PSVN</span> использует те же самые клавиши, что и остальные режимы —  для
      пометки объекта используется клавиша <span class="keysym">m</span> (команда
      <code class="function">svn-status-set-user-mark</code>), а для снятия пометки —  клавиша <span class="keysym">u</span> (команда
      <code class="function">svn-status-unset-user-mark</code>).  Кроме этого для
      снятия всех установленных пометок используется команда
      <code class="function">svn-status-unset-all-usermarks</code> (сочетания клавиш
      <span class="keysym">M</span>+<span class="keysym">DEL</span> или
      <span class="keysym">*</span> <span class="keysym">!</span>), а для снятия пометки с файла,
      находящегося перед курсором, может использоваться команда
      <code class="function">svn-status-unset-user-mark-backwards</code>, привязанная
      к клавише <span class="keysym">DEL</span>.</p><p>Также определены команды для пометки файлов с разным статусом.
      Так, для пометки измененных файлов может использоваться команда
      <code class="function">svn-status-mark-modified</code> (сочетание клавиш
      <span class="keysym">*</span> <span class="keysym">M</span>), для пометки добавленных файлов
      команда <code class="function">svn-status-mark-added</code> (сочетание клавиш
      <span class="keysym">*</span> <span class="keysym">A</span>), а для пометки файлов не
      находящихся под контролем <span class="application">Subversion</span>,
      команда <code class="function">svn-status-mark-unknown</code> (сочетание клавиш
      <span class="keysym">*</span> <span class="keysym">?</span>).</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="id2580680"></a>Добавление, удаление и обновление файлов</h4></div></div></div><p>Добавление файлов в репозиторий можно производить с помощью
      нескольких команд.  Базовой командой является
      <code class="function">svn-status-add-file</code> (она привязана к клавише
      <span class="keysym">a</span>), которая добавляет текущий файл в репозиторий (или
      выбранные файлы).  В качестве дополнения к ней, пакет
      <span class="application">PSVN</span> определяет команду
      <code class="function">svn-status-add-file-recursively</code> (клавиша
      <span class="keysym">A</span>), которая рекурсивно добавляет файлы в репозиторий
      и команду <code class="function">svn-status-make-directory</code> (клавиша
      <span class="keysym">+</span>), которая создает новый каталог в репозитории.  Не
      забудьте, что удаление файлов производится только в вашей рабочей
      копии репозитория, так что изменения будут внесены только после явного
      подтверждения.</p><p>Удаление файлов производится командой
      <code class="function">svn-status-rm</code> (клавиша <span class="keysym">D</span> или
      сочетание <span class="keysym">C</span>+<span class="keysym">d</span>), что запускает команду <span class="command"><strong>svn rm</strong></span>.  Поскольку <span class="application">Subversion</span> поддерживает
      явное переименование файлов с сохранением истории файла, то и пакет
      <span class="application">PSVN</span> имеет в своем арсенале соответствующую
      команду <code class="function">svn-status-mv</code>, которая привязана к клавише
      <span class="keysym">R</span>.  Как и в предыдущем случае, вам после выполнения данных
      команд необходимо подтвердить внесенные изменения.</p><p>Вы можете выполнить обновление вашего рабочего каталога из
      репозитория, что часто бывает удобно при одновременной работе
      нескольких разработчиков над одним проектов.  Обновление производится
      с помощью команды <code class="function">svn-status-update-cmd</code> (клавиша
      <span class="keysym">U</span>), которая запускает команду <span class="command"><strong>svn update</strong></span>.  Кроме этого, вы можете вытянуть нужную версию файла
      с помощью команды
      <code class="function">svn-status-get-specific-revision</code> (клавиша
      <span class="keysym">~</span>).  При работе этой команды создается файл
      <code class="filename">F.~REVISION~</code>, который и содержит нужную версию
      файла.  А также вы можете просмотреть состояние и родительского
      каталога, с помощью команды
      <code class="function">svn-status-examine-parent</code>, которая привязана к
      клавише <span class="keysym">^</span>.</p><p>Вы можете просматривать и редактировать файлы непосредственно из
      буфера <code class="literal">*svn-status*</code>.  Это возможно с помощью команд
      <code class="function">svn-status-find-files</code> (клавиша
      <span class="keysym">f</span>), которая открывает файл непосредственно в том же
      окне, которое и содержит буфер <code class="literal">*svn-status*</code>.  Для
      открытия файла в другом окне может использоваться команда
      <code class="function">svn-status-find-file-other-window</code> (клавиша
      <span class="keysym">o</span>), вы можете просматривать, а не редактировать файл
      с помощью команды
      <code class="function">svn-status-view-file-other-window</code> (клавиша
      <span class="keysym">v</span>), что бывает очень полезно, если вы хотите лишь
      посмотреть на файл, не редактируя его.  Клавиша <span class="keysym">RET</span>
      (команда
      <code class="function">svn-status-find-file-or-examine-directory</code>) играет двоякую роль —  она либо открывает файл, либо отображает состояние
      файлов в соответствующем каталоге.</p><p>Хочу заметить, что в настоящее время
      <span class="application">PSVN</span> не поддерживает команды импорта данных
      в архив, и получения данных из репозитория.  Но работа над поддержкой
      этих функций ведется, и может быть они будут реализованы в будущих
      версиях.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="id2581016"></a>Работа с изменениями</h4></div></div></div><p>Как уже упоминалось выше, вы должны подтвердить изменения в
      репозиторий.  Подтверждение выполняется с помощью команды
      <code class="function">svn-status-commit-file</code> (клавиша
      <span class="keysym">c</span>).  После подтверждения, ваши изменения будут видны
      всем людям, работающим с репозиторием.</p><p>Кроме подтверждения изменений, иногда необходимо отменить
      внесенные изменения.  Для этого используется команда
      <code class="function">svn-status-revert</code>, которая привязана к клавише
      <span class="keysym">r</span>.  <span class="application">Subversion</span>
      поддерживает возможность явного удаления статуса наличия конфликтов с
      файлов, которые имеют такой статус.  Для удаления статуса конфликта
      <span class="application">PSVN</span> предоставляет команду
      <code class="function">svn-status-resolved</code> (клавиша <span class="keysym">V</span>),
      которая запускает команду <span class="command"><strong>svn resolved</strong></span>.</p><p>Также как и другие пакеты для работы с системами контроля
      версий, <span class="application">PSVN</span> предоставляет возможность
      получения списка изменений для выбранных файлов по сравнению с базовой
      версией.  Для этого определено несколько команд.  Команда
      <code class="function">svn-status-show-svn-diff</code> (клавиша
      <span class="keysym">=</span>), выполняет сравнение с головной версией в
      репозитории (если она новее чем базовая) или с базовой версией
      текущего файла.  Команда
      <code class="function">svn-status-show-svn-diff-for-marked-files</code>
      (сочетание <span class="keysym">C</span>+<span class="keysym">=</span>)
      может выполнить сравнение сразу нескольких выбранных файлов с их
      базовыми версиями.  А команда
      <code class="function">svn-status-ediff-with-revision</code> (клавиша
      <span class="keysym">E</span>) использует для сравнения пакет
      <span class="application">Ediff</span>.  Все эти команды могут выполнять
      сравнение с произвольной версией, если им будет задан префиксный
      аргумент перед их выполнением.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="id2581196"></a>Работа с метаданными (properties)</h4></div></div></div><p>Система контроля версий <span class="application">Subversion</span> позволяет пользователю
      привязывать различные метаданные к файлам и версиям.  Кроме этого,
      существуют метаданные, не привязанные к конкретной версии.  Изменения
      в метаданных распространяются вместе с изменениями, внесенными в
      обычные файлы.  Подробнее о метаданных и работе с ними вы можете
      прочитать в книге "Version Control with Subversion", которая доступна
      на сайте данной системы.</p><p>Пакет <span class="application">PSVN</span> предоставляет набор команд
      для работы с метаданными.  Эти команды доступны как обычным способом,
      так и через привязки к клавишам. В качестве префиксной клавиши
      используется клавиша <span class="keysym">P</span>.</p><p>Доступные команды можно разделить на две группы —  первая группа используется для работы с произвольными метаданными, а вторая группа — для работы с конкретными записями.</p><p>К первой группе относятся команды:
      <code class="function">svn-status-property-parse</code> (сочетание
      <span class="keysym">P</span> <span class="keysym">p</span>) используется для разбора
      записи, <code class="function">svn-status-property-set</code> (сочетание
      <span class="keysym">P</span> <span class="keysym">s</span>) задает значение для конкретной
      записи, <code class="function">svn-status-property-delete</code> (сочетание
      <span class="keysym">P</span> <span class="keysym">d</span>) удаляет выбранную запись,
      <code class="function">svn-status-property-list</code> (сочетание
      <span class="keysym">P</span> <span class="keysym">l</span>) отображает список определенных
      для данного объекта записей,
      <code class="function">svn-status-property-edit-one-entry</code> (сочетание
      <span class="keysym">P</span> <span class="keysym">e</span>) позволяет изменить
      запись.</p><p>Во вторую группу входят следующие команды:
      <code class="function">svn-status-property-edit-svn-ignore</code> (сочетание
      <span class="keysym">P</span> <span class="keysym">TAB</span>) позволяет вам отредактировать
      список файлов, которые не будут учитываться при <span class="application">Subversion</span>,
      <code class="function">svn-status-property-ignore-file</code> (сочетание
      <span class="keysym">P</span> <span class="keysym">i</span>) вносит текущий файл в список
      игнорируемых объектов,
      <code class="function">svn-status-property-ignore-file-extension</code>
      (сочетание <span class="keysym">P</span> <span class="keysym">I</span>) позволяет пополнить
      список игнорируемых объектов шаблоном для выборки всех файлов с
      расширением как у текущего,
      <code class="function">svn-status-property-set-eol-style</code> (сочетание
      <span class="keysym">P</span> <span class="keysym">y</span>) позволяет задать какой стиль
      обозначения перевода строк используется для данного объекта,
      <code class="function">svn-status-property-set-keyword-list</code> (сочетание
      <span class="keysym">P</span> <span class="keysym">y</span>) позволяет отредактировать
      список ключевых слов связанных с данным объектом.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="id2581467"></a>Получение информации и прочие команды</h4></div></div></div><p>Для получения информации о текущем файле может использоваться
      команда <code class="function">svn-status-info</code>, которая привязана к
      клавише <span class="keysym">i</span>.  При ее использовании, в буфере
      <code class="literal">*svn-process*</code> будет отображен результат выполнения
      команды <span class="command"><strong>svn info</strong></span>.  Информация может показаться
      слишком подробной, и для ее обработки может быть использована команда
      <code class="function">svn-status-parse-info</code> (клавиша
      <span class="keysym">I</span>), которая разбирает результат предыдущей команды, и
      приводит его к более компактному виду.  Для получения информации об
      авторе и версии для указанного файла, может использоваться команда
      <code class="function">svn-status-blame</code> (клавиша <span class="keysym">b</span>), а
      для просмотра логов для выбранных файлов, используется команда
      <code class="function">svn-status-show-svn-log</code> (клавиша
      <span class="keysym">l</span>).</p><p>Обновить содержимое буфера <code class="literal">*svn-status*</code> вы
      можете с помощью команды <code class="function">svn-status-update</code>
      (клавиша <span class="keysym">g</span>), а посмотреть на вывод команды
      <span class="command"><strong>svn</strong></span> вы можете использовав клавишу
      <span class="keysym">s</span> (команда
      <code class="function">svn-status-show-process-buffer</code>).  Вы также можете
      управлять тем, объекты с каким статусом будут отображаться в буфере
      <code class="literal">*svn-status*</code>.  Для скрытия не изменявшихся файлов
      используется команда
      <code class="function">svn-status-toggle-hide-unmodified</code> (клавиша
      <span class="keysym">_</span>), а для скрытия незарегистрированных файлов — 
      команда <code class="function">svn-status-toggle-hide-unknown</code> (клавиша
      <span class="keysym">?</span>).  Обе эти команды являются переключателями, и
      могут использоваться как для отключения показа файлов, так и для
      включения показа.</p><p>Для выхода из буфера <code class="literal">*svn-status*</code> и его
      удаления используется команда
      <code class="function">svn-status-bury-buffer</code>, которая привязана к
      клавише <span class="keysym">q</span>, также как и в других пакетах.</p></div></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2581678"></a>Настройка</h3></div></div></div><p>Стандартные средства <span class="application">Emacs</span> позволяют пользователю настроить
    только параметры начертаний, которые используются для отображения данных
    в буфере.  Остальные настройки нужно задавать с помощью команд Emacs
    Lisp.  Но большая часть этих настроек имеет нормальные значения по
    умолчанию, так что вам скорее всего не понадобиться изменять эти
    значения.</p><p><span class="application">PSVN</span> также предоставляет несколько хуков, которые могут
    использоваться для задания параметров создаваемых буферов, или
    выполнения дополнительных команд.  Хук
    <code class="function">svn-log-edit-mode-hook</code> выполняется когда пакет
    входит в режим <code class="function">svn-log-edit</code>, а
    <code class="function">svn-log-view-mode-hook</code> выполняется при вхождении в
    режим <code class="function">svn-log-view</code>.</p></div></div><script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
      _uacct = "UA-78697-3";
      urchinTracker();
    </script><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s05.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s07.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Пакет <span class="application">xtla</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> Работа с  <span class="application">Darcs</span></td></tr></table></div></body></html>
