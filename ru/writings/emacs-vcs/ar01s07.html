<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Работа с Darcs</title><link rel="stylesheet" href="web.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"><meta name="keywords" content="Emacs, GNU Emacs, XEmacs, version control, configuration management, "><link rel="start" href="index.html" title="Использование Emacs совместно с системами контроля версий"><link rel="up" href="index.html" title="Использование Emacs совместно с системами контроля версий"><link rel="prev" href="ar01s06.html" title="Пакет PSVN"><link rel="next" href="ar01s08.html" title="Поддержка BitKeeper"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Работа с  <span class="application">Darcs</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s06.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s08.html">След.</a></td></tr></table><hr></div><div class="section" lang="ru"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="emacs.vcs.darcs"></a>Работа с  <span class="application">Darcs</span></h2></div></div></div><p>Работа с системой контроля версий <span class="application">Darcs</span> обеспечивается несколькими пакетами,
  которые несколько отличаются друг от друга по функциональности.  Это пакет
  <span class="application">darcs</span>, доступный с ??? и пакет <span class="application">darcsum</span>, который вы можете
  загрузить со <a class="ulink" href="http://www.newartisans.com/johnw/Emacs/darcsum.el" target="_top">страницы автора</a>.  Кроме этого, существует модуль поддержки <span class="application">Darcs</span> для пакета <span class="application">VC</span>, о
  котором вы можете прочитать в разделе <a class="xref" href="ar01s02.html" title="Пакет VC">Пакет <span class="application">VC</span></a>.  Также начата разработка модуля для пакета <span class="application">DVC</span>,
  который описан в разделе <a class="xref" href="ar01s03.html" title="Пакет DVC">Пакет <span class="application">DVC</span></a>.</p><p>Пакет <span class="application">darcsum</span> имеет больше возможностей чем пакет
  <span class="application">darcs</span>, и поэтому в дальнейшем наш рассказ будет вестись о
  нем.  Пакет предоставляет пользователю для работы интерфейс, во многом сходный с уже
  привычным интерфейсом пакета <span class="application">PCL-CVS</span>.  Имеются только некоторые отличия, обусловленные
  самой архитектурой системы <span class="application">Darcs</span>.</p><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2584130"></a>Установка пакета</h3></div></div></div><p>Установка пакета не отличается от установки других пакетов для
    <span class="application">Emacs</span> —  вам лишь необходимо загрузить с
    <a class="ulink" href="http://www.newartisans.com/johnw/emacs.html" target="_top">сайта</a>
    последнюю версию пакета, поместить ее туда, где ее найдет
    <span class="application">Emacs</span>, и прописать загрузку пакета в вашем
    файле инициализации, например, с помощью такой вот команды:

    (require 'darcsum)
    </p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2584172"></a>Использование пакета <span class="application">darcsum</span></h3></div></div></div><p>Вся работа с пакетом происходит в буфере
    <code class="literal">*darcs*</code>, который создается командой
    <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
    darcsum-whatsnew</code>.  Пример окна создаваемого этой командой вы
    можете видеть на рисунке <a class="xref" href="ar01s07.html#emacs.vcs.darcs.window" title="Рисунок 4. Буфер Darcsum">Буфер Darcsum</a>.  Многие команды, доступные в данном
    буфере, совпадают по действию с командами пакета <span class="application">PCL-CVS</span>.  Команды
    могут выполняться над текущими изменениями, или над отмеченными.
    Пометка и ее снятие производится с помощью клавиши <span class="keysym">m</span>,
    которая выполняет команду <code class="function">darcsum-toggle-mark</code>.
    Перемещение между файлами и изменениями в буфере производится с помощью
    команд <code class="function">darcsum-next-line</code>
    (клавиша <span class="keysym">n</span>),
    и <code class="function">darcsum-previous-line</code>
    (клавиша <span class="keysym">p</span>), или с помощью клавиш управления
    курсором.</p><p>
      </p><div class="figure-float" style="float: left;"><div class="figure"><a name="emacs.vcs.darcs.window"></a><p class="title"><b>Рисунок 4. Буфер Darcsum</b></p><div class="figure-contents"><div class="screenshot"><div class="mediaobject"><img src="darcs.png" alt="Буфер Darcsum"></div></div></div></div><br class="figure-break"></div><p>
    </p><p>Работа с изменениями производится по следующему сценарию: после
    получения списка измененных файлов, вам нужно отобразить конкретные
    изменения внесенные в файлы, выбрать нужные изменения, и затем выполнять
    над ними необходимые команды.  Отображение изменений внесенных в файл
    производится с помощью команды <code class="function">darcsum-toggle</code>,
    которая привязана к клавише <span class="keysym">RET</span>.</p><p>Выбранные изменения могут быть сохранены с помощью команды
    <code class="function">darcsum-record</code> (клавиши <span class="keysym">c</span> или
    <span class="keysym">R</span>), после выполнения которой появится буфер в котором
    пользователь может ввести имя для данного изменения (первая строка
    буфера) и длинное описание данного изменения (следующие за первой
    строки).  После ввода описания, с помощью сочетания клавиш
    <span class="keysym">C</span>+<span class="keysym">c</span>
    <span class="keysym">C</span>+<span class="keysym">c</span>, изменения
    будут сохранены.</p><p>Изменения могут быть удалены из буфера <code class="literal">*darcs*</code>
    с помощью команды <code class="function">darcsum-remove</code> (клавиша
    <span class="keysym">r</span>), или перемещены в другой буфер darcsum, с помощью
    команды <code class="function">darcsum-move</code> (клавиша <span class="keysym">M</span>).
    Откат к предыдущей версии данных производится с помощью команды
    <code class="function">darcsum-revert</code>, которая привязана к клавише
    <span class="keysym">U</span>.</p><p>Для более удобного просмотра изменений, пакет <span class="application">darcsum</span> определяет
    набор команд, которые позволяют просмотреть результат выполнения команды
      <span class="command"><strong>diff</strong></span> (или ее аналогов) — 
    команда <code class="function">darcsum-diff</code> (клавиша <span class="keysym">=</span>),
    просмотреть изменения с помощью пакета <span class="application">Ediff</span> —  команда
    <code class="function">darcsum-ediff</code> (клавиша <span class="keysym">e</span>), или
    даже выполнить трехстороннее слияние изменений с помощью команды
    <code class="function">darcsum-ediff-merge</code> (клавиша
    <span class="keysym">E</span>).</p><p>Чтобы обновить содержимое буфера, используется команда
    <code class="function">darcsum-redo</code>, которая заново выполняет команду
    `darcs whatsnew'.  Для окончания работы с изменениями, используется
    команда <code class="function">darcsum-quit</code>, которая привязана к клавише
    <span class="keysym">q</span>.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2584531"></a>Настройка</h3></div></div></div><p>Настройка пакета производится с помощью стандартных возможностей
    <span class="application">Emacs</span>.  Просто выполните
    команду <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
    customize-group darcsum</code>, и перед вами появится окно
    настройки.  Вы можете задать имя для исполняемого файла
    <span class="command"><strong>darcs</strong></span>, а также изменить начертания шрифтов, которыми
    отображаются данные в буфере <code class="literal">*darcs*</code>.</p><p>Кроме настройки переменных и параметров начертаний, пакет
    предоставляет хук <code class="function">darcsum-mode-hook</code>, в который вы
    можете поместить нужные вам команды, которые будут выполнены после
    выполнения хуков для режима <code class="function">text</code>, от которого
    унаследован <code class="function">darcsum-mode</code>.</p></div></div><script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
      _uacct = "UA-78697-3";
      urchinTracker();
    </script><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s06.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s08.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Пакет <span class="application">PSVN</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> Поддержка  <span class="application">BitKeeper</span></td></tr></table></div></body></html>
