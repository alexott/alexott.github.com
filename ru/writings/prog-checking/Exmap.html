<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>Работа с exmap</title>
    <meta name="generator" content="muse.el">
    <meta name="author" content="Alex Ott">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="keywords" content="bugs finding, exmap, article, поиск ошибок, memory leaks, утечки памяти, linux">
    
    <link rel="stylesheet" type="text/css" charset="utf-8" media="screen,projection" href="web.css">
    <link rel="stylesheet" type="text/css" href="print.css" media="print">
  </head>
  <body>
    <div id="wrap">
    <h1>Работа с exmap</h1>
    <!-- Page published by Emacs Muse begins here -->
<div class="contents">
<dl>
<dt>
<a href="#sec1">Установка</a>
</dt>
<dt>
<a href="#sec2">gexmap</a>
</dt>
<dt>
<a href="#sec3">exmap-console</a>
</dt>
</dl>
</div>


<p><a href="http://www.berthels.co.uk/exmap">Exmap</a> &mdash; это утилита, которая позволяет провести анализ реального использования
оперативной памяти запущенными процессами.  Для получения этой информации используется
модуль для ядра Linux, информация из которого может быть получена пользовательской
программой.</p>

<p>Для файлов с отладочной информацией, можно получать информацию детализированную на уровне
отдельных объектов программы (symbol-level), а для остальных программ информация
детализируется на уровне секций (section-level).</p>

<p>Для анализа собранных данных существует несколько программ.  В поставку <code>exmap</code> входит
программа <code>gexmap</code>, которая использует графический интерфейс пользователя для отображения
информации.  Кроме того, существует программа <code>exmap-console</code>, которая позволяет получать
информацию от модуля ядра, используя командно-строковые утилиты.</p>

<h2><a name="sec1" id="sec1"></a>
Установка</h2>

<p class="first">В некоторых дистрибутивах Linux, этот пакет можно установить из репозитория, а для
остальных пользователей надо лишь скачать исходные тексты с сайта <a href="http://www.berthels.co.uk/exmap">exmap</a>, распаковать их и
выполнить пару команд:</p>

<dl>
<dt><strong><code>make</code></strong></dt>
<dd>для сборки модуля ядра и и программы <code>gexmap</code></dd>
<dt><strong><code>sudo insmod kernel/exmap.ko</code></strong></dt>
<dd>для загрузки модуля в ядро</dd>
</dl>

<p>После выполнения этих команд, пользователь может начать использовать программы-анализаторы
для получения информации о запущенных процессах.</p>


<h2><a name="sec2" id="sec2"></a>
gexmap</h2>

<p class="first">В поставку <code>exmap</code> входит графическая утилита <code>gexmap</code>, которая используется для графического
представления данных, собранных модулем ядра.  Пример использования этой программы вы
можете увидеть на скриншоте.</p>

<p class="image"><img src="exmap.png" alt=""></p>


<p>Как видно на рисунке, информация разбивается на несколько частей:</p>

<ul>
<li>в первом окне отображается сколько памяти использует то или иное приложение</li>
<li>во втором окне можно просмотреть информацию об использовании памяти тем или иным
компонентом выбранной программы &mdash; выделение областей памяти на &quot;куче&quot; (heap),
информация по использованию памяти динамическими библиотеками и т.д.</li>
<li>третье окно представляет информацию о выбранном компоненте с разбивкой по секциям файла
в формате <code>ELF</code></li>
<li>ну а в четвертом окне, соответственно, приведена информация об объектах в выбранной
секции файла в формате <code>ELF</code></li>
</ul>

<p>Таким образом, пользователь может получать информацию о потреблении памяти программой
и/или отдельным компонентом программы.</p>


<h2><a name="sec3" id="sec3"></a>
exmap-console</h2>

<p class="first">Использование графического интерфейса не всегда удобно для разработчика.  Поэтому, была
разработана отдельная программа <a href="http://labs.o-hand.com/exmap-console/">exmap-console</a>, которая реализует командно-строковую
утилиту для получения информация от модуля ядра, а также программу для удаленного доступа
к модулю ядра.</p>

<p>Установка данного пакета достаточно проста &mdash; необходимо скачать исходные тексты с
<a href="http://labs.o-hand.com/sources/exmap-console/">домашней страницы проекта</a>, распаковать и выполнить стандартную последовательность
(<code>./configure ; make ; make install</code>) для сборки и установки программы.</p>

<p>После сборки пользователю становятся доступны несколько команд:</p>

<dl>
<dt><strong><code>exmap</code></strong></dt>
<dd>командно-строковая утилита, которая выполняет обращение к модулю ядра, и выдает
полученную информацию в текстовом виде.  Эта программа может использоваться в
интерактивном режиме.  Кроме того, с помощью этой же программы осуществляется доступ к
информации на удаленном сервере, на котором запущена программа <code>exmapserver.</code></dd>

<dt><strong><code>exmapserver</code></strong></dt>
<dd>предоставляет возможность удаленного доступа к информации собранной
модулем ядра.</dd>

<dt><strong><code>exmapd</code></strong></dt>
<dd>используется для периодического запуска <code>exmap</code> со сбором информации в указанном
каталоге.</dd>
</dl>

<p>Подробную информацию об использовании этих программ вы можете найти в справочных
страницах, которые поставляются в составе пакета.</p>





<!-- Page published by Emacs Muse ends here -->
  </div>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
	_uacct = "UA-78697-3";
	urchinTracker();
</script>
  </body>
</html>
