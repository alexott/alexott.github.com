<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html><head><title>Пакет RefTeX</title>
<meta name="generator" content="muse.el" />
<meta name="author" content="Alex Ott" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="alex ott, reftex, emacs, latex, tex, gnu emacs, xemacs" />


<link rel="stylesheet" type="text/css" charset="utf-8" media="screen,projection" href="../../../web.css" />
<link rel="stylesheet" type="text/css" href="../../../print.css" media="print" />
<link rel="alternate" type="application/atom+xml" title="Alex Ott's Russian Blog" href="http://feeds.feedburner.com/alexott-ru" />
<link rel="alternate" type="application/atom+xml" title="Alex Ott's English Blog" href="http://feeds.feedburner.com/alexott" />
<link rel="alternate" type="application/atom+xml" title="Alex Ott's German Blog" href="http://feeds.feedburner.com/alexott-de" />
</head><body>
<div id="wrap"><div id="header"><h1>Пакет RefTeX</h1>
<p><a href="../../../ru/index.html">Russian</a>
&middot; <a href="../../../en/index.html">English</a></p></div>
<div id="leftside"><h2 class="hide">Меню:</h2><ul class="avmenu"><li><a href="../../index.html">Главная</a></li><li><a href="../../cf/">Информационная безопасность</a></li><li><a href="../../fp/">Функциональное программирование</a></li><li><a href="../../lisp/">Lisp</a></li><li><a href="../../clojure/">Clojure</a></li><li><a href="../../scheme/">Scheme</a></li><li><a href="../../erlang/">Erlang</a></li><li><a href="../../cpp/">C++</a></li><li><a href="../../oss/">Open Source Projects</a></li><li><a href="../../emacs/">Emacs</a></li><li><a href="../../writings/" class="current">Статьи</a></li></ul>
<div class="announce"><br><form action="http://www.google.com/cse" id="searchbox_006849776194404728512:q7vjogjzehm">  
<input type="hidden" name="cx" value="006849776194404728512:q7vjogjzehm">  
<input type="text" name="q" size="17">  <input type="submit" name="sa" value="Search"> </form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=searchbox_006849776194404728512%3Aq7vjogjzehm&lang=ru"></script></div></div> <!-- leftside -->
<div id="contentwide">
<div class="contents">
<dl>
<dt>
<a href="#sec1">Работа с пакетом</a>
</dt>
<dd>
<dl>
<dt>
<a href="#sec2">Общие команды и привязки клавиш</a>
</dt>
<dt>
<a href="#sec3">Работа с таблицами оглавлений</a>
</dt>
<dt>
<a href="#sec4">Работа с метками</a>
</dt>
<dt>
<a href="#sec5">Работа с ссылками на литературу и базами данных BibTeX</a>
</dt>
<dt>
<a href="#sec6">Работа с индексами</a>
</dt>
<dt>
<a href="#sec7">Прочие команды</a>
</dt>
</dl>
</dd>
<dt>
<a href="#sec8">Установка и настройка</a>
</dt>
<dd>
<dl>
<dt>
<a href="#sec9">Возможные проблемы и их решение</a>
</dt>
</dl>
</dd>
</dl>
</div>


<p><em>RefTeX</em> это пакет для работы с метками, ссылками, ссылками на литературу и записями в
индексе.  Пакет поддерживает работу со всеми основными режимами для LaTeX'а, и имеет
поддержку для работы с документами, состоящими из нескольких файлов.  Пакет поставляется с
достаточно большим руководством, которое подробно описывает каждый из моментов работы с
пакетом.  <em>RefTeX</em> реализует следующие возможности:</p>

<ul>
<li>Создание таблицы оглавления редактируемого документа, и быстро переходить в нужную
часть, используя это оглавление;</li>
<li>Создание меток для различных объектов, и потом ссылаться на них, используя накопленные
данные;</li>
<li>Возможности поиска по базам BibTeX, и использование результатов поиска для вставки
ссылок на литературу;</li>
<li>Работа с индексами &mdash; создание записей в индексе, просмотр и изменение файлов индексов;</li>
<li>Работа с перекрестными ссылками;</li>
<li>Работа с документами, состоящими из нескольких файлов;</li>
<li>Интеграция с <em>AUCTeX</em>.</li>
</ul>

<p><em>RefTeX</em> написан Carsten Dominik, и в настоящее время, им и сопровождается.  Вы можете найти
дистрибутив пакета и прочую информацию относящуюся к нему на <a href="http://www.strw.leidenuniv.nl/~dominik/Tools/">сайте автора</a>.</p>

<h2><a name="sec1" id="sec1"></a>
Работа с пакетом</h2>

<p class="first">В целом, работу с пакетом <em>RefTeX</em> можно разделить на несколько больших частей:</p>

<ul>
<li>работа с таблицами оглавлений;</li>
<li>работа с метками;</li>
<li>работа с базами данных BibTeX;</li>
<li>работа с индексами.</li>
</ul>

<p>Команды могут выполняться с помощью привязок клавиш, стандартных средств выполнения
команд, или используя меню <code>Ref</code>, которое появляется при использовании пакета <em>RefTeX</em>.</p>

<h3><a name="sec2" id="sec2"></a>
<a name="common" id="common"></a>Общие команды и привязки клавиш</h3>

<p class="first">Все буфера, в которых происходит работа, имеют привязки клавиш, которые работают сходным
образом:</p>

<ul>
<li><code>?</code> &mdash; получение справки о работе в буфере;</li>
<li><code>n</code> &mdash; переход к следующему элементу;</li>
<li><code>p</code> &mdash; переход к предыдущему элементу;</li>
<li><code>q</code> &mdash; выйти из буфера;</li>
<li><code>k</code> &mdash; удалить буфер;</li>
<li><code>g</code> &mdash; перестроить буфер;</li>
<li><code>SPC</code> &mdash; переход к соответствующему элементу в другом окне (но окно не становится
активным);</li>
<li><code>TAB</code> &mdash; переход к соответствующему элементу в другом окне;</li>
<li><code>RET</code> (или <code>Mouse-2</code>) &mdash; перейти к выбранному элементу, и спрятать буфер;</li>
<li><code>f</code> &mdash; переключает режим следования (при работе в этом режиме в другом окне отображается
раздел соответствующий текущему элементу);</li>
<li><code>r</code> и <code>C-r</code> &mdash; заново разобрать часть или весь документ для формирования соответствующего
буфера.</li>
</ul>


<h3><a name="sec3" id="sec3"></a>
Работа с таблицами оглавлений</h3>

<p class="first">Получить таблицу оглавления можно получить с помощью сочетания клавиш <code>C-c
=</code>. Таблица отображается в отдельном буфере, который называется <code>*toc*</code>. По умолчанию,
в этом буфере отображается только список разделов документа, однако, используя клавиши <code>l</code> и
<code>i</code>, вы легко можете получить список всех меток и вхождения индексов в документе.
Перемещаясь по буферу пользователь может быстро переходить к нужным разделам документа.</p>

<p>Для работы с содержимым буфера используется набор клавиш. Кроме стандартных клавиш,
перечисленных в разделе <a href="#common">общие команды</a>, пользователю доступны следующие команды:</p>

<ul>
<li><code>N z</code> &mdash; переход к разделу номер N;</li>
<li><code>t</code> &mdash; задать глубину отображаемых разделов;</li>
</ul>

<p>С действиями, которые выполняются с помощью других клавиш вы можете ознакомиться в
руководстве по <em>RefTeX</em>.  На разбор документов, и отображение результатов разбора, влияет
некоторое количество переменных и функций, с которыми мы ознакомимся в разделе <a href="#customize">Настройка</a>.</p>


<h3><a name="sec4" id="sec4"></a>
Работа с метками</h3>

<p class="first">Мы можем рассматривать работу с пометками с двух сторон &mdash; создание меток, и их
использование.</p>

<p>Для создания метки использует сочетание клавиш <code>C-c (</code> (или команда <code>reftex-label</code>).  В
зависимости от контекста, <em>RefTeX</em> может адаптировать метку к текущему контексту. Обычно к
имени метки добавляется небольшой префикс, который позволяет отличать метки для картинок,
от меток для таблиц и т.п.  Способ создания меток может изменяться в зависимости от
значения переменной <code>reftex-insert-label-flags</code>, который мы рассмотрим в разделе <a href="#customize">Настройка</a>..</p>

<p>Для того, чтобы сослаться на метку, используется сочетание клавиш <code>C-c )</code> (или команда
<code>reftex-reference</code>).  Также как и при вставке метки, <em>RefTeX</em> пытается вычислить контекст в
котором используется ссылка, и вставить часть имени.  При вставке имени метки вы можете
использовать буфер со списком определенных в документе меток. Работа с буфером аналогична
работе с буфером, содержащим оглавление документа. Однако, в отличии от оглавления
документа, вы можете ссылаться на несколько меток, помечая их с помощью клавиши <code>m</code>, и затем
используя клавишу <code>RET</code> при окончании выбора.</p>

<p><em>RefTeX</em> распознает большое количество окружений LaTeX, как входящих в стандартный набор
окружений, так и в разные, не совсем стандартные окружения.  Полный их список имеется в
руководстве к пакету. Кроме этого, вы можете заставить <em>RefTeX</em> распознавать ваши
собственные окружения.  Об этом вы можете прочитать в разделе &quot;Defining Label
Environments&quot;, руководства по <em>RefTeX</em>.  Также, <em>RefTeX</em> умеет ссылаться на метки,
определенные в других документах, работая совместно со стилем LaTeX, который называется
<em>xr</em>, и учитывать возможности, предоставляемые пакетами <em>varioref</em> и <em>fancyref</em>.</p>

<p>Результаты поиска меток отображаются в отдельном буфере, по которому вы можете
перемещаться с помощью команд, перечисленных в разделе <a href="#common">общие команды</a>.  Однако, для работы
с пометками, в данном буфере определены дополнительные команды:</p>

<ul>
<li><code>m</code> &mdash; помечает текущую запись.  При использовании клавиши <code>RET</code>, все помеченные записи
будут вставлены как отдельные макросы <code>\ref</code>.  Для этой команды существуют дополнительные
модификаторы &quot;<code>- + ,</code>&quot;, которые определяют разделители между вставляемыми записями.</li>
<li><code>u</code> &mdash; снимает пометку с текущей записи;</li>
<li><code>a</code> &mdash; помещает помеченные записи в виде списка для одного макроса <code>\ref</code>;</li>
<li>= &mdash; использовать метку, на которую ссылались в последний раз;</li>
<li><code>TAB</code> &mdash; вводит имя пометки, с возможностью дополнения имени.  Тут вы можете ввести имя
метки, которое еще не существует;</li>
<li><code>v</code> &mdash; включает и отключает использование макроса <code>\vref</code> вместо <code>\ref</code>.  Макрос <code>\vref</code>
определяется пакетом <em>varioref</em>;</li>
<li><code>V</code> &mdash; циклически переключается между использованием макросов <code>\ref</code>, <code>\fref</code> и <code>\Fref</code>.
Последние два макроса определены в пакете <em>fancyref</em>;</li>
<li><code>s</code> &mdash; вызывает переключение на другую категорию меток;</li>
<li><code>x</code> &mdash; вставляет ссылку на метку из внешнего документа.  Это возможно за счет
использования пакета <em>xr</em>.</li>
</ul>

<p>Кроме вышеперечисленных команд, в буфере работы с метками определены команды, которые
контролируют отображаемую информацию (значения по умолчанию для этих настроек хранятся в
переменной <code>reftex-label-menu-flags</code>):</p>

<ul>
<li><code>c</code> &mdash; переключает отображение одно-строчного контекста определения метки;</li>
<li><code>F</code> &mdash; переключает отображение границ файлов в документе, состоящем из нескольких файлов;</li>
<li><code>t</code> &mdash; переключает отображение таблицы оглавления в буфере;</li>
<li><code>#</code> &mdash; переключает отображение счетчика меток;</li>
<li><code>%</code> &mdash; переключает отображение меток, скрытых в комментариях.</li>
</ul>


<h3><a name="sec5" id="sec5"></a>
Работа с ссылками на литературу и базами данных BibTeX</h3>

<p class="first">Ссылки на литературу создаются в LaTeX с помощью команды <code>\cite</code> или ее аналогов.  Ссылки
могут быть определены в базах данных BibTeX, или указаны явно в документе.</p>

<p>Создание ссылки на литературу производится с помощью команды <code>reftex-citation</code> (сочетание
клавиш <code>C-c [</code>).  При выполнении данной команды, она запросит у пользователя регулярное
выражение, которое будет использоваться при поиске по базам данных.  Поиск производится по
файлам в текущем каталоге, а также по файлам, находящимся в путях, перечисленных в
переменной среды <code>BIBINPUTS</code>.</p>

<p>После выполнения поиска, его результаты будут представлены в виде буфера, аналогичного
буферу результатов вставки ссылок на метки:</p>

<ul>
<li><code>m</code> &mdash; помечает текущую запись.  Затем все помеченные записи будут использованы при
использовании команд <code>a</code> или <code>A</code>;</li>
<li><code>u</code> &mdash; снимает пометку с текущей записи;</li>
<li><code>a</code> &mdash; вставляет все помеченные записи в виде одного макроса <code>\cite</code>;</li>
<li><code>A</code> &mdash; вставляет все помеченные записи в виде макросов <code>\cite</code> для каждой из записей.</li>
</ul>

<p><em>RefTeX</em> поддерживает использование разных стилей ссылок на литературу.  Кроме стандартных
механизмов LaTeX, пакет поддерживает работу с дополнительными модулями расширения LaTeX,
такими как <em>natbib</em>, <em>harvard</em> и т.п.  Текущий используемый стиль определяется переменной
<code>reftex-cite-format</code>, которой вы можете присвоить нужное вам значение.</p>


<h3><a name="sec6" id="sec6"></a>
Работа с индексами</h3>

<p class="first">LaTeX поддерживает создание автоматических разделов индексов.  Кроме стандартных средств,
существует некоторое число пакетов, которые расширяют возможности LaTeX в этой области.</p>

<p>До начала работы с индексами, вы должны сообщить <em>RefTeX</em> о том, какой стиль индексов вы
будете использовать.  При использовании <em>AUCTeX</em>, такая настройка будет выполнена
автоматически, однако вы можете выполнить ее и вручную используя пункт <code>Index Style</code> меню
<code>Ref</code> или настраивая переменную <code>reftex-index-macros</code>.</p>

<p>Создание записи индекса для текущего слова или записи, используется команда
<code>reftex-index-selection-or-word</code> (сочетание <code>C-c /</code>).  По умолчанию, для индекса используется
макрос заданный переменной <code>reftex-index-default-macro</code> (по умолчанию это <code>\index</code>).
Используя префиксный аргумент вы можете изменять содержимое индексной записи перед его
вставкой (один префиксный аргумент) или имя макроса индексации (два префиксных аргумента).
Вставка общего макроса индексации производится с помощью команды <code>reftex-index</code> (сочетание
клавиш <code>C-c &lt;</code>).  При выполнении этой команды, у пользователя запросят имя макроса и его
аргументы.</p>

<p>Для облегчения работы пользователя, <em>RefTeX</em> ведет отдельный файл, в котором собираются
фразы для последующего индексирования.  Вы можете попасть в (или создать его) этот файл с
помощью команды <code>reftex-index-visit-phrases-buffer</code> (сочетание <code>C-c |</code>).  Файл имеет то же
имя, что и основной файл документа, но имеет расширение <code>.rip</code>.  Фразы для индексирования
могут быть собраны во время работы, используя команду
<code>reftex-index-phrase-selection-or-word</code> (<code>C-c \</code>), которая копирует выделение или текущее
слово в буфер фраз.  При выполнении этой команды, пользователь попадает в буфер фраз, так
что он может изменить скопированное значение, и покинуть этот буфер можно с помощью
сочетания клавиш <code>C-c C-c</code>, которое вызывает команду <code>reftex-index-phrases-save-and-return</code>.</p>

<p>Компиляция и отображение индекса производится с помощью команды <code>reftex-display-index</code>,
которая привязана к сочетанию <code>C-c &gt;</code>.  Принципы работы в отображенном буфере аналогичны
тем, что применяются при работе с другими буферами &mdash; меток, ссылок на литературу и
оглавления.  Однако, пользуясь данным буфером, пользователь может изменять индексные
записи с помощью следующих команд:</p>

<ul>
<li><code>e</code> &mdash; изменяет текущую индексную запись.  Используя минибуфер, вы можете задать макрос,
который будет использоваться при определении данной записи;</li>
<li><code>C-k</code> &mdash; уничтожает данную запись;</li>
<li><code>*</code> &mdash; изменяет ключевую часть для данной записи, которая определяет расположение записи
в индексе;</li>
<li><code>|</code> &mdash; изменяет атрибутивную часть записи, которая располагается после вертикальной
черты;</li>
<li><code>@</code> &mdash; изменяет видимую часть записи;</li>
<li><code>(</code> &mdash; изменяет начало свойства диапазона страниц записи;</li>
<li><code>)</code> &mdash; изменяет конец свойства диапазона страниц записи;</li>
<li><code>_</code> &mdash; делает текущую запись частью другой записи;</li>
<li><code>^</code> &mdash; удаляет самую верхнюю запись в иерархии.</li>
</ul>

<p>Пользователь может управлять отображением информации в буфере с помощью следующих команд:</p>

<ul>
<li><code>c</code> &mdash; переключает отображение контекста в буфере <code>*Index*</code>.  Значение по умолчанию для
данного свойства определяется переменной <code>reftex-index-include-context</code>;</li>
<li><code>}</code> &mdash; сужает индекс до показа раздела одного документа.  Номер раздела будет
отображаться в индикаторе <code>R&lt;&gt;</code> строки состояния, а также в заголовке буфера <code>*Index*</code>;</li>
<li><code>{</code> &mdash; включает показ всех индексных записей документа;</li>
<li><code>&lt;</code> &mdash; при использовании режима сужения индексов, переходит к предыдущему разделу;</li>
<li><code>&gt;</code> &mdash; при использовании режима сужения индексов, переходит к следующему разделу;</li>
</ul>

<p>При работе с буфером индексов, пакет определяет дополнительные команды, которых нет в
других буферах:</p>

<ul>
<li><code>! A..Z</code> &mdash; выполняет переход на секцию индекса, начинающуюся с соответствующей буквы;</li>
<li><code>s</code> &mdash; переключает на работу с другим индексом (если используется несколько индексов).</li>
</ul>


<h3><a name="sec7" id="sec7"></a>
Прочие команды</h3>

<p class="first">С помощью пакета <em>RefTeX</em> вы также можете получать информацию о том, из каких частей
документа ссылаются на данный объект.  Это выполняется с помощью команды
<code>reftex-view-crossref</code>, которая привязана к сочетанию клавиш <code>C-c &amp;</code>.  Пользователь также
может использовать привязку <code>S-Mouse2</code> для аргумента макроса, и пакет выполнит переход на
объект, соответствующий текущему макросу.</p>

<blockquote>
<p class="quoted">#customize</p>
</blockquote>



<h2><a name="sec8" id="sec8"></a>
Установка и настройка</h2>

<p><em>RefTeX</em> поставляется в составе GNU Emacs начиная с версии 20.2 и в составе XEmacs начиная с
версии 19.16 и всех XEmacs версии 20.  Для XEmacs версии 21 существует пакет, который
доступен с основного сайта XEmacs.  Так что ручная установка пакета не потребуется.
Настройка пакета достаточна проста &mdash; вам как минимум надо установить хуки для основных
режимов работы с LaTeX, например, с помощью такого кода:</p>

<pre class="src">
(add-hook 'LaTeX-mode-hook 'turn-on-reftex)
(add-hook 'latex-mode-hook 'turn-on-reftex)
</pre>

<p>первая строка устанавливает хук для режима, предоставляемого пакетом <em>AUCTeX</em>, а вторая для
стандартного режима идущего в составе Emacs.  Настройка остальных параметров может быть
осуществлена используя команду <code>M-x customize-group reftex</code>.  Для интеграции с <em>AUCTeX</em> будет
полезным установить переменную <code>reftex-plug-into-AUCTeX</code> в истинное значение (с помощью
команды <code>M-x customize-variable</code>, или с помощью кода на Emacs Lisp).  Для работы с
документами состоящими из нескольких файлов, желательно установить в истинное значение
несколько переменных, которые позволяют выполнять кеширование информации, а также работы с
неполными документами:</p>

<pre class="src">
(setq reftex-enable-partial-scans t)
(setq reftex-save-parse-info t)
(setq reftex-use-multiple-selection-buffers t)
</pre>

<p>Вы можете настроить эти и другие переменные используя стандартные средства настойки Emacs.
Группа настройки называется <code>reftex</code>.</p>

<p>Для более точной настройки пакета, в нем определяется два хука &mdash; 
<code>reftex-load-hook</code> и
<code>reftex-mode-hook</code>.  Команды первого хука выполняются при загрузке пакета, а команды второго
&mdash; при включении режима <code>reftex-mode</code>.</p>

<p>По умолчанию, <em>RefTeX</em> настроен для работы с английским языком.  Для его использования с
другими языками, пользователю надо знакомиться с содержимым раздела `Language Support'
руководства по <em>RefTeX</em>.</p>

<h3><a name="sec9" id="sec9"></a>
Возможные проблемы и их решение</h3>

<p class="first">Несмотря на достаточно хорошую реализацию, иногда при работе с данным пакетом могут
возникать различные проблемы, которые часто имеют решения, но требуют некоторых изменений
в оформлении кода или подходу к работе с LaTeX.  Для своей нормальной работы пакет требует
от пользователя, чтобы он следовал некоторым правилам оформления документов.  Так, команды
<code>\include</code>, <code>\bibliography</code>, <code>\input</code> и <code>\section</code> должны быть первыми командами на строке, не
считая пробельных символов.</p>

<p>В своей работе <em>RefTeX</em> анализирует весь текст, включая комментарии, поэтому если у вас есть
закомментированные блоки с определением меток, то <em>RefTeX</em> может отказать вам в создании
меток с существующими именами.  Иногда при работе с <em>RefTeX</em> могут возникать проблемы
связанные с замедлением работы.  Для предотвращения этого, существует несколько советов,
которые полностью перечислены в руководстве по <em>RefTeX</em>.</p>

<div id="rule"><a href="index.html">На главную страницу</a></div>



<!-- Page published by Emacs Muse ends here -->
<div id="lastchange"><p><em>Last change: 05.03.2013 16:54</em></p></div>
<div id="rule"><div id="disqus_thread"></div>
<script type="text/javascript">
var disqus_shortname = 'alexottnet';
var disqus_identifier = '/ru/writings/emacs-tex/RefTeX.html';
var disqus_url = 'http://alexott.net/ru/writings/emacs-tex/RefTeX.html';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div></div><!-- div-contentwide -->
<div id="footer"><p>Copyright &copy; 1997-2011<a href="../../../copyright.html">Alex Ott</a> &middot; Design by <a href="http://andreasviklund.com/">Andreas Viklund</a>&nbsp;&middot;&nbsp; <a href="http://mwolson.org/projects/EmacsMuse.html"><img alt="muse logo" src="../../../muse-grey-bar.png" /></a></p></div></div> <!-- div-wrap -->
<script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">try {var pageTracker = _gat._getTracker("UA-78697-10");pageTracker._trackPageview();} catch(err) {}</script></body></html>