<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Jabber</title><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"><link rel="start" href="index.html" title="Emacs и средства интерактивного общения"><link rel="up" href="index.html" title="Emacs и средства интерактивного общения"><link rel="prev" href="ar01s03.html" title="Пакет Rcirc"><link rel="next" href="ar01s05.html" title="Yahoo! Chat Messenger"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Jabber</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s03.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s05.html">След.</a></td></tr></table><hr></div><div class="section" lang="ru"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="emacs.net.jabber"></a>Jabber</h2></div></div></div><p>Поддержку сервиса Jabber в настоящее время осуществляют несколько пакетов для Emacs —  <span class="application">ejab</span>, который уже не развивается
  (замороженная версия доступна с <a class="ulink" href="http://ejab.sourceforge.net" target="_top">http://ejab.sourceforge.net</a>),
  <span class="application">smyrno</span>, который также почти не развивается, но обладает
  достаточным набором возможностей (он доступен с <a class="ulink" href="http://www.nongnu.org/smyrno/" target="_top">http://www.nongnu.org/smyrno/</a>) и
  <span class="application">Jabber.el</span>, который активно развивается и представляет достаточно полную и
  расширяемую поддержку протокола Jabber.  Поскольку <span class="application">Jabber.el</span> динамично развивается,
  то я сосредоточусь исключительно на данном пакете.</p><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2573362"></a>Получение и установка</h3></div></div></div><p>Пакет требует для своей работы GNU Emacs 21 и Gnus 5.10.x (из него нужно только пара файлов —  <code class="filename">sha1-el.el</code> и
    <code class="filename">hex-util.el</code>, так что вы можете их установить не устанавливая
    весь Gnus), или XEmacs с поддержкой Mule, а также установленными пакетами
    <code class="filename">gnus</code>, <code class="filename">net-utils</code> и
    <code class="filename">mule-ucs</code>.  Кроме этого, если установлен пакет
    <span class="application">FLIM</span>, то <span class="application">Jabber.el</span> может использовать его для
    поддержки <acronym class="acronym">SASL</acronym>.</p><p>Установка пакета достаточно проста —  надо просто скачать его
    дистрибутив с <a class="ulink" href="http://emacs-jabber.sourceforge.net" target="_top">http://emacs-jabber.sourceforge.net</a>,
    развернуть его и настроить загрузку в стартовом скрипте Emacs'а, например
    следующими командами:

    </p><pre class="screen">;; если вы установили jabber.el в нестандартное место
(add-to-list 'load-path "path_to_jabber.el_dir") 
(require 'jabber) 
</pre><p>
    </p><p>После загрузки пакета, необходимо задать имя пользователя и сервера, что
    делается с помощью функции <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span> jabber-customize</code>.  С помощью этой функции
    можно также зарегистрировать нового пользователя, если перед ее выполнением
    команды задать префикс.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2573498"></a>Основные действия</h3></div></div></div><p>После настройки, <span class="application">Jabber.el</span> готов к работе, необходимо только подключиться к
    выбранному серверу Jabber.</p><div class="section" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="id2573518"></a>Подключение, отключение и состояние</h4></div></div></div><p>Подключение к серверу выполняется одной командой — 
      <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
      jabber-connect</code>, после подключения с помощью команды
      <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
      jabber-send-presence</code> можно отправить на сервер уведомление о
      присутствии.  Эта команда дает возможность вам указать статус присутствия, если
      вы оставили статус пустым, то будет установлено значение по умолчанию равное
      Online.</p><p>Для отключения от сервера Jabber, просто выполните команду
      <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
      jabber-disconnect</code>, и ваше подключение будет закрыто.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Замечание для новых версий</h3><p>Новые версии <span class="application">Jabber.el</span> поддерживают сразу несколько учетных записей
      jabber.  Список учетных записей также настраивается с помощью стандартных
      средств, но вы можете пометить некоторые из них, как неактивные.  Настройку
      учетных записей можно производить и с помощью кода на Emacs Lisp.  Список
      учетных записей хранится в переменной <code class="varname">jabber-account-list</code>.
      Например, вот такой код определяет две учетных записи, одна из которых не
      является активной:

      </p><pre class="screen">(setq jabber-account-list
  '(("XXXXXXXX@gmail.com/emacs" 
    (:network-server . "talk.google.com")
    (:connection-type . ssl))
   ("XXXX@jabber.ru/emacs"
    (:password . "YYYYYY")
    (:network-server . "jabber.ru")
    (:disabled . t))))
</pre><p>
      
      </p><p>Введение этого функционала немного изменило поведение команд подключения и
      отключения.  Для подключения всех активных учетных записей может использоваться
      функция <code class="function">jabber-connect-all</code> (она привязана к сочетанию
      <span class="keysym">C</span>+<span class="keysym">x</span>
      <span class="keysym">C</span>+<span class="keysym">j</span>
      <span class="keysym">C</span>+<span class="keysym">c</span>), а
      <code class="function">jabber-connect</code> производит подключение только к одной из
      учетных записей (в том числе и неактивной).  Для отключения одной записи
      используется функция <code class="function">jabber-disconnect-one</code>, тогда как
      <code class="function">jabber-disconnect</code> (<span class="keysym">C</span>+<span class="keysym">x</span> <span class="keysym">C</span>+<span class="keysym">j</span>
      <span class="keysym">C</span>+<span class="keysym">d</span>) производит отключение
      от всех серверов.</p></div><p><span class="application">Jabber.el</span> позволяет вам изменять состояние вашей доступности. Это можно
      сделать как явно, с помощью команды
      <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
      jabber-send-presence</code>, так и программно, с помощью этой же функции.
      Кроме этого, вы можете запрограммировать сервер Jabber на уведомление вас, об
      изменении статуса нужного вам человека. Это выполняется с помощью команды
      <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
      jabber-send-subscription-request</code>.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="id2573798"></a>Переговоры (chatting)</h4></div></div></div><p>После подключения, пользователю становится доступен буфер roster'а, находясь в котором он может выполняться различные действия. Одно из таких действий —  переговоры (или chatting).  Для начала переговоров, нужно лишь
      выбрать персону с кем вы будете переговариваться и набрать
      <span class="keysym">C</span>+<span class="keysym">c</span>
      <span class="keysym">C</span>+<span class="keysym">c</span>, и будет создан буфер
      с именем <code class="literal">*-jabber-chat-:-ИМЯПЕРСОНЫ-*</code>, в котором вы и сможете
      вести переговоры.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="id2573847"></a>Групповые чаты</h4></div></div></div><p>Для подключения к групповому чату пользователь может использовать команду
      <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
      jabber-groupchat-join</code>, или использовать сочетание клавиш
      <span class="keysym">C</span>+<span class="keysym">c</span>
      <span class="keysym">C</span>+<span class="keysym">m</span> находясь в буфере
      roster'а.  После подключения к чату, будет создан буфер с именем
      <code class="literal">*-jabber-groupchat-:-ИМЯЧАТА-*</code>, что позволяет одновременно
      участвовать в нескольких обсуждениях.  Работа с буфером осуществляется точно так
      же, как и при обычных переговорах.  Для выхода из группового чата просто
      наберите <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
      jabber-groupchat-leave</code>.</p><p>Кроме этого, если вы являетесь владельцем данного чата, пакет позволяет
      произвести его настройку, используя команду
      <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
      jabber-groupchat-get-config</code>.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="id2573950"></a>Работа с буфером roster</h4></div></div></div><p>Буфер roster'а называется <code class="literal">*-jabber-*</code>, и содержит в себе
      список контактов вашего roster'а.  С использованием данного буфера проводятся
      все операции, которые требуют указания Jabber ID, такие как переговоры,
      групповые и многопользовательские чаты, получение информации roster'а и работа с
      сервисами.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="id2573978"></a>Работа с сервисами jabber</h4></div></div></div><p><span class="application">Jabber.el</span> позволяет пользователю получить доступ к большинству возможностей предоставляемых Jabber. Сюда входят —  просмотр списка
      сервисов, поиск в каталогах, регистрация для использования сервисов, а также
      поддержка набора специализированных команд (ad-hoc).</p><p>Для использования каких-либо сервисов, вам сначала нужно их найти. Это может выполняться двумя способами —  поиском (discovering) и просмотром (browsing). Первый способ является предпочтительным, поскольку использует новые протоколы. Для поиска сервисов могут использоваться две команды — 
      <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
      jabber-get-disco-items</code> и
      <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
      jabber-get-disco-info</code>, которые выдают информацию либо о конкретном
      сервисе, либо о сервисах, относящихся к выбранному сервису.  Эти же команды
      доступны через меню, которое вызывается сочетанием клавиш
      <span class="keysym">C</span>+<span class="keysym">c</span>
      <span class="keysym">C</span>+<span class="keysym">i</span> из буфера
      roster'а.</p><p>Поиск по сервисам выполняется с помощью команды
      <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
      jabber-get-search</code>, или выбором пункта меню, отображаемого с помощью
      сочетания клавиш <span class="keysym">C</span>+<span class="keysym">c</span>
      <span class="keysym">C</span>+<span class="keysym">s</span>.  После выполнения
      запроса, вам будет показана форма поиска, которую необходимо заполнить для его
      выполнения.</p><p>Регистрация производится аналогично проведению поиска, только используется
      команда <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
      jabber-get-register</code>.  С помощью данного сервиса, вы можете например,
      сменить свой пароль, или зарегистрироваться для использования конкретного
      сервиса. Как и в случае с поиском, при регистрации, модуль отобразит форму
      регистрации, которую вам необходимо будет заполнить.</p><p>Для работы со специализированными командами, пользователь сначала должен
      получить их список, поддерживаемых сервером. Это выполняется с помощью команды
      <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
      jabber-ahc-get-list</code>.  Для выполнения специализированной команды,
      используется команда
      <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
      jabber-ahc-execute-command</code>.  Специализированные команды могут
      использоваться, например, для того, чтобы удаленно изменить состояние вашего
      клиента, или другие вещи.</p></div></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="id2574226"></a>Настройка и расширение возможностей</h3></div></div></div><div class="section" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="id2574232"></a>Настройка клиента</h4></div></div></div><p>Настройка клиента выполняется с помощью команды
      <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
      jabber-customize</code> или, что тоже самое, с помощью команды
      <code class="function"><span class="keysym">M</span>+<span class="keysym">x</span>
      customize-group</code> <code class="computeroutput">jabber</code>. Переходя по
      разделам группы, вы можете настроить как основные параметры, такие как имя,
      сервер, так и другие, например уведомления о событиях, параметры начертаний
      (faces) и различные хуки.</p><p>Этот процесс является интуитивно-понятным, и поэтому я не буду заострять
      на нем внимание.  Список переменных, которые используются для настройки с
      помощью этих команд, приведен в руководстве для <span class="application">Jabber.el</span>.</p></div><div class="section" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="id2574311"></a>Расширение возможностей пакета</h4></div></div></div><p><span class="application">Jabber.el</span> позволяет пользователю расширять возможности пакета,
      предоставляя возможности по приему и отправке новых типов запросов и ответов,
      осуществлять доступ к данным соединения и многое другое.</p><p>XML, который используется для общения с сервером jabber, представляется в
      виде списков, которые создаются модулем <code class="filename">xml.el</code> — 
      каждый тег представляется в виде списка, первым элементом которого является
      символ представляющий тег, за тем следует список из списков атрибутов, и затем
      идут вложенные тэги и содержимое.</p><p>Текущее состояние roster'а представляется списком с именем
      <code class="literal">*jabber-roster*</code>.  В данном списке можно найти подробную
      информацию о группах, состоянии соединения и прочих параметрах.</p><p>Подробное описание процесса расширения возможностей пакета приведено в
      разделе "Hacking and extending" справочной страницы <span class="application">Jabber.el</span></p></div></div></div><script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
      _uacct = "UA-78697-3";
      urchinTracker();
    </script><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s03.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s05.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Пакет <span class="application">Rcirc</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> Yahoo! Chat Messenger</td></tr></table></div></body></html>
