<HTML>
<HEAD>
<!-- Created by texi2html 1.56k from emacs.texi on 29 October 2002 -->

<TITLE>Руководство по GNU Emacs - Регистры</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="emacs_1.html">first</A>, <A HREF="emacs_14.html">previous</A>, <A HREF="emacs_16.html">next</A>, <A HREF="emacs_46.html">last</A> section, <A HREF="emacs_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC73" HREF="emacs_toc.html#TOC73">Регистры</A></H1>
<P>
<A NAME="IDX343"></A>


<P>
  <EM>Регистры</EM> Emacs -- это места, куда вы можете записать текст или
позиции для дальнейшего использования.  Текст или прямоугольник, однажды
записанный в регистр, может быть скопирован в буфер один или несколько
раз; позицию, записанную в регистр, можно один или несколько раз
использовать для передвижения к ней точки.


<P>
<A NAME="IDX344"></A>
  Каждый регистр имеет имя, состоящее из одиночного знака.  Регистр
может хранить кусок текста, позицию, прямоугольник, конфигурацию окна
или имя файла, но только что-то одно из перечисленного в каждый
конкретный момент.  Всякий раз, когда вы сохраняете что-то в регистре,
оно остается там до тех пор, пока вы не поместите в этот регистр что-то
еще.  Чтобы узнать, что содержит регистр <VAR>r</VAR>, используйте <KBD>M-x
view-register</KBD>.


<DL COMPACT>

<DT><KBD>M-x view-register <KBD>RET</KBD> <VAR>r</VAR></KBD>
<DD>
Выдать описание того, что содержит регистр <VAR>r</VAR>.
</DL>



<H2><A NAME="SEC74" HREF="emacs_toc.html#TOC74">Запись позиций в регистры</A></H2>

<P>
  Сохранение позиции записывает местоположение в буфере, так что вы
можете вернуться туда позже.  Перенос в записанную позицию заново
выбирает буфер и передвигает точку в это место.


<DL COMPACT>

<DT><KBD>C-x r <KBD>SPC</KBD> <VAR>r</VAR></KBD>
<DD>
Записать положение точки в регистр <VAR>r</VAR> (<CODE>point-to-register</CODE>).
<DT><KBD>C-x r j <VAR>r</VAR></KBD>
<DD>
Перейти в позицию, записанную в регистре <VAR>r</VAR>
(<CODE>jump-to-register</CODE>).
</DL>

<P>
<A NAME="IDX345"></A>
<A NAME="IDX346"></A>
  Чтобы записать текущее положение точки в регистр, выберите имя <VAR>r</VAR>
и наберите <KBD>C-x r <KBD>SPC</KBD> <VAR>r</VAR></KBD>.  Регистр <VAR>r</VAR> сохраняет
записанное таким образом положение до тех пор, пока вы не запишете в
этот регистр что-то другое.


<P>
<A NAME="IDX347"></A>
<A NAME="IDX348"></A>
   Команда <KBD>C-x j <VAR>r</VAR></KBD> передвигает точку в позицию, записанную в
регистре <VAR>r</VAR>.  Регистр не затрагивается, он продолжает хранить ту же
самую позицию.  Вы можете перейти в одну и ту же позицию, используя один
и тот же регистр, любое число раз.


<P>
  Если вы используете <KBD>C-x r j</KBD> для перехода к записанной позиции,
но буфер, в котором она была записана, уже уничтожен, <KBD>C-x r j</KBD>
пытается снова создать буфер, обращаясь к тому же файлу.  Конечно, это
работает только для буферов, которые обращались к файлам.




<H2><A NAME="SEC75" HREF="emacs_toc.html#TOC75">Запись текста в регистры</A></H2>

<P>
  Если вы захотите вставить копию одного и того же куска текста
несколько раз, использование списка уничтожений может оказаться
неудобным, так как каждое последующее уничтожение сдвигает кусок текста
все дальше вглубь списка.  Альтернативой этому методу является
сохранение текста в регистре с последующим его восстановлением.


<DL COMPACT>

<DT><KBD>C-x r s <VAR>r</VAR></KBD>
<DD>
Копировать область в регистр <VAR>r</VAR> (<CODE>copy-to-register</CODE>).
<DT><KBD>C-x r i <VAR>r</VAR></KBD>
<DD>
Вставить текст из регистра <VAR>r</VAR> (<CODE>insert-register</CODE>).
</DL>

<P>
<A NAME="IDX349"></A>
<A NAME="IDX350"></A>
<A NAME="IDX351"></A>
<A NAME="IDX352"></A>
  <KBD>C-x r s <VAR>r</VAR></KBD> записывает копию текста области в регистр с
именем <VAR>r</VAR>.  Запущенная с числовым аргументом, <KBD>C-x r s <VAR>r</VAR></KBD>
кроме того удаляет текст из буфера.


<P>
  <KBD>C-x r i <VAR>r</VAR></KBD> вставляет в буфер текст из регистра <VAR>r</VAR>.
Обычно эта команда оставляет точку перед текстом, а метку располагает
после него, но с числовым аргументом (<KBD>C-u</KBD>), наоборот, точку ставит
после текста, а метку перед ним.




<H2><A NAME="SEC76" HREF="emacs_toc.html#TOC76">Запись прямоугольников в регистры</A></H2>

<P>
  Регистр может содержать вместо линейного текста прямоугольник.
Прямоугольники представляются в виде списка строк.
See section <A HREF="emacs_14.html#SEC72">Прямоугольники</A>, для получения основной информации по
прямоугольникам и о том, как они определяются в буфере.


<DL COMPACT>

<DT><KBD>C-x r r <VAR>r</VAR></KBD>
<DD>
<A NAME="IDX353"></A>
 <A NAME="IDX354"></A>
 
Копирует область-прямоугольник в регистр <VAR>r</VAR>
(<CODE>copy-region-to-rectangle</CODE>).  С числовым аргументом еще и удаляет
его.

<DT><KBD>C-x r i <VAR>r</VAR></KBD>
<DD>
Вставляет прямоугольник, который записан в регистре <VAR>r</VAR> (если тот
содержит прямоугольник) (<CODE>insert-register</CODE>).
</DL>

<P>
  Команда <KBD>C-x r i <VAR>r</VAR></KBD> вставляет строку текста, если регистр
содержит строку, и вставляет прямоугольник, если регистр содержит
прямоугольник.


<P>
  Смотрите также команду <CODE>sort-columns</CODE>, которую можно
рассматривать как команду сортировки прямоугольника.  See section <A HREF="emacs_35.html#SEC431">Сортировка текста</A>.




<H2><A NAME="SEC77" HREF="emacs_toc.html#TOC77">Запись конфигурации окон в регистры</A></H2>

<P>
<A NAME="IDX355"></A>
<A NAME="IDX356"></A>
<A NAME="IDX357"></A>
<A NAME="IDX358"></A>
  Вы можете записать в регистр конфигурацию окон в выбранном фрейме или
даже конфигурацию всех окон во всех фреймах и позднее восстановить эту
конфигурацию.


<DL COMPACT>

<DT><KBD>C-x r w <VAR>r</VAR></KBD>
<DD>
Записать состояние окон выбранного фрейма в регистр <VAR>r</VAR>
(<CODE>window-configuration-to-register</CODE>).
<DT><KBD>C-x r f <VAR>r</VAR></KBD>
<DD>
Записать состояние всех фреймов, включая все их окна, в регистр <VAR>r</VAR>
(<CODE>frame-configuration-to-register</CODE>).
</DL>

<P>
  Используйте <KBD>C-x r j <VAR>r</VAR></KBD> для восстановления конфигурации окон
или фреймов.  Это та же команда, что используется для восстановления
позиции курсора.  Когда вы восстанавливаете конфигурацию фреймов, все
существующие фреймы, не входящие в эту конфигурацию, становятся
невидимыми.  Если вы вместо этого хотите удалить эти фреймы, используйте
<KBD>C-u C-x r j <VAR>r</VAR></KBD>.




<H2><A NAME="SEC78" HREF="emacs_toc.html#TOC78">Хранение чисел в регистрах</A></H2>

<P>
  Существуют команды для записи числа в регистр, вставки его в буфер в
десятичном виде и для увеличения этого числа.  Эти команды могут быть
полезны в макросах клавиатуры (see section <A HREF="emacs_36.html#SEC452">Клавиатурные макросы</A>).


<DL COMPACT>

<DT><KBD>C-u <VAR>число</VAR> C-x r n <VAR>рег</VAR></KBD>
<DD>
<A NAME="IDX359"></A>
<A NAME="IDX360"></A>
Записать <VAR>число</VAR> в регистр <VAR>рег</VAR> (<CODE>number-to-register</CODE>).
<DT><KBD>C-u <VAR>число</VAR> C-x r + <VAR>рег</VAR></KBD>
<DD>
<A NAME="IDX361"></A>
<A NAME="IDX362"></A>
Увеличить число в регистре <VAR>рег</VAR> на заданное <VAR>число</VAR>
(<CODE>increment-register</CODE>).
<DT><KBD>C-x r g <VAR>рег</VAR></KBD>
<DD>
Вставить число из регистра <VAR>рег</VAR> в буфер.
</DL>

<P>
  <KBD>C-x r g</KBD> -- это та же команда, что используется для вставки в
буфер содержимого регистров другого типа.




<H2><A NAME="SEC79" HREF="emacs_toc.html#TOC79">Запись имен файлов в регистры</A></H2>

<P>
  Если вы часто обращаетесь к определенным именам файлов, вам будет
удобно поместить эти имена в регистры.  Вот код на Лиспе, используемый
для записи имени файла в регистр:



<PRE>
(set-register ?<VAR>r</VAR> '(file . <VAR>имя</VAR>))
</PRE>

<P>
Например,



<PRE>
(set-register ?z '(file . "/gd/gnu/emacs/19.0/src/ChangeLog"))
</PRE>

<P>
помещает показанное имя файла в регистр <SAMP>`z'</SAMP>.


<P>
  Чтобы обратиться к файлу, чье имя находится в регистре <VAR>r</VAR>,
наберите <KBD>C-x r j <VAR>r</VAR></KBD>.  (Это та же команда, что используется
для перехода к записанной позиции или восстановления конфигурации
фреймов.)




<H2><A NAME="SEC80" HREF="emacs_toc.html#TOC80">Закладки</A></H2>
<P>
<A NAME="IDX363"></A>


<P>
  <EM>Закладки</EM> отчасти похожи на регистры тем, что они записывают
позиции, к которым вы можете перейти.  В отличие от регистров, они имеют
длинные имена и сохраняются автоматически от одного сеанса Emacs до
другого.  Шаблонное применение закладок -- запись места "где вы
читали" в различных файлах.


<DL COMPACT>

<DT><KBD>C-x r m <KBD>RET</KBD></KBD>
<DD>
Заложить закладку в текущем файле в позиции точки.

<DT><KBD>C-x r m <VAR>закладка</VAR> <KBD>RET</KBD></KBD>
<DD>
<A NAME="IDX364"></A>
Заложить в точке закладку с именем <VAR>закладка</VAR> (<CODE>bookmark-set</CODE>).

<DT><KBD>C-x r b <VAR>закладка</VAR> <KBD>RET</KBD></KBD>
<DD>
<A NAME="IDX365"></A>
Перейти к закладке с именем <VAR>закладка</VAR> (<CODE>bookmark-jump</CODE>).

<DT><KBD>C-x r l</KBD>
<DD>
<A NAME="IDX366"></A>
Перечислить все закладки (<CODE>list-bookmarks</CODE>).

<DT><KBD>M-x bookmark-save</KBD>
<DD>
<A NAME="IDX367"></A>
Сохранить все текущие значения закладок в файле закладок, используемом
по умолчанию.
</DL>

<P>
<A NAME="IDX368"></A>
<A NAME="IDX369"></A>
<A NAME="IDX370"></A>
<A NAME="IDX371"></A>
  Как правило закладки используются для записи одной текущей позиции в
каждом из нескольких файлов.  Таким образом, команда <KBD>C-x r m</KBD>,
устанавливающая закладку, по умолчанию использует в качестве имени
закладки имя файла, к которому вы обращаетесь в данный момент.  Если вы
называете каждую закладку по имени файла, на который она указывает, то
сможете удобно повторно обратиться к любому из этих файлов с помощью
<KBD>C-x r b</KBD> и в то же время переместиться к позиции закладки.


<P>
<A NAME="IDX372"></A>
  Чтобы отобразить список всех ваших закладок в отдельном буфере,
наберите <KBD>C-x r l</KBD> (<CODE>list-bookmarks</CODE>).  Если вы переключитесь в
этот буфер, вы сможете отредактировать определения закладок или дать им
описания.  Наберите в этом буфере <KBD>C-h m</KBD> для получения более
подробных сведений о специальных командах редактирования в нем.


<P>
  Когда вы уничтожаете Emacs, он предложит вам сохранить значения
закладок в вашем файле закладок по умолчанию, <TT>`~/.emacs.bmk'</TT>, если
вы изменяли какие-либо из этих значений.  Вы также можете сохранить
закладки в любое время с помощью команды <KBD>M-x bookmark-save</KBD>.
Команды, работающие с закладками, автоматически загружают ваш файл
закладок по умолчанию.  Благодаря этим сохранениям и загрузкам закладки
переходят от одного сеанса Emacs к другому.


<P>
<A NAME="IDX373"></A>
  Если вы установите переменную <CODE>bookmark-save-flag</CODE> в значение
1, то каждая команда, устанавливающая закладку, также будет записывать
ваши закладки; при этом вы не потеряете значения закладок, даже если
Emacs останавливается аварийно.  (Это значение, если оно является
числом, говорит, сколько изменений закладок проходит между
сохранениями.)


<P>
<A NAME="IDX374"></A>
  Значения позиций в закладках сохраняются вместе с окружающим
контекстом, так что <CODE>bookmark-jump</CODE> может найти правильную позицию,
даже если файл был слегка изменен.  Переменная
<CODE>bookmark-search-size</CODE> говорит, сколько знаков контекста по обе
стороны от позиции закладки нужно записывать.


<P>
  Вот несколько дополнительных команд для работы с закладками:


<DL COMPACT>

<DT><KBD>M-x bookmark-load <KBD>RET</KBD> <VAR>имя-файла</VAR> <KBD>RET</KBD></KBD>
<DD>
<A NAME="IDX375"></A>
Загрузить файл с именем <VAR>имя-файла</VAR>, содержащий список значений
закладок.  Вы можете использовать эту команду, как и команду
<CODE>bookmark-write</CODE>, для работы с другими файлами закладок помимо
вашего файла закладок по умолчанию.

<DT><KBD>M-x bookmark-write <KBD>RET</KBD> <VAR>имя-файла</VAR> <KBD>RET</KBD></KBD>
<DD>
<A NAME="IDX376"></A>
Сохранить все текущие значения закладок в файле <VAR>имя-файла</VAR>.

<DT><KBD>M-x bookmark-delete <KBD>RET</KBD> <VAR>закладка</VAR> <KBD>RET</KBD></KBD>
<DD>
<A NAME="IDX377"></A>
Удалить закладку с именем <VAR>закладка</VAR>.

<DT><KBD>M-x bookmark-insert-location <KBD>RET</KBD> <VAR>закладка</VAR> <KBD>RET</KBD></KBD>
<DD>
<A NAME="IDX378"></A>
Вставить в буфер имя файла, на который указывает закладка
<VAR>закладка</VAR>.

<DT><KBD>M-x bookmark-insert <KBD>RET</KBD> <VAR>закладка</VAR> <KBD>RET</KBD></KBD>
<DD>
<A NAME="IDX379"></A>
Вставить в буфер <EM>содержимое</EM> файла, на который указывает закладка
<VAR>закладка</VAR>.
</DL>
<P><HR><P>
Go to the <A HREF="emacs_1.html">first</A>, <A HREF="emacs_14.html">previous</A>, <A HREF="emacs_16.html">next</A>, <A HREF="emacs_46.html">last</A> section, <A HREF="emacs_toc.html">table of contents</A>.
</BODY>
</HTML>
