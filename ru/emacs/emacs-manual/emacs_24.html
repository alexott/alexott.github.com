<HTML>
<HEAD>
<!-- Created by texi2html 1.56k from emacs.texi on 29 October 2002 -->

<TITLE>Руководство по GNU Emacs - Основные режимы</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="emacs_1.html">first</A>, <A HREF="emacs_23.html">previous</A>, <A HREF="emacs_25.html">next</A>, <A HREF="emacs_46.html">last</A> section, <A HREF="emacs_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC211" HREF="emacs_toc.html#TOC211">Основные режимы</A></H1>
<P>
<A NAME="IDX967"></A>
<A NAME="IDX968"></A>
<A NAME="IDX969"></A>
<A NAME="IDX970"></A>
<A NAME="IDX971"></A>


<P>
  Emacs предоставляет много различных <EM>основных режимов</EM>, каждый из
которых настраивает Emacs на редактирование текста определенного вида.
Основные режимы являются взаимоисключающими, и каждый буфер находится в
каждый момент времени в одном основном режиме.  Строка режима обычно
содержит имя текущего основного режима в круглых скобках (see section <A HREF="emacs_6.html#SEC15">Строка режима</A>).


<P>
@hyphenation{Fun-da-men-tal} 
  Наименее специализированный основной режим называется
<EM>Fundamental</EM>.  Этот режим не имеет специальных режимных
переопределений или устанавливаемых переменных, так что каждая команда
Emacs ведет себя самым обычным образом и каждый параметр находится в
своем состоянии по умолчанию.  Для редактирования некоторого текста
определенного типа, такого как код на Лиспе или английский текст, вы
должны переключить Emacs в соответствующий основной режим, такой как
режим Lisp или режим Text.


<P>
  Выбор основного режима изменяет значение нескольких ключей таким
образом, чтобы они стали более приспособленным к редактируемому языку.
Одни из наиболее часто изменяемых ключей -- это <KBD>TAB</KBD>, <KBD>DEL</KBD> и
<KBD>C-j</KBD>.  Префиксный ключ <KBD>C-c</KBD> обычно содержит команды,
специфичные для режима.  Помимо этого, команды для управления
комментариями используют режим для определения того, каким образом
комментарии должны ограничиваться.  Многие основные режимы
переопределяют синтаксические свойства знаков, появляющихся в буфере.
See section <A HREF="emacs_36.html#SEC469">Синтаксическая таблица</A>.


<P>
  Основные режимы делятся на три основных группы.  Режим Lisp (который
имеет несколько вариантов), режим C и режим Fortran -- для
специфических языков программирования.  Режим Text, режим Nroff, режим
TeX и режим Outline -- для редактирования текста на естественном
языке.  Остальные основные режимы не предназначены для использования с
файлами пользователей; они используются в буферах, создаваемых Emacs для
специальных целей, это такие режимы, как режим Dired для буферов,
созданных Dired (see section <A HREF="emacs_33.html#SEC371">Dired, редактор каталогов</A>), режим Mail для буферов, созданных при
помощи <KBD>C-x m</KBD> (see section <A HREF="emacs_31.html#SEC339">Посылка почты</A>), и режим Shell для буферов,
используемых для связи с подчиненным процессом оболочки
(see section <A HREF="emacs_35.html#SEC419">Интерактивная подчиненная оболочка</A>).


<P>
  Большинство основных режимов для языков программирования указывают,
что только пустые строки разделяют абзацы.  Таким образом, команды
работы с абзацами остаются удобными.  (See section <A HREF="emacs_26.html#SEC220">Абзацы</A>.)  Они так же
заставляют режим Auto Fill использовать определение <KBD>TAB</KBD> для
создания отступа во вновь создаваемых им строках.  Это далется,
поскольку большинство строк в программе обычно начинаются с отступа.
(See section <A HREF="emacs_25.html#SEC213">Отступы</A>.)




<H2><A NAME="SEC212" HREF="emacs_toc.html#TOC212">Как выбираются основные режимы</A></H2>

<P>
<A NAME="IDX972"></A>
  Вы можете выбрать основной режим для текущего буфера явно, но чаще
Emacs сам определяет, какой режим использовать, основываясь на имени
файла или на специальном тексте в файле.


<P>
  Явный выбор нового основного режима делается при помощи команды
<KBD>M-x</KBD>.  Чтобы получить имя команды для выбора режима, добавьте к
имени основного режима окончание <CODE>-mode</CODE>.  Таким образом, вы можете
войти в режим Lisp, выполнив команду <KBD>M-x lisp-mode</KBD>.


<P>
<A NAME="IDX973"></A>
  Когда вы обращаетесь к файлу, Emacs обычно выбирает правильный
основной режим, основываясь на имени этого файла.  Например, файлы, чьи
имена оканчиваются на <SAMP>`.с'</SAMP>, редактируются в режиме С.  Соответствие
между именем файла и основным режимом контролируется переменной
<CODE>auto-mode-alist</CODE>.  Ее значение -- это список, каждый элемент
которого имеет такой вид:



<PRE>
(<VAR>регулярное-выражение</VAR> . <VAR>функция-режима</VAR>)
</PRE>

<P>
или такой:



<PRE>
(<VAR>регулярное-выражение</VAR> <VAR>функция-режима</VAR> <VAR>флаг</VAR>)
</PRE>

<P>
Например, один элемент, обычно находящийся в этом списке, имеет вид
<CODE>(<TT>"\\.c\\'"</TT> .  c-mode)</CODE>, и это является сигналом для выбора
режима С для файлов, чьи имена кончаются на <TT>`.с'</TT>.  (Отметим, что
<SAMP>`\\'</SAMP> необходимо по синтаксису Лиспа для того, чтобы включить в эту
строку знак <SAMP>`\'</SAMP>, а он нужен для подавления специального значения
<SAMP>`.'</SAMP> в регулярном выражении.)  Если этот элемент имеет форму
<CODE>(<VAR>регулярное-выражение</VAR> <VAR>функция-режима</VAR> <VAR>флаг</VAR>)</CODE>, и
<VAR>флаг</VAR> не <CODE>nil</CODE>, то после вызова <VAR>функции-режима</VAR> суффикс,
совпавший с <VAR>регулярным-выражением</VAR>, отбрасывается, и в списке
производится повторный поиск другого совпадения.


<P>
  Вы можете указать, какой основной режим должен использоваться для
редактирования определенного файла, с помощью текста специального вида в
первой непустой строке файла. В этой строке должно появиться имя режима,
до и после него должны стоять строки <SAMP>`-*-'</SAMP>.  В этой строке также
может появиться другой текст.  Например,



<PRE>
;-*-Lisp-*-
</PRE>

<P>
приказывает Emacs использовать режим Lisp.  Такое явное определение
отменяет значение по умолчанию, основанное на имени файла.  Отметим, что
точка с запятой используется для того, чтобы Лисп трактовал эту строку
как комментарий.


<P>
  Другой формат определения режима:



<PRE>
-*- mode: <VAR>имя-режима</VAR>;-*-
</PRE>

<P>
что позволяет вам также задать локальные переменные, как здесь:



<PRE>
-*- mode: <VAR>имя-режима</VAR>; <VAR>пер</VAR>: <VAR>значение</VAR>; ... -*-
</PRE>

<P>
See section <A HREF="emacs_36.html#SEC451">Локальные переменные в файлах</A>, для получения большей информации об этом.


<P>
<A NAME="IDX974"></A>
  Если содержимое файла начинается с <SAMP>`#!'</SAMP>, он может служить в
качестве выполняемой команды оболочки, которая работает путем запуска
интерпретатора, названного в первой строке этого файла.  Остальная часть
файла подается на вход интерпретатора.


<P>
  Когда вы обращаетесь к подобному файлу в Emacs, если имя файла не
задает основной режим, Emacs использует для выбора режима имя
интерпретатора в первой строке.  Если первая строка -- это имя
поддерживаемой программы-интерпретатора, такой как <SAMP>`perl'</SAMP> или
<SAMP>`tcl'</SAMP>, Emacs использует режим, подходящий для программ для этого
интерпретатора.  Переменная <CODE>interpreter-mode-alist</CODE> задает
соответствие между именами программ-интерпретаторов и основными
режимами.


<P>
  Когда первая строка начинается с <SAMP>`#!'</SAMP>, вы не можете (на многих
системах) использовать в ней <SAMP>`-*-'</SAMP>, поскольку при запуске
интерпретатора это ввело бы в заблуждение систему.  Поэтому в таких
файлах Emacs ищет <SAMP>`-*-'</SAMP> на второй строке, а не только на первой.
 
<A NAME="IDX975"></A>
  Когда вы обращаетесь к файлу, который не указывает, какой основной
режим использовать, или когда вы создаете новый буфер при помощи
<KBD>C-x b</KBD>, то используемым основным режимом является тот, что
определен переменной <CODE>default-major-mode</CODE>.  Обычно ее значение ---
это символ <CODE>fundamental-mode</CODE>, который задает режим Fudamental.
Если <CODE>default-major-mode</CODE> равна <CODE>nil</CODE>, то основной режим
берется из ранее выбранного буфера.


<P>
<A NAME="IDX976"></A>
  Если вы изменили основной режим буфера, вы можете вернуться к тому
основному режиму, который Emacs выбрал бы автоматически: используйте для
этого команду <KBD>M-x normal-mode</KBD>.  Это та же функция, которую
вызывает <CODE>find-file</CODE> для выбора основного режима.  Она также
обрабатывает список локальных переменных файла, если он есть.


<P>
<A NAME="IDX977"></A>
  Команды <KBD>C-x C-w</KBD> и <CODE>set-visited-file-name</CODE> переключают в
новый основной режим, если новое имя файла подразумевает выбор режима
(see section <A HREF="emacs_19.html#SEC111">Сохранение файлов</A>).  Однако, это не происходит, если содержимое буфера
задает основной режим; и некоторые "специальные" основные режимы не
допускают изменения режима.  Вы можете выключить эту возможность
переключения режимов, установив <CODE>change-major-mode-with-file-name</CODE>
в значение <CODE>nil</CODE>.
<P><HR><P>
Go to the <A HREF="emacs_1.html">first</A>, <A HREF="emacs_23.html">previous</A>, <A HREF="emacs_25.html">next</A>, <A HREF="emacs_46.html">last</A> section, <A HREF="emacs_toc.html">table of contents</A>.
</BODY>
</HTML>
