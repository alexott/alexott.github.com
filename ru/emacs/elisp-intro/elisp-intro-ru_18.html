<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on March, 10  2004 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>Программирование на Emacs Lisp: Инициализация Emacs</TITLE>

<META NAME="description" CONTENT="Программирование на Emacs Lisp: Инициализация Emacs">
<META NAME="keywords" CONTENT="Программирование на Emacs Lisp: Инициализация Emacs">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC191"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_17.html#SEC190"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC193"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_17.html#SEC185"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_24.html#SEC243">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 16. Ваш файл <TT>`.emacs'</TT> </H1>
<!--docid::SEC191::-->
<P>

"Вы не должны любить Emacs чтобы любить его" --- в этом
парадокслальном утверждении секрет GNU Emacs.  Просто, `из коробки',
Emacs --- это только редактор.  Большинство людей, которые
используют Emacs, настраивают его, чтобы он соответствовал их
собственным нуждам.
</P><P>

GNU Emacs в основном написан на Emacs Lisp; это значит, что записав
некоторое выражение на Emacs Lisp вы можете изменить или расширить
Emacs.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp-intro-ru_18.html#SEC192">Настройка Emacs по умолчанию</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp-intro-ru_18.html#SEC193">16.1 Общесистемные файлы инициализации</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp-intro-ru_18.html#SEC194">16.2 Установка переменных для одной сессии</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp-intro-ru_18.html#SEC195">16.3 Начало файла <TT>`.emacs'</TT></A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp-intro-ru_18.html#SEC196">16.4 Режимы Text и Auto Fill</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp-intro-ru_18.html#SEC197">16.5 Почтовые алиасы</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp-intro-ru_18.html#SEC198">16.6 Режим отступа по табуляции (Indent Tabs)</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp-intro-ru_18.html#SEC199">16.7 Некоторые привязки клавиш</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp-intro-ru_18.html#SEC200">16.8 Загрузка файлов</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp-intro-ru_18.html#SEC201">16.9 Автозагрузка</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp-intro-ru_18.html#SEC202">16.10 Простое расширение: <CODE>line-to-top-of-window</CODE></A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Создаем функции; связываем ее с клавишей.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp-intro-ru_18.html#SEC203">16.11 Таблицы ключей</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp-intro-ru_18.html#SEC204">16.12 Цвета X11</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Цвета в версии 19 для системы X Window.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp-intro-ru_18.html#SEC205">16.13 Разное для версии 19</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Автоматически изменяем размер минибуфера...</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp-intro-ru_18.html#SEC206">16.14 Измененная строка режима</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Настройка по умолчанию"></A>
<A NAME="SEC192"></A>
<H2> Настройка Emacs по умолчанию </H2>
<!--docid::SEC192::-->
<P>

Есть люди которых устраивает конфигурация Emacs по умолчанию.  Обычно
Emacs запускает режим С, когда вы редактируете С файл, запускает режим
Fortran когда вы редактируете программу на Fortran, и запускает режим
Fundamental когда вы редактируете простой файл с неизвестным
расширением.  Все это имеет смысл, если вы не знаете кто будет
использовать Emacs.  Кто знает, что захочет сделать человек с обычным
файлом?  Режим Fundamental самый подходящий для этого режим, точно
также как и режим С --- подходящий выбор для редактирования
программ на языке С.  Но если вы знаете кто и для каких целей будет
использовать Emacs --- вы сами --- тогда это имеет смысл
настроить Emacs.
</P><P>

Например, мне редко требуется режим Fundamental, когда я редактирую
обычный файл; в этом случае я хочу использовать режим Text.  Вот
почему я настраиваю Emacs так, чтобы он подходил мне.
</P><P>

Вы можете настроить или расширить Emacs написав или изменив файл
<TT>`~/.emacs'</TT>.  Это ваш персональный файл инициализации; его
содержимое написанное на Emacs Лиспе, говорит Emacsу что делать.
</P><P>

В этой главе описан простой файл <TT>`.emacs'</TT>; для получения
дополнительной информации смотрите section `The Init File' in <CITE>The GNU Emacs Manual</CITE>, и section `The Init File' in <CITE>The GNU Emacs Lisp Reference Manual</CITE>.
</P><P>

<A NAME="Общесистемная инициализация"></A>
<HR SIZE="6">
<A NAME="SEC193"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC194"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC192"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_24.html#SEC243">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 16.1 Общесистемные файлы инициализации </H2>
<!--docid::SEC193::-->
<P>

<A NAME="IDX82"></A>
<A NAME="IDX83"></A>
<A NAME="IDX84"></A>
Кроме вашего персонального инициализационого файла, Emacs
автоматически загружает различные инициализационные файлы для всех
пользователей компьютера, если они существуют.  Они имеют ту же самую
форму что и ваш файл <TT>`.emacs'</TT>, но загружаются всеми.
</P><P>

Два общесистемных файла инициализации <TT>`site-load.el'</TT> и
<TT>`site-init.el'</TT> загружаются в Emacs и затем `дампируются' если
создается `дампированная' версия Emacs, как обычные файлы.
(Дампированный Emacs загружается более быстро.  Однако, если однажды
файл загружен и дампирован, то изменения в нем не приведут к изменению
поведения Emacs если вы сами не загрузите или не передампируете
Emacs). See section `Building Emacs' in <CITE>The GNU Emacs Lisp Reference Manual</CITE>, и файл <TT>`INSTALL'</TT> в дистрибутиве).
</P><P>

Три других общесистемных файла инициализации загружаются автоматически
каждый раз, когда вы запускаете Emacs, если они существуют.  Это файлы
<TT>`site-start.el'</TT>, который загружается <EM>перед</EM> вашим файлом
<TT>`.emacs'</TT>, файл <TT>`default.el'</TT> и файл для типа терминала,
которые оба загружаются <EM>после</EM> вашего файла <TT>`.emacs'</TT>.
</P><P>

Установки и определения в вашем файле <TT>`.emacs'</TT> перепишут
конфликтующие установки и определения в файле <TT>`site-start.el'</TT> если
он существует; но установки и определения в файле <TT>`default.el'</TT> и
файле типа терминала перепишут ваши установки в файле <TT>`.emacs'</TT>. (Вы
можете защитить споры с терминалом установив <CODE>term-file-prefix</CODE> в
<CODE>nil</CODE>.  See section <A HREF="elisp-intro-ru_18.html#SEC202">Простое расширение</A>.)
</P><P>

Файл <TT>`INSTALL'</TT> который поставляется с дистрибутивом, содержит
описание файлов <TT>`site-init.el'</TT> и <TT>`site-load.el'</TT>.
</P><P>

Файлы <TT>`loadup.el'</TT>, <TT>`startup.el'</TT> и <TT>`loaddefs.el'</TT>
управляют загрузкой Emacs.  Эти файлы находятся в каталоге <TT>`lisp'</TT>
дистрибутива Emacs и их стоит внимательно изучить и заново
использовать.
</P><P>

В файле <TT>`loaddefs.el'</TT> содержится много полезных предложений
насчет того, что можно поместить в ваш собственный файл <TT>`.emacs'</TT>
или в файл всего компьютера.
</P><P>

<A NAME="edit-options"></A>
<HR SIZE="6">
<A NAME="SEC194"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC193"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC195"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_24.html#SEC243">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 16.2 Установка переменных для одной сессии </H2>
<!--docid::SEC194::-->
<P>

Моя копия Emacs для версии 19.23 имеет 392 настройки которые вы можете
изменить с помощью команды <CODE>edit-options</CODE>.  Эти `настройки'
--- всего лишь переменные, которые мы уже видели раньше и определяли
их с помощью <CODE>defvar</CODE>.
</P><P>

Emacs определяет будет ли переменная легко устанавливаемой, в
зависимости от первого символа в ее строке документации; если первый
символ звездочка <SAMP>`*'</SAMP>, то эта переменная может быть переопределена
пользователем. (See section <A HREF="elisp-intro-ru_10.html#SEC117">Инициализация переменной с помощью <CODE>defvar</CODE></A>.)
</P><P>

Команда <CODE>edit-options</CODE> отображает все переменные в Emacs, которые
люди, которые создавали библиотеки Emacs Lisp, посчитали, что они
должны быть легко настраиваемые.  Это обеспечивает легкий в
использовании интерфейс для установки этих переменных.
</P><P>

С другой стороны, опции измененные с помощью <CODE>edit-options</CODE>
устанавливаются только для вашей текущей текущей сессии
редактирования.  Новые значения не сохраняются между сессиями.  Каждый
раз, когда стартует Emacs, он считывает первоночальное значение
<CODE>defvar</CODE> в исходной программе.  Чтобы сохранить изменение от
одной сессии к другой, вам нужно использовать выражение <CODE>setq</CODE> в
вашем файле <TT>`.emacs'</TT> или в каком нибудь другом файле, который
загружается каждый раз, когда вы запускаете сессию Emacs.
</P><P>

Я обычно использую команду <CODE>edit-options</CODE> для того, чтобы
посмотреть какие переменные я могу установить в моем файле
<TT>`.emacs'</TT>.  Я настоятельно рекомендую вам исследовать этот список.
</P><P>

Для получения дополнительной информации See section `Editing Variable Values' in <CITE>The GNU Emacs Manual</CITE>.
</P><P>

<A NAME="Начало файла <TT>`.emacs'</TT>"></A>
<HR SIZE="6">
<A NAME="SEC195"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC194"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC196"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_24.html#SEC243">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 16.3 Начало файла <TT>`.emacs'</TT> </H2>
<!--docid::SEC195::-->
<P>

Когда вы запускаете Emacs при этом загружается и ваш файл
<TT>`.emacs'</TT>, конечно если вы не задали в командной строке опцию
<SAMP>`-q'</SAMP>. (<CODE>emacs -q</CODE> даст вам ненастроенный Emacs).
</P><P>

В файле <TT>`.emacs'</TT> содержатся выражения на Emacs Lisp.  Часто это
не более чем выражения для установки некоторых значений; иногда это
определения функций.
</P><P>

See section `The Init File <TT>`~/.emacs'</TT>' in <CITE>The GNU Emacs Manual</CITE>, для получения короткого описания файла инициализации.
</P><P>

В этой главе мы будет обсуждать тоже самое, но эти примеры взяты из
полного, долго используюемого файла <TT>`.emacs'</TT> --- моего
собственного файла.
</P><P>

Первая часть состоит из комментария; напоминании себе.  Сейчас конечно
я все это помню, но когда я начинал, то я часто это забывал.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;;;; Bob's .emacs file
; Robert J. Chassell
; 26 September 1985 
</pre></td></tr></table></P><P>

Взгляните на дату!  Я начал этот файл уже довольно давно.  И с тех пор
я постоянно добавляю к нему что-то новое.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>; Каждый раздел в этом файле начинается с четырех знаков точка с
; запятой и каждое вхождение начинается со строки с трех точек с
; запятой.
</pre></td></tr></table></P><P>

Это описывает обычные соглашения для комментариев в Emacs Lisp.  Все
на строке^ что следует за точкой с запятой --- это комментарий.
Две, три и четыре точки с запятой используются как маркеры раздела и
подраздела.  (See section `Comments' in <CITE>The GNU Emacs Lisp Reference Manual</CITE>, для получения дополнительной информации о комментариях).
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;;;; Клавиша Помощи
; Control-h это клавиша помощи; 
; после того как вы нажали control-h, нажмите какую-нибудь букву
; означающую тему о которой вы хотите узнать.
; Для получения обьяснений о возможностях помощи, 
; нажмите control-h три раза подряд.
</pre></td></tr></table></P><P>

Только напоминание: для получения помощи нажмите <KBD>C-h</KBD> три раза
подряд.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>; Чтобы получить информацию о каком-нибудь режиме нажмите control-h m
; если данный режим включен для этого буфера.  Например, чтобы
; получить информацию о режиме mail, запустите режим mail и нажмите
; control-h m
</pre></td></tr></table></P><P>

`Помощь о режиме', как я это называю --- очень полезная
возможность.  Обычно она говорит вам все^ что вам надо знать.
</P><P>

Конечно вам не обязательно включать подобные комментарии в ваш файл
<TT>`.emacs'</TT>.  Я включил их в мой, поскольку я постоянно забывал о
помощи для режима и соглашениях о комментариях --- но я всегда мог
вспомнить об этом если заглядывал сюда.
</P><P>

<A NAME="Text и Auto-fill"></A>
<HR SIZE="6">
<A NAME="SEC196"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC195"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC197"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_24.html#SEC243">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 16.4 Режимы Text и Auto Fill </H2>
<!--docid::SEC196::-->
<P>

Сейчас мы рассмотрим часть которая `включает' основной режим Text и
вспомогательный режим Auto Fill.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;;; режим Text и режим Auto Fill
; Следующие две линии включают по умолчанию в Emacs режим Text 
; и режим Auto Fill --- это в самый раз для писателей, которые хотят
; писать прозу, а не программы.
(setq default-major-mode 'text-mode)
(add-hook 'text-mode-hook 'turn-on-auto-fill)
</pre></td></tr></table></P><P>

Это первая часть файла <TT>`.emacs'</TT> которая делает что-то реальное,
кроме напоминания забывчивому человеку!
</P><P>

В первой строке выражение в скобках говорит Emacs, что надо включать
режим Text когда он открывает файл и <EM>если</EM> там не надо включать
какой-нибудь другой режим, например, режим C.
</P><P>

<A NAME="IDX85"></A>
<A NAME="IDX86"></A>
<A NAME="IDX87"></A>
<A NAME="IDX88"></A>
Когда Emacs открывает файл, то он смотрит на расширение файла, если
оно существует.  (Расширение --- это часть файла которое идет
после знака <SAMP>`.'</SAMP>).  Если файл имеет расширение <SAMP>`.c'</SAMP> или
<SAMP>`.h'</SAMP>, то тогда Emacs включает режим С.  Также Emacs смотрит на
первую не пустую строку файла; если там написано <SAMP>`-*- C -*-'</SAMP>,
то тогда Emacs включает режим С.  Emacs автоматически обрабатывает
список расширений и спецификаций, которые он использует.  Кроме этого
Emacs анализирует последнюю страницу в каждом буфере и ищет там
"список локальных переменных", если он есть.
</P><P>

See section `How Major Modes are Chosen' in <CITE>The GNU Emacs Manual</CITE>.
</P><P>

See section `Local Variables in Files' in <CITE>The GNU Emacs Manual</CITE>.
</P><P>

Сейчас вернемся снова к нашему файлу <TT>`.emacs'</TT>.
</P><P>

Снова посмотрим на эту строку --- как же она работает?
</P><P>

<A NAME="IDX89"></A>
<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq default-major-mode 'text-mode)
</pre></td></tr></table></P><P>

Эта строка --- короткое, но завершенное выражение Emacs Lisp.
</P><P>

Мы уже знакомы с <CODE>setq</CODE>.  Это выражение присваивает переменной
<CODE>default-major-mode</CODE> соответствующее значение, в нашем случае это
<CODE>text-mode</CODE>.  Апостроф перед <CODE>text-mode</CODE> заставляет Emacs не
вычислять эту переменую, а взять ее как есть.  See section <A HREF="elisp-intro-ru_3.html#SEC28">Присваиваем Переменной Значение</A>, для того, чтобы вспомнить как
работает <CODE>setq</CODE>.  Основное, что здесь можно отметить, так это то,
что нет разницы между процедурой, которую вы используете для того,
чтобы установить переменную в своем файле <TT>`.emacs'</TT> и процедурой
где-то еще внутри Emacs.
</P><P>

Вот и вторая строка:
</P><P>

<A NAME="IDX90"></A>
<A NAME="IDX91"></A>
<TABLE><tr><td>&nbsp;</td><td class=example><pre>(add-hook 'text-mode-hook 'turn-on-auto-fill)
</pre></td></tr></table></P><P>

В этой строке команда <CODE>add-hook</CODE>, добавляет
<CODE>turn-on-auto-fill</CODE> к переменной, которая называется
<CODE>text-mode-hook</CODE>.  <CODE>turn-on-auto-fill</CODE> --- это имя
программы которая как вы уже наверное догадались включает режим Auto
Fill (Автозаполнение).
</P><P>

Каждый раз, когда Emacs включает режим Text, Emacs запускает команды
которые `прицеплены' к режиму Text.  Поэтому, каждый раз, когда Emacs
включает режим Text, то Emacs также включает и вспомогательный режим
Auto Fill.
</P><P>

Коротко говоря, первая строка заставляет Emacs включить режим Text
тогда, когда вы открываете какой-нибудь файл, если ни расширение
файла, ни первая не пустая строка в файле, ни список локальных
переменных не заставят Emacs делать что-то другое.
</P><P>

Режим Text, кроме других действий, также устанавливает таблицу
синтаксиса для удобной работы писателей.  В режиме Text Emacs считает
апостроф такой-же частью слова как и букву; но Emacs не считает точку
или пробел такой-же частью слова.  То есть, <KBD>M-f</KBD> переместит
курсор через слово <SAMP>`it's'</SAMP>.  С другой стороны, в коде на языке C
комбинация<KBD>M-f</KBD> остановит курсор как раз после буквы <SAMP>`t'</SAMP> в
слове <SAMP>`it's'</SAMP>.
</P><P>

Вторая строка заставляет Emacs включать режим Auto Fill, при включении
режима Text.  В режиме Auto Fill Emacs автоматически вставляет символ
новой строки в том случае, когда строка слишком широка и переносит
дополнительную часть строки вниз к следующей линии.  Emacs разбивает
строки между словами, а не внутри них.
</P><P>

Когда режим Auto Fill отключен, то строки продолжают расти вправо, по
мере их набора. В зависимости от того, в какое значение вы установили
переменную <CODE>truncate-lines</CODE>, набираемые вами слова либо будут теряться
за правой стороной экрана, либо будут показаны в несколько неудобном
формате, в виде продолжающейся строки экрана.
</P><P>

<A NAME="Почтовые алиасы"></A>
<HR SIZE="6">
<A NAME="SEC197"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC196"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC198"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_24.html#SEC243">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 16.5 Почтовые алиасы </H2>
<!--docid::SEC197::-->
<P>

Здесь приведено выражение a <CODE>setq</CODE> для `включения' почтовых
алиасов, вместе с другими заметками.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;;; Режим Mail (почта)
; Для входа в режим mail, наберите `C-x m'
; Для запуска RMAIL (для чтения почты), 
; наберите `M-x rmail'

(setq mail-aliases t)
</pre></td></tr></table></P><P>

<A NAME="IDX92"></A>
Данная команда <CODE>setq</CODE> устанавливает значение переменной
<CODE>mail-aliases</CODE> равным <CODE>t</CODE>. Поскольку <CODE>t</CODE> обозначает
истинное значение, то данная строка говорит, "Да, используйте
почтовые алиасы".
</P><P>

Почтовые алиасы являются удобными сокращениями для длинных адресов
электронной почты, или списков адресов электронной почты.  Алиасы
хранятся в файле <TT>`~/.mailrc'</TT>.  Вы записываете алиасы примерно
так:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>alias geo george@foobar.wiz.edu
</pre></td></tr></table></P><P>

Когда вы пишете сообщение к George, то адресуете его к <SAMP>`geo'</SAMP>; а
почтовая программа автоматически раскроет <SAMP>`geo'</SAMP> до полного
адреса.
</P><P>

<A NAME="Режим Indent Tabs"></A>
<HR SIZE="6">
<A NAME="SEC198"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC197"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC199"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_24.html#SEC243">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 16.6 Режим отступа по табуляции (Indent Tabs) </H2>
<!--docid::SEC198::-->
<P>

По умолчанию, Emacs при форматировании области вставляет табуляцию
вместо нескольких пробелов.  (Например, вы можете одновременно сделать
отступ для множества строк с помощью команды <CODE>indent-region</CODE>).
Табуляция выглядит прекрасно на терминале или при обычной печати, но
дает плохой результат когда вы используете TeX или Texinfo,
поскольку TeX игнорирует табуляцию.
</P><P>

Следующая строка отключает режим Indent Tabs:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;;; Предотвращение лишней табуляции
(setq-default indent-tabs-mode nil)
</pre></td></tr></table></P><P>

Заметьте, что эта строка использует команду <CODE>setq-default</CODE>, а не
<CODE>setq</CODE>, которую мы видели раньше. Команда <CODE>setq-default</CODE>
устанавливает значения только в тех буферах, которые не имеют своего
собственного значения для переменной.
</P><P>

See section `Tabs vs. Spaces' in <CITE>The GNU Emacs Manual</CITE>.
</P><P>

See section `Local Variables in Files' in <CITE>The GNU Emacs Manual</CITE>.
</P><P>

<A NAME="Привязки клавиш"></A>
<HR SIZE="6">
<A NAME="SEC199"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC198"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC200"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_24.html#SEC243">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 16.7 Некоторые привязки клавиш </H2>
<!--docid::SEC199::-->
<P>

Теперь рассмотрим некоторые мои любимые привязки клавиш:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;;; Сравнение окон
(global-set-key "\C-cw" 'compare-windows)
</pre></td></tr></table></P><P>

<A NAME="IDX93"></A>
<CODE>compare-windows</CODE> --- это отличная команда, которая
сравнивает текст в текущем окне, с текстом в следующем окне. Она
начинает сравнение с точки в каждом окне, и перемещается по тексту в
каждом из окон настолько, насколько они совпадают. Я постоянно
использую эту команду. 
</P><P>

Этот пример также показывает как установить глобальную привязку
клавиши, для всех режимов.
</P><P>

<A NAME="IDX94"></A>
<A NAME="IDX95"></A>
<A NAME="IDX96"></A>
Это делает команда <CODE>global-set-key</CODE>. За нею следует привязка
клавиш. В файле <TT>`.emacs'</TT>, привязки клавиш записываются так, как
показано: <CODE>\C-c</CODE> обозначает `control-c', что означает
`одновременно нажмите клавиши control и <KBD>c</KBD>'. Знак <CODE>w</CODE>
означает, `нажмите клавишу <KBD>w</KBD>'.  Привязка окружена двойными
кавычками. Вы документации вы должны записывать это сочетание в виде
<KBD>C-c w</KBD>.  (Если вы хотите сделать привязку для клавиши <KBD>META</KBD>,
например <KBD>M-c</KBD>, а не для клавиши <KBD>CTL</KBD>, то вы должны написать
<CODE>\M-c</CODE>.  Для ознакомления с подробной информацией See section `Rebinding Keys in Your Init File' in <CITE>The GNU Emacs Manual</CITE>.)
</P><P>

Командой, которая запускается данным сочетанием клавиш является
<CODE>compare-windows</CODE>. Заметьте, что перед <CODE>compare-windows</CODE>
стоит одинарная кавычка; в противном случае, Emacs сначала попытается
оценить символ, чтобы определить его значение.
</P><P>

Эти три вещи --- двойные кавычки, обратный слеш перед <SAMP>`C'</SAMP> и
одинарная кавычка являются необходимыми частями привязки клавиш,
которые я постоянно забываю. К счастью я помню, что я могу заглянуть в
мой файл <TT>`.emacs'</TT> и адаптировать имеющийся там код.
</P><P>

Теперь вернемся к самой привязке: <KBD>C-c w</KBD>. Это сочетание
объединяет префиксную клавишу, <KBD>C-c</KBD>, с отдельным символом, в
данном случае, <KBD>w</KBD>. Этот набор клавиш, <KBD>C-c</KBD> за которым
следует одиночный символ, строго зарезервирован для использования
пользователями. Если вы даже пишете расширение для Emacs, то
пожалуйста избегайте использования любой из этих клавиш для публичного
использования. Вместо этого создайте сочетание, подобное <KBD>C-c
C-w</KBD>. В противном случае мы выйдем за пределы `собственных' клавиш.
</P><P>

Вот другая привязка, с комментарием:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;;; Привязка для `occur'
; Я часто использую команду occur, так что я связываю ее с клавишей:
(global-set-key "\C-co" 'occur)
</pre></td></tr></table></P><P>

<A NAME="IDX97"></A>
Команда <CODE>occur</CODE> показывает все строки в текущем буфере, которые
подпадают под регулярное выражение. Совпадающие строки показываются в
буфере, называющемся <TT>`*Occur*'</TT>. Этот буфер работает как меню для
перехода к совпадениям.
</P><P>

<A NAME="IDX98"></A>
<A NAME="IDX99"></A>
Вот как можно удалить привязку клавиш, так что она больше не будет
работать:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;;; Удалить привязку `C-x f'
(global-unset-key "\C-xf")
</pre></td></tr></table></P><P>

Вот причина для удаления привязок: я обнаружил, что я регулярно
набираю <KBD>C-x f</KBD> тогда, когда я хочу набрать <KBD>C-x C-f</KBD>.
Вместо нахождения файла, что я хочу сделать, я случайно устанавливаю
ширину для заполненого текста, почти всегда в значение, которое я не
хочу иметь. Поскольку я очень редко устанавливаю ширину заполнения
текста, то я просто удаляю привязку, 
</P><P>

<A NAME="IDX100"></A>
<A NAME="IDX101"></A>
Следующая команда переопределяет существующую клавишу:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;;; Переопределяет `C-x C-b' для вызова `buffer-menu'
(global-set-key "\C-x\C-b" 'buffer-menu)
</pre></td></tr></table></P><P>

По умолчанию, сочетание <KBD>C-x C-b</KBD> запускает команду
<CODE>list-buffers</CODE>.  Эта команда выводит список ваших буферов в
<EM>другом</EM> окне.  Поскольку я почти всегда хочу что-то сделать в
этом окне, то я предпочитаю использовать команду <CODE>buffer-menu</CODE>,
которая не только выводит список буферов, но и перемещает точку в это
окно.
</P><P>

<A NAME="Загрузка файлов"></A>
<HR SIZE="6">
<A NAME="SEC200"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC199"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC201"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_24.html#SEC243">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 16.8 Загрузка файлов </H2>
<!--docid::SEC200::-->
<P>

Много людей из сообщества GNU Emacs написали расширения к Emacs.  По
ходу времени, эти расширения часто включаются в новые
выпуски. Например, пакеты Calendar и Diary теперь являются частью
стандартного дистрибутива Emacs версии 19; они не были частью
стандартного дистрибутива Emacs версии 18.
</P><P>

(Calc, который я считаю важной частью Emacs, мог бы быть частью
стандартного дистрибутива, за тем исключением, что он слишком большой
и поставляется отдельно).
</P><P>

Вы можете использовать команду <CODE>load</CODE> для оценки всего файла и
таким образом, установки всех функций и переменных из файла в Emacs.
Например:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(load "~/emacs/kfill")
</pre></td></tr></table></P><P>

Эта команда оценивает, т.е. загружает файл <TT>`kfill.el'</TT> (или если
существует, то более быстрый, откомпилированный файл <TT>`kfill.elc'</TT>)
из подкаталога <TT>`emacs'</TT> вашего домашнего каталога.
</P><P>

(файл <TT>`kfill.el'</TT> был переделан Бобом Вайнером (Bob Weiner) из
пакета <TT>`filladapt.el'</TT>, написанного Kyle E. Jones и
"обеспечивает нормальный, ровный перенос слов и заполнение параграфов
с обработкой отступов, включенного текста из сообщений почты и
новостей, а также комментариев языков Lisp, C++, PostScript или
командного процессора." Я постоянно его использую и надеюсь, что он
будет включен в стандартный дистрибутив).
</P><P>

<A NAME="IDX102"></A>
Если вы загружаете много расширений, как это делаю я, то вы вместо
указания точного положения файла. как было показано выше, вы можете
указывать этот каталог как часть списка <CODE>load-path</CODE> самого Emacs.
Затем, когда Emacs загружает файл, то он будет производить поиск в
этом каталоге, точно также как и в списке каталогов по
умолчанию. (Значение по умолчанию указывается в файле <TT>`paths.h'</TT>
при сборке Emacs).
</P><P>

Следующая команда добавляет ваш каталог <TT>`~/emacs'</TT> в существующий
список путей загрузки:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;;; Emacs Load Path
(setq load-path (cons "~/emacs" load-path))
</pre></td></tr></table></P><P>

В данном случае, функция <CODE>load-library</CODE> является интерактивным
интерфейсом к функции <CODE>load</CODE>. Полный текст функции выглядит так:
</P><P>

<A NAME="IDX103"></A>
<TABLE><tr><td>&nbsp;</td><td class=example><pre>(defun load-library (library)
  "Загружает библиотеку с именем LIBRARY.
Это интерфейс к функции `load'."
  (interactive "sLoad library: ")
  (load library))
</pre></td></tr></table></P><P>

Имя функции, <CODE>load-library</CODE>, пришло от использования слова
`библиотека (library)' в качестве общепринятого синонима для слова
`файл (file)'.  Исходный текст для команды <CODE>load-library</CODE>
находится в библиотеке <TT>`files.el'</TT>.
</P><P>

Другой интерактивной командой, которая делает немного отличающуюся
работу, является <CODE>load-file</CODE>.  See section `Libraries of Lisp Code for Emacs' in <CITE>The GNU Emacs Manual</CITE>, для получения информации о
различии между <CODE>load-library</CODE> и этой командой.
</P><P>

<A NAME="Автозагрузка"></A>
<HR SIZE="6">
<A NAME="SEC201"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC200"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC202"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_24.html#SEC243">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 16.9 Автозагрузка </H2>
<!--docid::SEC201::-->
<P>

Вместо установки функции путем загрузки файла, которые ее содержит,
или путем оценки определения функции, вы можете сделать функцию
доступной, но не устанавливать её до её первого вызова. Эта техника
называется <EM>автозагрузкой (autoloading)</EM>.
</P><P>

Когда вы выполняете автозагруженные функцию, то Emacs автоматически
оценивает файл, который содержит ее определение, и затем вызывает саму
функцию. 
</P><P>

При использовании автозагружаемых функций Emacs запускается быстрее,
поскольку библиотеки не загружаются сразу; но вам нужно будет
подождать немного времени при первом использовании такой функции,
поскольку оценивается файл, содержащий данную функцию.
</P><P>

Редко используемые функции часто делают автозагружаемыми. Библиотека
<TT>`loaddefs.el'</TT> содержит сотни автозагружаемых функций, начиная с
<CODE>bookmark-set</CODE> и до <CODE>wordstar-mode</CODE>. Конечно, вы можете
часто использовать `редкие' функции. В этом случае вы должны загрузить
файл с данной функцией, с помощью выражения <CODE>load</CODE> в вашем файле
<TT>`.emacs'</TT>.
</P><P>

В моем файле <TT>`.emacs'</TT> для Emacs версии 19.23, я загружаю 17
библиотек, которые содержат функции, которые иначе были бы сделаны
автозагружаемыми. (В действительности, было бы лучше включить эти
файлы в мой `дампированный' Emacs при его сборке, но я просто забыл
это сделать. Для получения дополнительной информации о дампировании
See section `Building Emacs' in <CITE>The GNU Emacs Lisp Reference Manual</CITE>, и файл <TT>`INSTALL'</TT>).
</P><P>

Вы также можете захотеть включить выражения автозагрузки в ваш файл
<TT>`.emacs'</TT>.  <CODE>autoload</CODE> является встроенной функцией, которая
берет три аргумента, три последних могут быть необязательными. Первым
аргументом является имя автозагружаемой функции; второй аргумент
--- имя файла с автозагружаемой функцией. Третий аргумент --- это
документация для функции, а четвертый показывает, может ли функция
вызываться интерактивно. Пятый аргумент задает тип объекта ---
<CODE>autoload</CODE> может обрабатывать макросы или наборы ключей, точно
также как и функции (по умолчанию это функция).
</P><P>

Вот типичный пример:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(autoload 'html-helper-mode
  "html-helper-mode" "Edit HTML documents" t)
</pre></td></tr></table></P><P>

Это выражение производит автоматическую загрузку функции
<CODE>html-helper-mode</CODE>. Она берет ее из файла
<TT>`html-helper-mode.el'</TT> (или, если он существует, из
откомпилированного файла <TT>`html-helper-mode.elc'</TT>.) Файл должен
находиться в каталоге указанном в <CODE>load-path</CODE>. Документация
сообщает, что этот режим поможет вам редактировать документы
написанные с использованием HTML.  Вы можете запустить этот режим
интерактивно, с помощью команды <KBD>M-x html-helper-mode</KBD>.  (Вам
нужно продублировать документацию из функции в выражении для
автоматической загрузки, поскольку сама функция еще не загружена, так
что ее документация еще не доступна).
</P><P>

Для получения дополнительной информации See section `Autoload' in <CITE>The GNU Emacs Lisp Reference Manual</CITE>.
</P><P>

<A NAME="Простое расширение"></A>
<HR SIZE="6">
<A NAME="SEC202"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC201"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC203"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_24.html#SEC243">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 16.10 Простое расширение: <CODE>line-to-top-of-window</CODE> </H2>
<!--docid::SEC202::-->
<P>

Вот простое расширение для Emacs, которое перемещает точку строки в
начало окна. Я постоянно его использую, чтобы сделать текст более
легким для чтения.
</P><P>

Вы можете поместить следующий код в отдельный файл и затем загрузить
его из вашего файла <TT>`.emacs'</TT>, или вы можете включить его в ваш
файл <TT>`.emacs'</TT>.
</P><P>

Вот определение:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;;; Переместить строку в начало окна;  
;;; заменяем трехступенчатую комбинацию  C-u 0 C-l
(defun line-to-top-of-window ()
  "Move the line point is on to top of window."
  (interactive) 
  (recenter 0))
</pre></td></tr></table></P><P>

Теперь о привязке клавиш.
</P><P>

Хотя почти все содержимое файла <TT>`.emacs'</TT> для Emacs версии 18
работает и с версией 19, но все равно есть некоторые различия (также6
существуют новые возможности в Emacs 19).
</P><P>

В Emacs версии 19, вы можете записывать функциональные клавиши в виде
<SAMP>`[f6]'</SAMP>. В 18-й версии, вы должны были указывать сочетания
символов посылаемых клавиатурой когда вы нажимали функциональную
клавишу. Например, клавиатура Zenith 29 посылалала <KBD>ESC P</KBD> когда я
нажимал ее шестую функциональную клавишу; а клавиатура Ann Arbor
Ambassador посылала сочетание <KBD>ESC O F</KBD>. Вы можете записывать эти
сочетания как <SAMP>`\eP'</SAMP> и <SAMP>`\eOF'</SAMP>.
</P><P>

В моей файле <TT>`.emacs'</TT> для 18-й версии, я связывал
<CODE>line-to-top-of-window</CODE> с клавишей, которая зависела от типа
терминала:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(defun z29-key-bindings () 
  "Function keybindings for Z29 terminal."
  ;; <small>...</small>
  (global-set-key "\eP" 'line-to-top-of-window))

(defun aaa-key-bindings () 
  "Function keybindings for Ann Arbor Ambassador"
  ;; <small>...</small>
  (global-set-key "\eOF" 'line-to-top-of-window))
</pre></td></tr></table></P><P>

(Вы можете обнаружить, что посылают функциональные клавиши нажав на
функциональную клавишу, а затем набрав <KBD>C-h l</KBD> (это функция
<CODE>view-lossage</CODE>), которая отображает последние 100 введенных
сочетаний клавиш).
</P><P>

После указания сочетания клавиш, я оцениваю выражение, которое
производит выбор между сочетаниями клавиш на основе типа используемого
терминала. Однако, до того, как я сделаю это, я отключу
предопределенное, специфичное для терминала сочетание клавиш, которое
перевесит сочетание определенное в файле <TT>`.emacs'</TT> если такое
будет.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;;; Отключаем предопределенное для терминала сочетание клавиш

; Следующий код отключает предопределенные, специфичные для терминала
; сочетания клавиш, такие как сочетания для vt100 в файле
; lisp/term/vt100.el.  
; Если нет предопределенных для терминала сочетаний клавиш, то
; вы можете закомментировать этот код.

(setq term-file-prefix nil)
</pre></td></tr></table></P><P>

Вот само выражение выбора:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(let ((term (getenv "TERM")))
  (cond 
   ((equal term "z29") (z29-key-bindings))
   ((equal term "aaa") (aaa-key-bindings))
   (t (message
       "No binding for terminal type %s."
       term))))
</pre></td></tr></table></P><P>

В Emacs версии 19, функциональные клавиши (также как и кнопки мыши, и
не-ASCII символы) записываются в квадратных скобках, без знака
вопроса.  Я связываю <CODE>line-to-top-of-window</CODE> с клавишей <KBD>F6</KBD>
с помощью следующего выражения:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key [f6] 'line-to-top-of-window)
</pre></td></tr></table></P><P>

Намного проще!
</P><P>

Для получения дополнительной информации, смотрите section `Rebinding Keys in Your Init File' in <CITE>The GNU Emacs Manual</CITE>.
</P><P>

<A NAME="IDX104"></A>
<A NAME="IDX105"></A>
Если вы используете и Emacs 18 и Emacs 19, то вы можете выбрать какой
код оценивать, с помощью следующего условного оператора:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(if (string=
     (int-to-string 18)
     (substring (emacs-version) 10 12))
    ;; оцениваем код для версии 18
    (progn
       <small>...</small> )
  ;; иначе, оцениваем код для версии 19
  <small>...</small>
</pre></td></tr></table></P><P>

<A NAME="Таблицы ключей"></A>
<HR SIZE="6">
<A NAME="SEC203"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC202"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC204"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_24.html#SEC243">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 16.11 Таблицы ключей </H2>
<!--docid::SEC203::-->
<P>

Emacs использует <EM>таблицы ключей (keymaps)</EM> для записи того, какие
клавиши вызывают какие команды. Отдельные режимы, такие как режим C
или режим Text, имеют свои собственные таблицы ключей; специфические
для режима таблицы ключей переопределяют глобальную таблицу ключей,
которая делится между всеми буферами.
</P><P>

Функция <CODE>global-set-key</CODE> связывает, или переопределяет, ключ в
глобальной таблице ключей. Наприме, следующий код связывает сочетание
<KBD>C-c C-l</KBD> с функцией <CODE>line-to-top-of-window</CODE>:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key "\C-c\C-l" 'line-to-top-of-window))
</pre></td></tr></table></P><P>

Специфические для режимов таблицы ключей связываются с использованием
функции <CODE>define-key</CODE>, которая принимает в качестве аргументов
нужную таблицу ключей, ключ и команду. Например, мой файл
<TT>`.emacs'</TT> содержит следующее выражение для связывания команды
<CODE>texinfo-insert-@group</CODE> с сочетанием <KBD>C-c C-c g</KBD>:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define-key texinfo-mode-map "\C-c\C-cg"
  'texinfo-insert-@group)
</pre></td></tr></table></P><P>

Сама функция <CODE>texinfo-insert-@group</CODE> --- это небольшое
расширение к режиму Texinfo, которое вставляет <SAMP>`@group'</SAMP> в файл
Texinfo.  Я использую эту команду все время и предпочитаю набирать три
буквы <KBD>C-c C-c g</KBD> вместо шести --- <KBD>@ g r o u p</KBD>.  (таг
<SAMP>`@group'</SAMP> и соответствующий ему <SAMP>`@end group'</SAMP> являются
командами, которые держат заключенный в них текст без разрывов между
страницами; многие многостроковые примеры в этой книге окружены тагами
<SAMP>`@group <small>...</small> @end group'</SAMP>.)
</P><P>

Вот определение функции <CODE>texinfo-insert-@group</CODE>:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(defun texinfo-insert-@group ()
  "Insert the string @group in a Texinfo buffer."
  (interactive)
  (beginning-of-line)
  (insert "@group\n"))
</pre></td></tr></table></P><P>

(Конечно, я должен был использовать режим Abbrev для сокращения
набора, вместо того, чтобы писать функцию для вставки слова; но я
предпочитаю чтобы сочетания клавиш были похожими на привязки клавиш
режима Texinfo).
</P><P>

Вы увидите множество выражений <CODE>define-key</CODE> в файле 
<TT>`loaddefs.el'</TT>, а также в разных библиотеках, таких как
<TT>`c-mode.el'</TT> и <TT>`lisp-mode.el'</TT>.
</P><P>

See section `Customizing Key Bindings' in <CITE>The GNU Emacs Manual</CITE>, для section `Keymaps' in <CITE>The GNU Emacs Lisp Reference Manual</CITE>, получения подробной информации о таблицах ключей.
</P><P>

<A NAME="Цвета X11"></A>
<HR SIZE="6">
<A NAME="SEC204"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC203"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC205"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_24.html#SEC243">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 16.12 Цвета X11 </H2>
<!--docid::SEC204::-->
<P>

Вы можете указывать цвета при использовании Emacs версии 19 вместе с
оконной системой MIT X.  (Все предыдущие примеры должны работать и в
18-й версии Emacs и в 19-й версии; а данный пример работает только с
Emacs версии 19).
</P><P>

Я ненавижу цвета по умолчанию и указываю свои собственные.
</P><P>

Большинство моих настроек указаны в различных файлах инициализации X. Я
пишу заметки для себя в моем файле  <TT>`.emacs'</TT> для того, чтобы
напомнить себе что я делал:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;; Я использую оконный менеджер TWM;
;; в моем файле ~/.xsession указано:
;    xsetroot -solid navyblue -fg white
</pre></td></tr></table></P><P>

В действительности корневое дерево X не является частью Emacs,но я все
равно пишу себе напоминание.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;; В моем файле ~/.Xresources указано:
;     XTerm*Background:    sky blue
;     XTerm*Foreground:    white
;     emacs*geometry:      =80x40+100+0
;     emacs*background:    blue
;     emacs*foreground:    grey97
;     emacs*cursorColor:   white
;     emacs*pointerColor:  white
</pre></td></tr></table></P><P>

Вот выражения в моем файле <TT>`.emacs'</TT>, которые устанавливают
значения:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;;; Устанавливают цвета для isearch и протягивания
(set-face-foreground 'highlight "white" )
(set-face-background 'highlight "slate blue")
(set-face-background 'region    "slate blue")
(set-face-background
 'secondary-selection "turquoise")

;; Устанавливает цвета подсветки календаря
(setq calendar-load-hook
      '(lambda () 
         (set-face-foreground 'diary-face   "skyblue")
         (set-face-background 'holiday-face "slate blue")
         (set-face-foreground 'holiday-face "white")))
</pre></td></tr></table></P><P>

Различные оттенки голубого успокаивают мои глаза и не дают мне видеть
блеск экрана.
</P><P>

<A NAME="Разное для V19"></A>
<HR SIZE="6">
<A NAME="SEC205"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC204"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC206"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_24.html#SEC243">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 16.13 Разное для версии 19 </H2>
<!--docid::SEC205::-->
<P>

Вот несколько настроек для Emacs версии 19:
</P><P>

<UL>
<LI>
Автоматически изменяет размер буфера при необходимости:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(resize-minibuffer-mode 1)
(setq resize-minibuffer-mode t)
</pre></td></tr></table></P><P>

<LI>
Включает подсветку для строки поиска:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq search-highlight t)
</pre></td></tr></table></P><P>

<LI>
Отображает меню в каждом фрейме и поднимает его когда мышь
перемещается в него.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq default-frame-alist
      '((menu-bar-lines . 1)
        (auto-lower . t)
        (auto-raise . t)))
</pre></td></tr></table></P><P>

<LI>
Задает форму и цвет курсора мыши:
<TABLE><tr><td>&nbsp;</td><td class=example><pre>; Формы курсора определены в файле
; `/usr/include/X11/cursorfont.h'; 
; Например, курсор `target' имеет номер 128;
; а курсор  `top_left_arrow' имеет номер 132.

(let ((mpointer (x-get-resource "*mpointer"
                                "*emacs*mpointer")))
  ;; Если мы еще не установили курсор мыши, то устанавливаем его
  ;;     иначе, оставляем его как есть:
  (if (eq mpointer nil)
      (setq mpointer "132")) ; top_left_arrow
  (setq x-pointer-shape (string-to-int mpointer))
  (set-mouse-color "white"))
</pre></td></tr></table></UL>
<P>

<A NAME="Строка режима"></A>
<HR SIZE="6">
<A NAME="SEC206"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC205"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_24.html#SEC243">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 16.14 Измененная строка режима </H2>
<!--docid::SEC206::-->
<P>

В заключение  я расскажу о свойстве, которое я действительно люблю: об
измененной строке режима.
</P><P>

Поскольку я работаю по сети, я заменил слово <SAMP>`Emacs: '</SAMP>, которое
обычно написано на левой стороне строки режима, на имя системы ---
в противном случае я забываю какой компьютер я использую.  В
дополнение я отображаю каталог по умолчанию, чтобы не забыть где я
нахожусь и указываю строку на которой нахожусь, с помощью слова <SAMP>`Line'</SAMP>.
Мой файл <TT>`.emacs'</TT> выглядит следующим образом:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq mode-line-system-identification  
  (substring (system-name) 0
             (string-match "\\..+" (system-name))))

(setq default-mode-line-format
      (list ""
            'mode-line-modified
            "&#60;"
            'mode-line-system-identification
            "&#62; "
            "%14b"
            " "
            'default-directory
            " "
            "%[(" 
            'mode-name 
            'minor-mode-alist 
            "%n" 
            'mode-line-process  
            ")%]--" 
             "Line %l--"
            '(-3 . "%P")
            "-%-"))

;; Установим новый формат по умолчанию.
(setq mode-line-format default-mode-line-format)
</pre></td></tr></table></P><P>

Я устанавливаю строку режима <EM>по умолчанию</EM>, так что это позволяет
различным режимам, таким как Info, переопределить ее. Многие элементы
списка объясняют сами себя: <CODE>mode-line-modified</CODE> --- это
переменная, которая показывает был ли буфер изменен, а <CODE>mode-name</CODE>
сообщает нам имя режима, ну и т.п.
</P><P>

Строка <SAMP>`"%14b"'</SAMP> отображает имя буфера (используя функцию
<CODE>buffer-name</CODE>, с которой мы уже знакомы); число `14' указывает
максимальное число символов, которое будет отображено.  Когда имя имеет
меньшую длину, то оно дополняется пробелами до нужной длины.  <SAMP>`%['</SAMP>
и <SAMP>`%]'</SAMP> вызывают появление квадратных скобок на каждом рекурсивном
уровне редактирования.  <SAMP>`%n'</SAMP> вызывает появление слова `Narrow' при
действии сужения текста. <SAMP>`%P'</SAMP> показывает размер буфера, который
выше низа окна в процентах, или словами `Top' (самый верх), `Bottom'
(самый низ) или `All' (весь буфер).  (маленькая буква <SAMP>`p'</SAMP> сообщает
вам процент выше <EM>верхней</EM> части окна).  <SAMP>`%-'</SAMP> вставляет нужное
количество знаков минус для заполнения строки.
</P><P>

В Emacs версии 19.29 и более поздних, вы можете использовать
<CODE>frame-title-format</CODE> для установки заголовка окна Emacs. Эта
переменная имеет ту же структуру, что и <CODE>mode-line-format</CODE>.
</P><P>

Формат строки режима описан в section `Mode Line Format' in <CITE>The GNU Emacs Lisp Reference Manual</CITE>.
</P><P>

Помните, "Вы не должны любить Emacs чтобы любить его" --- ваш
собственный Emacs может иметь отличающиеся цвета, другие команды и
клавиши, чем в настройках Emacs по умолчанию.
</P><P>

С другой стороны, если вы хотите получить Emacs без единой настройки, то
наберите:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>emacs -q
</pre></td></tr></table></P><P>

Это запустит Emacs, который не загрузит ваш файл инициализации
<TT>`~/.emacs'</TT>. Вы получите Emacs с настройками по умолчанию. И ничего
больше.
</P><P>

<A NAME="Отладка"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_18.html#SEC191"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_19.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_24.html#SEC243">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp-intro-ru_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
on <I>March, 10  2004</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">_uacct = "UA-78697-3"; urchinTracker(); </script></body>
</HTML>
