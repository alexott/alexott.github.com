<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<!-- Created by htmlize-1.34 in inline-css mode. -->
<html>
  <head>
    <title>emacs-rc-auto-insert.el</title>
  </head>
  <body style="color: #000000; background-color: #ebebeb;">
    <pre>
<span style="color: #666666;">;;; </span><span style="color: #666666;">emacs-rc-auto-insert.el --- 
</span>
<span style="color: #666666;">;; </span><span style="color: #666666;">Copyright (C) 2008 Alex Ott
</span><span style="color: #666666;">;;</span><span style="color: #666666;">
</span><span style="color: #666666;">;; </span><span style="color: #666666;">Author: alexott@gmail.com
</span><span style="color: #666666;">;; </span><span style="color: #666666;">Version: $Id: emacs-rc-auto-insert.el,v 0.0 2008/03/10 14:12:35 ott Exp $
</span><span style="color: #666666;">;; </span><span style="color: #666666;">Keywords: 
</span><span style="color: #666666;">;; </span><span style="color: #666666;">Requirements: 
</span><span style="color: #666666;">;; </span><span style="color: #666666;">Status: not intended to be distributed yet
</span>
<span style="color: #666666;">;; </span><span style="color: #666666;">auto-insert stuff
</span>(add-hook 'find-file-hooks 'auto-insert)
(setq auto-insert-directory (concat (getenv <span style="color: #008b00;">"HOME"</span>) <span style="color: #008b00;">"/emacs/auto-insert/"</span>))
(setq auto-insert 'other)
(setq auto-insert-query nil)

(setq auto-insert-alist '((<span style="color: #008b00;">"\\.muse$"</span> . [<span style="color: #008b00;">"insert.muse"</span>])
                          (<span style="color: #008b00;">"\\.sh$"</span> . [<span style="color: #008b00;">"insert.sh"</span> auto-update-defaults])
                          (<span style="color: #008b00;">"\\.lisp$"</span> . [<span style="color: #008b00;">"insert.lisp"</span> auto-update-defaults])
                          (<span style="color: #008b00;">"\\.el$"</span> . [<span style="color: #008b00;">"insert.el"</span> auto-update-defaults])
                          (<span style="color: #008b00;">"\\.erl$"</span> . [<span style="color: #008b00;">"insert.erl"</span> auto-update-defaults])
                          ))
(add-to-list 'auto-insert-alist '(<span style="color: #008b00;">".*/projects/.*\\.cpp$"</span> . [<span style="color: #008b00;">"insert-home.cpp"</span> auto-update-c-source-file]))
(add-to-list 'auto-insert-alist '(<span style="color: #008b00;">".*/projects/.*\\.h$"</span>   . [<span style="color: #008b00;">"insert-home.h"</span> auto-update-header-file]))
(add-to-list 'auto-insert-alist '(<span style="color: #008b00;">".*/projects/.*\\.hpp$"</span>   . [<span style="color: #008b00;">"insert-home.h"</span> auto-update-header-file]))
(add-to-list 'auto-insert-alist '(<span style="color: #008b00;">".*/projects/.*\\.c$"</span> . [<span style="color: #008b00;">"insert-home.cpp"</span> auto-update-c-source-file]))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">auto-replace-header-name</span> ()
  (<span style="color: #a020f0;">save-excursion</span>
    (<span style="color: #a020f0;">while</span> (search-forward <span style="color: #008b00;">"###"</span> nil t)
      (<span style="color: #a020f0;">save-restriction</span>
        (narrow-to-region (match-beginning 0) (match-end 0))
        (replace-match (upcase (file-name-nondirectory buffer-file-name)))
        (subst-char-in-region (point-min) (point-max) ?. ?_)
        (subst-char-in-region (point-min) (point-max) ?- ?_)
        ))
    )
  )

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">auto-replace-file-name</span> ()
  (<span style="color: #a020f0;">save-excursion</span>
    <span style="color: #666666;">;; </span><span style="color: #666666;">Replace @@@ with file name
</span>    (<span style="color: #a020f0;">while</span> (search-forward <span style="color: #008b00;">"(&gt;&gt;FILE&lt;&lt;)"</span> nil t)
      (<span style="color: #a020f0;">save-restriction</span>
        (narrow-to-region (match-beginning 0) (match-end 0))
        (replace-match (file-name-nondirectory buffer-file-name) t)
        ))
    )
  )

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">auto-replace-file-name-no-ext</span> ()
  (<span style="color: #a020f0;">save-excursion</span>
    <span style="color: #666666;">;; </span><span style="color: #666666;">Replace @@@ with file name
</span>    (<span style="color: #a020f0;">while</span> (search-forward <span style="color: #008b00;">"(&gt;&gt;FILE_NO_EXT&lt;&lt;)"</span> nil t)
      (<span style="color: #a020f0;">save-restriction</span>
        (narrow-to-region (match-beginning 0) (match-end 0))
        (replace-match (file-name-sans-extension (file-name-nondirectory buffer-file-name)) t)
        ))
    )
  )

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">insert-today</span> ()
  <span style="color: #666666;">"Insert today's date into buffer"</span>
  (interactive)
  (insert (format-time-string <span style="color: #008b00;">"%A, %B %e %Y"</span> (current-time))))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">auto-replace-date-time</span> ()
  (<span style="color: #a020f0;">save-excursion</span>
    <span style="color: #666666;">;; </span><span style="color: #666666;">replace DDDD with today's date
</span>    (<span style="color: #a020f0;">while</span> (search-forward <span style="color: #008b00;">"(&gt;&gt;DATE&lt;&lt;)"</span> nil t)
      (<span style="color: #a020f0;">save-restriction</span>
        (narrow-to-region (match-beginning 0) (match-end 0))
        (replace-match <span style="color: #008b00;">""</span> t)
        (insert-today)
        ))))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">auto-update-header-file</span> ()
  (auto-replace-header-name)
  (auto-replace-file-name)
  )

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">auto-update-c-source-file</span> ()
  (<span style="color: #a020f0;">save-excursion</span>
    <span style="color: #666666;">;; </span><span style="color: #666666;">Replace HHHH with file name sans suffix
</span>    (<span style="color: #a020f0;">while</span> (search-forward <span style="color: #008b00;">"HHHH"</span> nil t)
      (<span style="color: #a020f0;">save-restriction</span>
        (narrow-to-region (match-beginning 0) (match-end 0))
        (replace-match (concat (file-name-sans-extension (file-name-nondirectory buffer-file-name)) <span style="color: #008b00;">".h"</span>) t))))
  (auto-replace-file-name)
  (auto-replace-date-time))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">auto-update-defaults</span> ()
  (auto-replace-file-name)
  (auto-replace-file-name-no-ext)
  (auto-replace-date-time)
  )

<span style="color: #666666;">;;; </span><span style="color: #666666;">emacs-rc-auto-insert.el ends here
</span></pre>
  </body>
</html>
